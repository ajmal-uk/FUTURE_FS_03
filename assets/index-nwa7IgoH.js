(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function i(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(l){if(l.ep)return;l.ep=!0;const c=i(l);fetch(l.href,c)}})();var Lh={exports:{}},$r={};var Vv;function tw(){if(Vv)return $r;Vv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(a,l,c){var h=null;if(c!==void 0&&(h=""+c),l.key!==void 0&&(h=""+l.key),"key"in l){c={};for(var m in l)m!=="key"&&(c[m]=l[m])}else c=l;return l=c.ref,{$$typeof:n,type:a,key:h,ref:l!==void 0?l:null,props:c}}return $r.Fragment=e,$r.jsx=i,$r.jsxs=i,$r}var Gv;function nw(){return Gv||(Gv=1,Lh.exports=tw()),Lh.exports}var u=nw(),Uh={exports:{}},he={};var Fv;function sw(){if(Fv)return he;Fv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),b=Symbol.iterator;function C(T){return T===null||typeof T!="object"?null:(T=b&&T[b]||T["@@iterator"],typeof T=="function"?T:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,D={};function A(T,P,W){this.props=T,this.context=P,this.refs=D,this.updater=W||w}A.prototype.isReactComponent={},A.prototype.setState=function(T,P){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,P,"setState")},A.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function H(){}H.prototype=A.prototype;function F(T,P,W){this.props=T,this.context=P,this.refs=D,this.updater=W||w}var ee=F.prototype=new H;ee.constructor=F,O(ee,A.prototype),ee.isPureReactComponent=!0;var K=Array.isArray;function X(){}var Y={H:null,A:null,T:null,S:null},$=Object.prototype.hasOwnProperty;function R(T,P,W){var ne=W.ref;return{$$typeof:n,type:T,key:P,ref:ne!==void 0?ne:null,props:W}}function B(T,P){return R(T.type,P,T.props)}function te(T){return typeof T=="object"&&T!==null&&T.$$typeof===n}function oe(T){var P={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(W){return P[W]})}var ie=/\/+/g;function Oe(T,P){return typeof T=="object"&&T!==null&&T.key!=null?oe(""+T.key):P.toString(36)}function Ie(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(X,X):(T.status="pending",T.then(function(P){T.status==="pending"&&(T.status="fulfilled",T.value=P)},function(P){T.status==="pending"&&(T.status="rejected",T.reason=P)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function I(T,P,W,ne,fe){var be=typeof T;(be==="undefined"||be==="boolean")&&(T=null);var De=!1;if(T===null)De=!0;else switch(be){case"bigint":case"string":case"number":De=!0;break;case"object":switch(T.$$typeof){case n:case e:De=!0;break;case v:return De=T._init,I(De(T._payload),P,W,ne,fe)}}if(De)return fe=fe(T),De=ne===""?"."+Oe(T,0):ne,K(fe)?(W="",De!=null&&(W=De.replace(ie,"$&/")+"/"),I(fe,P,W,"",function(sr){return sr})):fe!=null&&(te(fe)&&(fe=B(fe,W+(fe.key==null||T&&T.key===fe.key?"":(""+fe.key).replace(ie,"$&/")+"/")+De)),P.push(fe)),1;De=0;var At=ne===""?".":ne+":";if(K(T))for(var tt=0;tt<T.length;tt++)ne=T[tt],be=At+Oe(ne,tt),De+=I(ne,P,W,be,fe);else if(tt=C(T),typeof tt=="function")for(T=tt.call(T),tt=0;!(ne=T.next()).done;)ne=ne.value,be=At+Oe(ne,tt++),De+=I(ne,P,W,be,fe);else if(be==="object"){if(typeof T.then=="function")return I(Ie(T),P,W,ne,fe);throw P=String(T),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return De}function V(T,P,W){if(T==null)return T;var ne=[],fe=0;return I(T,ne,"","",function(be){return P.call(W,be,fe++)}),ne}function Z(T){if(T._status===-1){var P=T._result;P=P(),P.then(function(W){(T._status===0||T._status===-1)&&(T._status=1,T._result=W)},function(W){(T._status===0||T._status===-1)&&(T._status=2,T._result=W)}),T._status===-1&&(T._status=0,T._result=P)}if(T._status===1)return T._result.default;throw T._result}var Ne=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},ge={map:V,forEach:function(T,P,W){V(T,function(){P.apply(this,arguments)},W)},count:function(T){var P=0;return V(T,function(){P++}),P},toArray:function(T){return V(T,function(P){return P})||[]},only:function(T){if(!te(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return he.Activity=_,he.Children=ge,he.Component=A,he.Fragment=i,he.Profiler=l,he.PureComponent=F,he.StrictMode=a,he.Suspense=p,he.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,he.__COMPILER_RUNTIME={__proto__:null,c:function(T){return Y.H.useMemoCache(T)}},he.cache=function(T){return function(){return T.apply(null,arguments)}},he.cacheSignal=function(){return null},he.cloneElement=function(T,P,W){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var ne=O({},T.props),fe=T.key;if(P!=null)for(be in P.key!==void 0&&(fe=""+P.key),P)!$.call(P,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&P.ref===void 0||(ne[be]=P[be]);var be=arguments.length-2;if(be===1)ne.children=W;else if(1<be){for(var De=Array(be),At=0;At<be;At++)De[At]=arguments[At+2];ne.children=De}return R(T.type,fe,ne)},he.createContext=function(T){return T={$$typeof:h,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:c,_context:T},T},he.createElement=function(T,P,W){var ne,fe={},be=null;if(P!=null)for(ne in P.key!==void 0&&(be=""+P.key),P)$.call(P,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(fe[ne]=P[ne]);var De=arguments.length-2;if(De===1)fe.children=W;else if(1<De){for(var At=Array(De),tt=0;tt<De;tt++)At[tt]=arguments[tt+2];fe.children=At}if(T&&T.defaultProps)for(ne in De=T.defaultProps,De)fe[ne]===void 0&&(fe[ne]=De[ne]);return R(T,be,fe)},he.createRef=function(){return{current:null}},he.forwardRef=function(T){return{$$typeof:m,render:T}},he.isValidElement=te,he.lazy=function(T){return{$$typeof:v,_payload:{_status:-1,_result:T},_init:Z}},he.memo=function(T,P){return{$$typeof:g,type:T,compare:P===void 0?null:P}},he.startTransition=function(T){var P=Y.T,W={};Y.T=W;try{var ne=T(),fe=Y.S;fe!==null&&fe(W,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(X,Ne)}catch(be){Ne(be)}finally{P!==null&&W.types!==null&&(P.types=W.types),Y.T=P}},he.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},he.use=function(T){return Y.H.use(T)},he.useActionState=function(T,P,W){return Y.H.useActionState(T,P,W)},he.useCallback=function(T,P){return Y.H.useCallback(T,P)},he.useContext=function(T){return Y.H.useContext(T)},he.useDebugValue=function(){},he.useDeferredValue=function(T,P){return Y.H.useDeferredValue(T,P)},he.useEffect=function(T,P){return Y.H.useEffect(T,P)},he.useEffectEvent=function(T){return Y.H.useEffectEvent(T)},he.useId=function(){return Y.H.useId()},he.useImperativeHandle=function(T,P,W){return Y.H.useImperativeHandle(T,P,W)},he.useInsertionEffect=function(T,P){return Y.H.useInsertionEffect(T,P)},he.useLayoutEffect=function(T,P){return Y.H.useLayoutEffect(T,P)},he.useMemo=function(T,P){return Y.H.useMemo(T,P)},he.useOptimistic=function(T,P){return Y.H.useOptimistic(T,P)},he.useReducer=function(T,P,W){return Y.H.useReducer(T,P,W)},he.useRef=function(T){return Y.H.useRef(T)},he.useState=function(T){return Y.H.useState(T)},he.useSyncExternalStore=function(T,P,W){return Y.H.useSyncExternalStore(T,P,W)},he.useTransition=function(){return Y.H.useTransition()},he.version="19.2.1",he}var Yv;function kf(){return Yv||(Yv=1,Uh.exports=sw()),Uh.exports}var E=kf(),zh={exports:{}},Xr={},Ph={exports:{}},Bh={};var Qv;function iw(){return Qv||(Qv=1,(function(n){function e(I,V){var Z=I.length;I.push(V);e:for(;0<Z;){var Ne=Z-1>>>1,ge=I[Ne];if(0<l(ge,V))I[Ne]=V,I[Z]=ge,Z=Ne;else break e}}function i(I){return I.length===0?null:I[0]}function a(I){if(I.length===0)return null;var V=I[0],Z=I.pop();if(Z!==V){I[0]=Z;e:for(var Ne=0,ge=I.length,T=ge>>>1;Ne<T;){var P=2*(Ne+1)-1,W=I[P],ne=P+1,fe=I[ne];if(0>l(W,Z))ne<ge&&0>l(fe,W)?(I[Ne]=fe,I[ne]=Z,Ne=ne):(I[Ne]=W,I[P]=Z,Ne=P);else if(ne<ge&&0>l(fe,Z))I[Ne]=fe,I[ne]=Z,Ne=ne;else break e}}return V}function l(I,V){var Z=I.sortIndex-V.sortIndex;return Z!==0?Z:I.id-V.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var h=Date,m=h.now();n.unstable_now=function(){return h.now()-m}}var p=[],g=[],v=1,_=null,b=3,C=!1,w=!1,O=!1,D=!1,A=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function ee(I){for(var V=i(g);V!==null;){if(V.callback===null)a(g);else if(V.startTime<=I)a(g),V.sortIndex=V.expirationTime,e(p,V);else break;V=i(g)}}function K(I){if(O=!1,ee(I),!w)if(i(p)!==null)w=!0,X||(X=!0,oe());else{var V=i(g);V!==null&&Ie(K,V.startTime-I)}}var X=!1,Y=-1,$=5,R=-1;function B(){return D?!0:!(n.unstable_now()-R<$)}function te(){if(D=!1,X){var I=n.unstable_now();R=I;var V=!0;try{e:{w=!1,O&&(O=!1,H(Y),Y=-1),C=!0;var Z=b;try{t:{for(ee(I),_=i(p);_!==null&&!(_.expirationTime>I&&B());){var Ne=_.callback;if(typeof Ne=="function"){_.callback=null,b=_.priorityLevel;var ge=Ne(_.expirationTime<=I);if(I=n.unstable_now(),typeof ge=="function"){_.callback=ge,ee(I),V=!0;break t}_===i(p)&&a(p),ee(I)}else a(p);_=i(p)}if(_!==null)V=!0;else{var T=i(g);T!==null&&Ie(K,T.startTime-I),V=!1}}break e}finally{_=null,b=Z,C=!1}V=void 0}}finally{V?oe():X=!1}}}var oe;if(typeof F=="function")oe=function(){F(te)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,Oe=ie.port2;ie.port1.onmessage=te,oe=function(){Oe.postMessage(null)}}else oe=function(){A(te,0)};function Ie(I,V){Y=A(function(){I(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(I){I.callback=null},n.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<I?Math.floor(1e3/I):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(I){switch(b){case 1:case 2:case 3:var V=3;break;default:V=b}var Z=b;b=V;try{return I()}finally{b=Z}},n.unstable_requestPaint=function(){D=!0},n.unstable_runWithPriority=function(I,V){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var Z=b;b=I;try{return V()}finally{b=Z}},n.unstable_scheduleCallback=function(I,V,Z){var Ne=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?Ne+Z:Ne):Z=Ne,I){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=Z+ge,I={id:v++,callback:V,priorityLevel:I,startTime:Z,expirationTime:ge,sortIndex:-1},Z>Ne?(I.sortIndex=Z,e(g,I),i(p)===null&&I===i(g)&&(O?(H(Y),Y=-1):O=!0,Ie(K,Z-Ne))):(I.sortIndex=ge,e(p,I),w||C||(w=!0,X||(X=!0,oe()))),I},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(I){var V=b;return function(){var Z=b;b=V;try{return I.apply(this,arguments)}finally{b=Z}}}})(Bh)),Bh}var Kv;function aw(){return Kv||(Kv=1,Ph.exports=iw()),Ph.exports}var Hh={exports:{}},Nt={};var Wv;function rw(){if(Wv)return Nt;Wv=1;var n=kf();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(p,g,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:_==null?null:""+_,children:p,containerInfo:g,implementation:v}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Nt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Nt.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return c(p,g,null,v)},Nt.flushSync=function(p){var g=h.T,v=a.p;try{if(h.T=null,a.p=2,p)return p()}finally{h.T=g,a.p=v,a.d.f()}},Nt.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,a.d.C(p,g))},Nt.prefetchDNS=function(p){typeof p=="string"&&a.d.D(p)},Nt.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,_=m(v,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,C=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?a.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:_,integrity:b,fetchPriority:C}):v==="script"&&a.d.X(p,{crossOrigin:_,integrity:b,fetchPriority:C,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Nt.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=m(g.as,g.crossOrigin);a.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&a.d.M(p)},Nt.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,_=m(v,g.crossOrigin);a.d.L(p,v,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Nt.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=m(g.as,g.crossOrigin);a.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else a.d.m(p)},Nt.requestFormReset=function(p){a.d.r(p)},Nt.unstable_batchedUpdates=function(p,g){return p(g)},Nt.useFormState=function(p,g,v){return h.H.useFormState(p,g,v)},Nt.useFormStatus=function(){return h.H.useHostTransitionStatus()},Nt.version="19.2.1",Nt}var $v;function lw(){if($v)return Hh.exports;$v=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Hh.exports=rw(),Hh.exports}var Xv;function ow(){if(Xv)return Xr;Xv=1;var n=aw(),e=kf(),i=lw();function a(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function h(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function m(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(c(t)!==t)throw Error(a(188))}function g(t){var s=t.alternate;if(!s){if(s=c(t),s===null)throw Error(a(188));return s!==t?null:t}for(var r=t,o=s;;){var d=r.return;if(d===null)break;var f=d.alternate;if(f===null){if(o=d.return,o!==null){r=o;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===r)return p(d),t;if(f===o)return p(d),s;f=f.sibling}throw Error(a(188))}if(r.return!==o.return)r=d,o=f;else{for(var y=!1,S=d.child;S;){if(S===r){y=!0,r=d,o=f;break}if(S===o){y=!0,o=d,r=f;break}S=S.sibling}if(!y){for(S=f.child;S;){if(S===r){y=!0,r=f,o=d;break}if(S===o){y=!0,o=f,r=d;break}S=S.sibling}if(!y)throw Error(a(189))}}if(r.alternate!==o)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?t:s}function v(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=v(t),s!==null)return s;t=t.sibling}return null}var _=Object.assign,b=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),F=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),te=Symbol.iterator;function oe(t){return t===null||typeof t!="object"?null:(t=te&&t[te]||t["@@iterator"],typeof t=="function"?t:null)}var ie=Symbol.for("react.client.reference");function Oe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===ie?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case O:return"Fragment";case A:return"Profiler";case D:return"StrictMode";case K:return"Suspense";case X:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case w:return"Portal";case F:return t.displayName||"Context";case H:return(t._context.displayName||"Context")+".Consumer";case ee:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Y:return s=t.displayName||null,s!==null?s:Oe(t.type)||"Memo";case $:s=t._payload,t=t._init;try{return Oe(t(s))}catch{}}return null}var Ie=Array.isArray,I=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},Ne=[],ge=-1;function T(t){return{current:t}}function P(t){0>ge||(t.current=Ne[ge],Ne[ge]=null,ge--)}function W(t,s){ge++,Ne[ge]=t.current,t.current=s}var ne=T(null),fe=T(null),be=T(null),De=T(null);function At(t,s){switch(W(be,s),W(fe,t),W(ne,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?hv(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=hv(s),t=fv(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}P(ne),W(ne,t)}function tt(){P(ne),P(fe),P(be)}function sr(t){t.memoizedState!==null&&W(De,t);var s=ne.current,r=fv(s,t.type);s!==r&&(W(fe,t),W(ne,r))}function ql(t){fe.current===t&&(P(ne),P(fe)),De.current===t&&(P(De),Yr._currentValue=Z)}var vu,qm;function si(t){if(vu===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);vu=s&&s[1]||"",qm=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+vu+t+qm}var _u=!1;function bu(t,s){if(!t||_u)return"";_u=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(s){var G=function(){throw Error()};if(Object.defineProperty(G.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(G,[])}catch(U){var L=U}Reflect.construct(t,[],G)}else{try{G.call()}catch(U){L=U}t.call(G.prototype)}}else{try{throw Error()}catch(U){L=U}(G=t())&&typeof G.catch=="function"&&G.catch(function(){})}}catch(U){if(U&&L&&typeof U.stack=="string")return[U.stack,L.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),y=f[0],S=f[1];if(y&&S){var x=y.split(`
`),M=S.split(`
`);for(d=o=0;o<x.length&&!x[o].includes("DetermineComponentFrameRoot");)o++;for(;d<M.length&&!M[d].includes("DetermineComponentFrameRoot");)d++;if(o===x.length||d===M.length)for(o=x.length-1,d=M.length-1;1<=o&&0<=d&&x[o]!==M[d];)d--;for(;1<=o&&0<=d;o--,d--)if(x[o]!==M[d]){if(o!==1||d!==1)do if(o--,d--,0>d||x[o]!==M[d]){var z=`
`+x[o].replace(" at new "," at ");return t.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",t.displayName)),z}while(1<=o&&0<=d);break}}}finally{_u=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?si(r):""}function IE(t,s){switch(t.tag){case 26:case 27:case 5:return si(t.type);case 16:return si("Lazy");case 13:return t.child!==s&&s!==null?si("Suspense Fallback"):si("Suspense");case 19:return si("SuspenseList");case 0:case 15:return bu(t.type,!1);case 11:return bu(t.type.render,!1);case 1:return bu(t.type,!0);case 31:return si("Activity");default:return""}}function Vm(t){try{var s="",r=null;do s+=IE(t,r),r=t,t=t.return;while(t);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Su=Object.prototype.hasOwnProperty,Eu=n.unstable_scheduleCallback,Cu=n.unstable_cancelCallback,DE=n.unstable_shouldYield,kE=n.unstable_requestPaint,Vt=n.unstable_now,ME=n.unstable_getCurrentPriorityLevel,Gm=n.unstable_ImmediatePriority,Fm=n.unstable_UserBlockingPriority,Vl=n.unstable_NormalPriority,LE=n.unstable_LowPriority,Ym=n.unstable_IdlePriority,UE=n.log,zE=n.unstable_setDisableYieldValue,ir=null,Gt=null;function ds(t){if(typeof UE=="function"&&zE(t),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(ir,t)}catch{}}var Ft=Math.clz32?Math.clz32:HE,PE=Math.log,BE=Math.LN2;function HE(t){return t>>>=0,t===0?32:31-(PE(t)/BE|0)|0}var Gl=256,Fl=262144,Yl=4194304;function ii(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ql(t,s,r){var o=t.pendingLanes;if(o===0)return 0;var d=0,f=t.suspendedLanes,y=t.pingedLanes;t=t.warmLanes;var S=o&134217727;return S!==0?(o=S&~f,o!==0?d=ii(o):(y&=S,y!==0?d=ii(y):r||(r=S&~t,r!==0&&(d=ii(r))))):(S=o&~f,S!==0?d=ii(S):y!==0?d=ii(y):r||(r=o&~t,r!==0&&(d=ii(r)))),d===0?0:s!==0&&s!==d&&(s&f)===0&&(f=d&-d,r=s&-s,f>=r||f===32&&(r&4194048)!==0)?s:d}function ar(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function qE(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qm(){var t=Yl;return Yl<<=1,(Yl&62914560)===0&&(Yl=4194304),t}function xu(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function rr(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function VE(t,s,r,o,d,f){var y=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var S=t.entanglements,x=t.expirationTimes,M=t.hiddenUpdates;for(r=y&~r;0<r;){var z=31-Ft(r),G=1<<z;S[z]=0,x[z]=-1;var L=M[z];if(L!==null)for(M[z]=null,z=0;z<L.length;z++){var U=L[z];U!==null&&(U.lane&=-536870913)}r&=~G}o!==0&&Km(t,o,0),f!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=f&~(y&~s))}function Km(t,s,r){t.pendingLanes|=s,t.suspendedLanes&=~s;var o=31-Ft(s);t.entangledLanes|=s,t.entanglements[o]=t.entanglements[o]|1073741824|r&261930}function Wm(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var o=31-Ft(r),d=1<<o;d&s|t[o]&s&&(t[o]|=s),r&=~d}}function $m(t,s){var r=s&-s;return r=(r&42)!==0?1:wu(r),(r&(t.suspendedLanes|s))!==0?0:r}function wu(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Nu(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Xm(){var t=V.p;return t!==0?t:(t=window.event,t===void 0?32:Lv(t.type))}function Zm(t,s){var r=V.p;try{return V.p=t,s()}finally{V.p=r}}var hs=Math.random().toString(36).slice(2),bt="__reactFiber$"+hs,Dt="__reactProps$"+hs,qi="__reactContainer$"+hs,Tu="__reactEvents$"+hs,GE="__reactListeners$"+hs,FE="__reactHandles$"+hs,Jm="__reactResources$"+hs,lr="__reactMarker$"+hs;function Au(t){delete t[bt],delete t[Dt],delete t[Tu],delete t[GE],delete t[FE]}function Vi(t){var s=t[bt];if(s)return s;for(var r=t.parentNode;r;){if(s=r[qi]||r[bt]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=bv(t);t!==null;){if(r=t[bt])return r;t=bv(t)}return s}t=r,r=t.parentNode}return null}function Gi(t){if(t=t[bt]||t[qi]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function or(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(a(33))}function Fi(t){var s=t[Jm];return s||(s=t[Jm]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ft(t){t[lr]=!0}var ep=new Set,tp={};function ai(t,s){Yi(t,s),Yi(t+"Capture",s)}function Yi(t,s){for(tp[t]=s,t=0;t<s.length;t++)ep.add(s[t])}var YE=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),np={},sp={};function QE(t){return Su.call(sp,t)?!0:Su.call(np,t)?!1:YE.test(t)?sp[t]=!0:(np[t]=!0,!1)}function Kl(t,s,r){if(QE(s))if(r===null)t.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var o=s.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+r)}}function Wl(t,s,r){if(r===null)t.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+r)}}function Ln(t,s,r,o){if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(s,r,""+o)}}function tn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ip(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function KE(t,s,r){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,f=o.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return d.call(this)},set:function(y){r=""+y,f.call(this,y)}}),Object.defineProperty(t,s,{enumerable:o.enumerable}),{getValue:function(){return r},setValue:function(y){r=""+y},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Ru(t){if(!t._valueTracker){var s=ip(t)?"checked":"value";t._valueTracker=KE(t,s,""+t[s])}}function ap(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),o="";return t&&(o=ip(t)?t.checked?"true":"false":t.value),t=o,t!==r?(s.setValue(t),!0):!1}function $l(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var WE=/[\n"\\]/g;function nn(t){return t.replace(WE,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ju(t,s,r,o,d,f,y,S){t.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?t.type=y:t.removeAttribute("type"),s!=null?y==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+tn(s)):t.value!==""+tn(s)&&(t.value=""+tn(s)):y!=="submit"&&y!=="reset"||t.removeAttribute("value"),s!=null?Ou(t,y,tn(s)):r!=null?Ou(t,y,tn(r)):o!=null&&t.removeAttribute("value"),d==null&&f!=null&&(t.defaultChecked=!!f),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+tn(S):t.removeAttribute("name")}function rp(t,s,r,o,d,f,y,S){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),s!=null||r!=null){if(!(f!=="submit"&&f!=="reset"||s!=null)){Ru(t);return}r=r!=null?""+tn(r):"",s=s!=null?""+tn(s):r,S||s===t.value||(t.value=s),t.defaultValue=s}o=o??d,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=S?t.checked:!!o,t.defaultChecked=!!o,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(t.name=y),Ru(t)}function Ou(t,s,r){s==="number"&&$l(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function Qi(t,s,r,o){if(t=t.options,s){s={};for(var d=0;d<r.length;d++)s["$"+r[d]]=!0;for(r=0;r<t.length;r++)d=s.hasOwnProperty("$"+t[r].value),t[r].selected!==d&&(t[r].selected=d),d&&o&&(t[r].defaultSelected=!0)}else{for(r=""+tn(r),s=null,d=0;d<t.length;d++){if(t[d].value===r){t[d].selected=!0,o&&(t[d].defaultSelected=!0);return}s!==null||t[d].disabled||(s=t[d])}s!==null&&(s.selected=!0)}}function lp(t,s,r){if(s!=null&&(s=""+tn(s),s!==t.value&&(t.value=s),r==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=r!=null?""+tn(r):""}function op(t,s,r,o){if(s==null){if(o!=null){if(r!=null)throw Error(a(92));if(Ie(o)){if(1<o.length)throw Error(a(93));o=o[0]}r=o}r==null&&(r=""),s=r}r=tn(s),t.defaultValue=r,o=t.textContent,o===r&&o!==""&&o!==null&&(t.value=o),Ru(t)}function Ki(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var $E=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cp(t,s,r){var o=s.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":o?t.setProperty(s,r):typeof r!="number"||r===0||$E.has(s)?s==="float"?t.cssFloat=r:t[s]=(""+r).trim():t[s]=r+"px"}function up(t,s,r){if(s!=null&&typeof s!="object")throw Error(a(62));if(t=t.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||s!=null&&s.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var d in s)o=s[d],s.hasOwnProperty(d)&&r[d]!==o&&cp(t,d,o)}else for(var f in s)s.hasOwnProperty(f)&&cp(t,f,s[f])}function Iu(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var XE=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ZE=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xl(t){return ZE.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Un(){}var Du=null;function ku(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wi=null,$i=null;function dp(t){var s=Gi(t);if(s&&(t=s.stateNode)){var r=t[Dt]||null;e:switch(t=s.stateNode,s.type){case"input":if(ju(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+nn(""+s)+'"][type="radio"]'),s=0;s<r.length;s++){var o=r[s];if(o!==t&&o.form===t.form){var d=o[Dt]||null;if(!d)throw Error(a(90));ju(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<r.length;s++)o=r[s],o.form===t.form&&ap(o)}break e;case"textarea":lp(t,r.value,r.defaultValue);break e;case"select":s=r.value,s!=null&&Qi(t,!!r.multiple,s,!1)}}}var Mu=!1;function hp(t,s,r){if(Mu)return t(s,r);Mu=!0;try{var o=t(s);return o}finally{if(Mu=!1,(Wi!==null||$i!==null)&&(Po(),Wi&&(s=Wi,t=$i,$i=Wi=null,dp(s),t)))for(s=0;s<t.length;s++)dp(t[s])}}function cr(t,s){var r=t.stateNode;if(r===null)return null;var o=r[Dt]||null;if(o===null)return null;r=o[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(a(231,s,typeof r));return r}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lu=!1;if(zn)try{var ur={};Object.defineProperty(ur,"passive",{get:function(){Lu=!0}}),window.addEventListener("test",ur,ur),window.removeEventListener("test",ur,ur)}catch{Lu=!1}var fs=null,Uu=null,Zl=null;function fp(){if(Zl)return Zl;var t,s=Uu,r=s.length,o,d="value"in fs?fs.value:fs.textContent,f=d.length;for(t=0;t<r&&s[t]===d[t];t++);var y=r-t;for(o=1;o<=y&&s[r-o]===d[f-o];o++);return Zl=d.slice(t,1<o?1-o:void 0)}function Jl(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function eo(){return!0}function mp(){return!1}function kt(t){function s(r,o,d,f,y){this._reactName=r,this._targetInst=d,this.type=o,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(r=t[S],this[S]=r?r(f):f[S]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?eo:mp,this.isPropagationStopped=mp,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=eo)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=eo)},persist:function(){},isPersistent:eo}),s}var ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},to=kt(ri),dr=_({},ri,{view:0,detail:0}),JE=kt(dr),zu,Pu,hr,no=_({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hr&&(hr&&t.type==="mousemove"?(zu=t.screenX-hr.screenX,Pu=t.screenY-hr.screenY):Pu=zu=0,hr=t),zu)},movementY:function(t){return"movementY"in t?t.movementY:Pu}}),pp=kt(no),eC=_({},no,{dataTransfer:0}),tC=kt(eC),nC=_({},dr,{relatedTarget:0}),Bu=kt(nC),sC=_({},ri,{animationName:0,elapsedTime:0,pseudoElement:0}),iC=kt(sC),aC=_({},ri,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rC=kt(aC),lC=_({},ri,{data:0}),gp=kt(lC),oC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dC(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=uC[t])?!!s[t]:!1}function Hu(){return dC}var hC=_({},dr,{key:function(t){if(t.key){var s=oC[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Jl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hu,charCode:function(t){return t.type==="keypress"?Jl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fC=kt(hC),mC=_({},no,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yp=kt(mC),pC=_({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hu}),gC=kt(pC),yC=_({},ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),vC=kt(yC),_C=_({},no,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),bC=kt(_C),SC=_({},ri,{newState:0,oldState:0}),EC=kt(SC),CC=[9,13,27,32],qu=zn&&"CompositionEvent"in window,fr=null;zn&&"documentMode"in document&&(fr=document.documentMode);var xC=zn&&"TextEvent"in window&&!fr,vp=zn&&(!qu||fr&&8<fr&&11>=fr),_p=" ",bp=!1;function Sp(t,s){switch(t){case"keyup":return CC.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ep(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xi=!1;function wC(t,s){switch(t){case"compositionend":return Ep(s);case"keypress":return s.which!==32?null:(bp=!0,_p);case"textInput":return t=s.data,t===_p&&bp?null:t;default:return null}}function NC(t,s){if(Xi)return t==="compositionend"||!qu&&Sp(t,s)?(t=fp(),Zl=Uu=fs=null,Xi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return vp&&s.locale!=="ko"?null:s.data;default:return null}}var TC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cp(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!TC[t.type]:s==="textarea"}function xp(t,s,r,o){Wi?$i?$i.push(o):$i=[o]:Wi=o,s=Yo(s,"onChange"),0<s.length&&(r=new to("onChange","change",null,r,o),t.push({event:r,listeners:s}))}var mr=null,pr=null;function AC(t){rv(t,0)}function so(t){var s=or(t);if(ap(s))return t}function wp(t,s){if(t==="change")return s}var Np=!1;if(zn){var Vu;if(zn){var Gu="oninput"in document;if(!Gu){var Tp=document.createElement("div");Tp.setAttribute("oninput","return;"),Gu=typeof Tp.oninput=="function"}Vu=Gu}else Vu=!1;Np=Vu&&(!document.documentMode||9<document.documentMode)}function Ap(){mr&&(mr.detachEvent("onpropertychange",Rp),pr=mr=null)}function Rp(t){if(t.propertyName==="value"&&so(pr)){var s=[];xp(s,pr,t,ku(t)),hp(AC,s)}}function RC(t,s,r){t==="focusin"?(Ap(),mr=s,pr=r,mr.attachEvent("onpropertychange",Rp)):t==="focusout"&&Ap()}function jC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return so(pr)}function OC(t,s){if(t==="click")return so(s)}function IC(t,s){if(t==="input"||t==="change")return so(s)}function DC(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Yt=typeof Object.is=="function"?Object.is:DC;function gr(t,s){if(Yt(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),o=Object.keys(s);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var d=r[o];if(!Su.call(s,d)||!Yt(t[d],s[d]))return!1}return!0}function jp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Op(t,s){var r=jp(t);t=0;for(var o;r;){if(r.nodeType===3){if(o=t+r.textContent.length,t<=s&&o>=s)return{node:r,offset:s-t};t=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=jp(r)}}function Ip(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Ip(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Dp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=$l(t.document);s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=$l(t.document)}return s}function Fu(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var kC=zn&&"documentMode"in document&&11>=document.documentMode,Zi=null,Yu=null,yr=null,Qu=!1;function kp(t,s,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Qu||Zi==null||Zi!==$l(o)||(o=Zi,"selectionStart"in o&&Fu(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),yr&&gr(yr,o)||(yr=o,o=Yo(Yu,"onSelect"),0<o.length&&(s=new to("onSelect","select",null,s,r),t.push({event:s,listeners:o}),s.target=Zi)))}function li(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var Ji={animationend:li("Animation","AnimationEnd"),animationiteration:li("Animation","AnimationIteration"),animationstart:li("Animation","AnimationStart"),transitionrun:li("Transition","TransitionRun"),transitionstart:li("Transition","TransitionStart"),transitioncancel:li("Transition","TransitionCancel"),transitionend:li("Transition","TransitionEnd")},Ku={},Mp={};zn&&(Mp=document.createElement("div").style,"AnimationEvent"in window||(delete Ji.animationend.animation,delete Ji.animationiteration.animation,delete Ji.animationstart.animation),"TransitionEvent"in window||delete Ji.transitionend.transition);function oi(t){if(Ku[t])return Ku[t];if(!Ji[t])return t;var s=Ji[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in Mp)return Ku[t]=s[r];return t}var Lp=oi("animationend"),Up=oi("animationiteration"),zp=oi("animationstart"),MC=oi("transitionrun"),LC=oi("transitionstart"),UC=oi("transitioncancel"),Pp=oi("transitionend"),Bp=new Map,Wu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wu.push("scrollEnd");function vn(t,s){Bp.set(t,s),ai(s,[t])}var io=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},sn=[],ea=0,$u=0;function ao(){for(var t=ea,s=$u=ea=0;s<t;){var r=sn[s];sn[s++]=null;var o=sn[s];sn[s++]=null;var d=sn[s];sn[s++]=null;var f=sn[s];if(sn[s++]=null,o!==null&&d!==null){var y=o.pending;y===null?d.next=d:(d.next=y.next,y.next=d),o.pending=d}f!==0&&Hp(r,d,f)}}function ro(t,s,r,o){sn[ea++]=t,sn[ea++]=s,sn[ea++]=r,sn[ea++]=o,$u|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function Xu(t,s,r,o){return ro(t,s,r,o),lo(t)}function ci(t,s){return ro(t,null,null,s),lo(t)}function Hp(t,s,r){t.lanes|=r;var o=t.alternate;o!==null&&(o.lanes|=r);for(var d=!1,f=t.return;f!==null;)f.childLanes|=r,o=f.alternate,o!==null&&(o.childLanes|=r),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(d=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,d&&s!==null&&(d=31-Ft(r),t=f.hiddenUpdates,o=t[d],o===null?t[d]=[s]:o.push(s),s.lane=r|536870912),f):null}function lo(t){if(50<Pr)throw Pr=0,rh=null,Error(a(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var ta={};function zC(t,s,r,o){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(t,s,r,o){return new zC(t,s,r,o)}function Zu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Pn(t,s){var r=t.alternate;return r===null?(r=Qt(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function qp(t,s){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,s=r.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function oo(t,s,r,o,d,f){var y=0;if(o=t,typeof t=="function")Zu(t)&&(y=1);else if(typeof t=="string")y=Vx(t,r,ne.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=Qt(31,r,s,d),t.elementType=R,t.lanes=f,t;case O:return ui(r.children,d,f,s);case D:y=8,d|=24;break;case A:return t=Qt(12,r,s,d|2),t.elementType=A,t.lanes=f,t;case K:return t=Qt(13,r,s,d),t.elementType=K,t.lanes=f,t;case X:return t=Qt(19,r,s,d),t.elementType=X,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case F:y=10;break e;case H:y=9;break e;case ee:y=11;break e;case Y:y=14;break e;case $:y=16,o=null;break e}y=29,r=Error(a(130,t===null?"null":typeof t,"")),o=null}return s=Qt(y,r,s,d),s.elementType=t,s.type=o,s.lanes=f,s}function ui(t,s,r,o){return t=Qt(7,t,o,s),t.lanes=r,t}function Ju(t,s,r){return t=Qt(6,t,null,s),t.lanes=r,t}function Vp(t){var s=Qt(18,null,null,0);return s.stateNode=t,s}function ed(t,s,r){return s=Qt(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Gp=new WeakMap;function an(t,s){if(typeof t=="object"&&t!==null){var r=Gp.get(t);return r!==void 0?r:(s={value:t,source:s,stack:Vm(s)},Gp.set(t,s),s)}return{value:t,source:s,stack:Vm(s)}}var na=[],sa=0,co=null,vr=0,rn=[],ln=0,ms=null,An=1,Rn="";function Bn(t,s){na[sa++]=vr,na[sa++]=co,co=t,vr=s}function Fp(t,s,r){rn[ln++]=An,rn[ln++]=Rn,rn[ln++]=ms,ms=t;var o=An;t=Rn;var d=32-Ft(o)-1;o&=~(1<<d),r+=1;var f=32-Ft(s)+d;if(30<f){var y=d-d%5;f=(o&(1<<y)-1).toString(32),o>>=y,d-=y,An=1<<32-Ft(s)+d|r<<d|o,Rn=f+t}else An=1<<f|r<<d|o,Rn=t}function td(t){t.return!==null&&(Bn(t,1),Fp(t,1,0))}function nd(t){for(;t===co;)co=na[--sa],na[sa]=null,vr=na[--sa],na[sa]=null;for(;t===ms;)ms=rn[--ln],rn[ln]=null,Rn=rn[--ln],rn[ln]=null,An=rn[--ln],rn[ln]=null}function Yp(t,s){rn[ln++]=An,rn[ln++]=Rn,rn[ln++]=ms,An=s.id,Rn=s.overflow,ms=t}var St=null,Ge=null,we=!1,ps=null,on=!1,sd=Error(a(519));function gs(t){var s=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _r(an(s,t)),sd}function Qp(t){var s=t.stateNode,r=t.type,o=t.memoizedProps;switch(s[bt]=t,s[Dt]=o,r){case"dialog":Ee("cancel",s),Ee("close",s);break;case"iframe":case"object":case"embed":Ee("load",s);break;case"video":case"audio":for(r=0;r<Hr.length;r++)Ee(Hr[r],s);break;case"source":Ee("error",s);break;case"img":case"image":case"link":Ee("error",s),Ee("load",s);break;case"details":Ee("toggle",s);break;case"input":Ee("invalid",s),rp(s,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Ee("invalid",s);break;case"textarea":Ee("invalid",s),op(s,o.value,o.defaultValue,o.children)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||s.textContent===""+r||o.suppressHydrationWarning===!0||uv(s.textContent,r)?(o.popover!=null&&(Ee("beforetoggle",s),Ee("toggle",s)),o.onScroll!=null&&Ee("scroll",s),o.onScrollEnd!=null&&Ee("scrollend",s),o.onClick!=null&&(s.onclick=Un),s=!0):s=!1,s||gs(t,!0)}function Kp(t){for(St=t.return;St;)switch(St.tag){case 5:case 31:case 13:on=!1;return;case 27:case 3:on=!0;return;default:St=St.return}}function ia(t){if(t!==St)return!1;if(!we)return Kp(t),we=!0,!1;var s=t.tag,r;if((r=s!==3&&s!==27)&&((r=s===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||Sh(t.type,t.memoizedProps)),r=!r),r&&Ge&&gs(t),Kp(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Ge=_v(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Ge=_v(t)}else s===27?(s=Ge,js(t.type)?(t=Nh,Nh=null,Ge=t):Ge=s):Ge=St?un(t.stateNode.nextSibling):null;return!0}function di(){Ge=St=null,we=!1}function id(){var t=ps;return t!==null&&(zt===null?zt=t:zt.push.apply(zt,t),ps=null),t}function _r(t){ps===null?ps=[t]:ps.push(t)}var ad=T(null),hi=null,Hn=null;function ys(t,s,r){W(ad,s._currentValue),s._currentValue=r}function qn(t){t._currentValue=ad.current,P(ad)}function rd(t,s,r){for(;t!==null;){var o=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,o!==null&&(o.childLanes|=s)):o!==null&&(o.childLanes&s)!==s&&(o.childLanes|=s),t===r)break;t=t.return}}function ld(t,s,r,o){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var f=d.dependencies;if(f!==null){var y=d.child;f=f.firstContext;e:for(;f!==null;){var S=f;f=d;for(var x=0;x<s.length;x++)if(S.context===s[x]){f.lanes|=r,S=f.alternate,S!==null&&(S.lanes|=r),rd(f.return,r,t),o||(y=null);break e}f=S.next}}else if(d.tag===18){if(y=d.return,y===null)throw Error(a(341));y.lanes|=r,f=y.alternate,f!==null&&(f.lanes|=r),rd(y,r,t),y=null}else y=d.child;if(y!==null)y.return=d;else for(y=d;y!==null;){if(y===t){y=null;break}if(d=y.sibling,d!==null){d.return=y.return,y=d;break}y=y.return}d=y}}function aa(t,s,r,o){t=null;for(var d=s,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var y=d.alternate;if(y===null)throw Error(a(387));if(y=y.memoizedProps,y!==null){var S=d.type;Yt(d.pendingProps.value,y.value)||(t!==null?t.push(S):t=[S])}}else if(d===De.current){if(y=d.alternate,y===null)throw Error(a(387));y.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(Yr):t=[Yr])}d=d.return}t!==null&&ld(s,t,r,o),s.flags|=262144}function uo(t){for(t=t.firstContext;t!==null;){if(!Yt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function fi(t){hi=t,Hn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Et(t){return Wp(hi,t)}function ho(t,s){return hi===null&&fi(t),Wp(t,s)}function Wp(t,s){var r=s._currentValue;if(s={context:s,memoizedValue:r,next:null},Hn===null){if(t===null)throw Error(a(308));Hn=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else Hn=Hn.next=s;return r}var PC=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(r,o){t.push(o)}};this.abort=function(){s.aborted=!0,t.forEach(function(r){return r()})}},BC=n.unstable_scheduleCallback,HC=n.unstable_NormalPriority,at={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function od(){return{controller:new PC,data:new Map,refCount:0}}function br(t){t.refCount--,t.refCount===0&&BC(HC,function(){t.controller.abort()})}var Sr=null,cd=0,ra=0,la=null;function qC(t,s){if(Sr===null){var r=Sr=[];cd=0,ra=hh(),la={status:"pending",value:void 0,then:function(o){r.push(o)}}}return cd++,s.then($p,$p),s}function $p(){if(--cd===0&&Sr!==null){la!==null&&(la.status="fulfilled");var t=Sr;Sr=null,ra=0,la=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function VC(t,s){var r=[],o={status:"pending",value:null,reason:null,then:function(d){r.push(d)}};return t.then(function(){o.status="fulfilled",o.value=s;for(var d=0;d<r.length;d++)(0,r[d])(s)},function(d){for(o.status="rejected",o.reason=d,d=0;d<r.length;d++)(0,r[d])(void 0)}),o}var Xp=I.S;I.S=function(t,s){ky=Vt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&qC(t,s),Xp!==null&&Xp(t,s)};var mi=T(null);function ud(){var t=mi.current;return t!==null?t:He.pooledCache}function fo(t,s){s===null?W(mi,mi.current):W(mi,s.pool)}function Zp(){var t=ud();return t===null?null:{parent:at._currentValue,pool:t}}var oa=Error(a(460)),dd=Error(a(474)),mo=Error(a(542)),po={then:function(){}};function Jp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function eg(t,s,r){switch(r=t[r],r===void 0?t.push(s):r!==s&&(s.then(Un,Un),s=r),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,ng(t),t;default:if(typeof s.status=="string")s.then(Un,Un);else{if(t=He,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=s,t.status="pending",t.then(function(o){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=o}},function(o){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=o}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,ng(t),t}throw gi=s,oa}}function pi(t){try{var s=t._init;return s(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(gi=r,oa):r}}var gi=null;function tg(){if(gi===null)throw Error(a(459));var t=gi;return gi=null,t}function ng(t){if(t===oa||t===mo)throw Error(a(483))}var ca=null,Er=0;function go(t){var s=Er;return Er+=1,ca===null&&(ca=[]),eg(ca,t,s)}function Cr(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function yo(t,s){throw s.$$typeof===b?Error(a(525)):(t=Object.prototype.toString.call(s),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function sg(t){function s(j,N){if(t){var k=j.deletions;k===null?(j.deletions=[N],j.flags|=16):k.push(N)}}function r(j,N){if(!t)return null;for(;N!==null;)s(j,N),N=N.sibling;return null}function o(j){for(var N=new Map;j!==null;)j.key!==null?N.set(j.key,j):N.set(j.index,j),j=j.sibling;return N}function d(j,N){return j=Pn(j,N),j.index=0,j.sibling=null,j}function f(j,N,k){return j.index=k,t?(k=j.alternate,k!==null?(k=k.index,k<N?(j.flags|=67108866,N):k):(j.flags|=67108866,N)):(j.flags|=1048576,N)}function y(j){return t&&j.alternate===null&&(j.flags|=67108866),j}function S(j,N,k,q){return N===null||N.tag!==6?(N=Ju(k,j.mode,q),N.return=j,N):(N=d(N,k),N.return=j,N)}function x(j,N,k,q){var le=k.type;return le===O?z(j,N,k.props.children,q,k.key):N!==null&&(N.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===$&&pi(le)===N.type)?(N=d(N,k.props),Cr(N,k),N.return=j,N):(N=oo(k.type,k.key,k.props,null,j.mode,q),Cr(N,k),N.return=j,N)}function M(j,N,k,q){return N===null||N.tag!==4||N.stateNode.containerInfo!==k.containerInfo||N.stateNode.implementation!==k.implementation?(N=ed(k,j.mode,q),N.return=j,N):(N=d(N,k.children||[]),N.return=j,N)}function z(j,N,k,q,le){return N===null||N.tag!==7?(N=ui(k,j.mode,q,le),N.return=j,N):(N=d(N,k),N.return=j,N)}function G(j,N,k){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Ju(""+N,j.mode,k),N.return=j,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case C:return k=oo(N.type,N.key,N.props,null,j.mode,k),Cr(k,N),k.return=j,k;case w:return N=ed(N,j.mode,k),N.return=j,N;case $:return N=pi(N),G(j,N,k)}if(Ie(N)||oe(N))return N=ui(N,j.mode,k,null),N.return=j,N;if(typeof N.then=="function")return G(j,go(N),k);if(N.$$typeof===F)return G(j,ho(j,N),k);yo(j,N)}return null}function L(j,N,k,q){var le=N!==null?N.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return le!==null?null:S(j,N,""+k,q);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case C:return k.key===le?x(j,N,k,q):null;case w:return k.key===le?M(j,N,k,q):null;case $:return k=pi(k),L(j,N,k,q)}if(Ie(k)||oe(k))return le!==null?null:z(j,N,k,q,null);if(typeof k.then=="function")return L(j,N,go(k),q);if(k.$$typeof===F)return L(j,N,ho(j,k),q);yo(j,k)}return null}function U(j,N,k,q,le){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return j=j.get(k)||null,S(N,j,""+q,le);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case C:return j=j.get(q.key===null?k:q.key)||null,x(N,j,q,le);case w:return j=j.get(q.key===null?k:q.key)||null,M(N,j,q,le);case $:return q=pi(q),U(j,N,k,q,le)}if(Ie(q)||oe(q))return j=j.get(k)||null,z(N,j,q,le,null);if(typeof q.then=="function")return U(j,N,k,go(q),le);if(q.$$typeof===F)return U(j,N,k,ho(N,q),le);yo(N,q)}return null}function J(j,N,k,q){for(var le=null,Te=null,se=N,pe=N=0,xe=null;se!==null&&pe<k.length;pe++){se.index>pe?(xe=se,se=null):xe=se.sibling;var Ae=L(j,se,k[pe],q);if(Ae===null){se===null&&(se=xe);break}t&&se&&Ae.alternate===null&&s(j,se),N=f(Ae,N,pe),Te===null?le=Ae:Te.sibling=Ae,Te=Ae,se=xe}if(pe===k.length)return r(j,se),we&&Bn(j,pe),le;if(se===null){for(;pe<k.length;pe++)se=G(j,k[pe],q),se!==null&&(N=f(se,N,pe),Te===null?le=se:Te.sibling=se,Te=se);return we&&Bn(j,pe),le}for(se=o(se);pe<k.length;pe++)xe=U(se,j,pe,k[pe],q),xe!==null&&(t&&xe.alternate!==null&&se.delete(xe.key===null?pe:xe.key),N=f(xe,N,pe),Te===null?le=xe:Te.sibling=xe,Te=xe);return t&&se.forEach(function(Ms){return s(j,Ms)}),we&&Bn(j,pe),le}function ce(j,N,k,q){if(k==null)throw Error(a(151));for(var le=null,Te=null,se=N,pe=N=0,xe=null,Ae=k.next();se!==null&&!Ae.done;pe++,Ae=k.next()){se.index>pe?(xe=se,se=null):xe=se.sibling;var Ms=L(j,se,Ae.value,q);if(Ms===null){se===null&&(se=xe);break}t&&se&&Ms.alternate===null&&s(j,se),N=f(Ms,N,pe),Te===null?le=Ms:Te.sibling=Ms,Te=Ms,se=xe}if(Ae.done)return r(j,se),we&&Bn(j,pe),le;if(se===null){for(;!Ae.done;pe++,Ae=k.next())Ae=G(j,Ae.value,q),Ae!==null&&(N=f(Ae,N,pe),Te===null?le=Ae:Te.sibling=Ae,Te=Ae);return we&&Bn(j,pe),le}for(se=o(se);!Ae.done;pe++,Ae=k.next())Ae=U(se,j,pe,Ae.value,q),Ae!==null&&(t&&Ae.alternate!==null&&se.delete(Ae.key===null?pe:Ae.key),N=f(Ae,N,pe),Te===null?le=Ae:Te.sibling=Ae,Te=Ae);return t&&se.forEach(function(ew){return s(j,ew)}),we&&Bn(j,pe),le}function Pe(j,N,k,q){if(typeof k=="object"&&k!==null&&k.type===O&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case C:e:{for(var le=k.key;N!==null;){if(N.key===le){if(le=k.type,le===O){if(N.tag===7){r(j,N.sibling),q=d(N,k.props.children),q.return=j,j=q;break e}}else if(N.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===$&&pi(le)===N.type){r(j,N.sibling),q=d(N,k.props),Cr(q,k),q.return=j,j=q;break e}r(j,N);break}else s(j,N);N=N.sibling}k.type===O?(q=ui(k.props.children,j.mode,q,k.key),q.return=j,j=q):(q=oo(k.type,k.key,k.props,null,j.mode,q),Cr(q,k),q.return=j,j=q)}return y(j);case w:e:{for(le=k.key;N!==null;){if(N.key===le)if(N.tag===4&&N.stateNode.containerInfo===k.containerInfo&&N.stateNode.implementation===k.implementation){r(j,N.sibling),q=d(N,k.children||[]),q.return=j,j=q;break e}else{r(j,N);break}else s(j,N);N=N.sibling}q=ed(k,j.mode,q),q.return=j,j=q}return y(j);case $:return k=pi(k),Pe(j,N,k,q)}if(Ie(k))return J(j,N,k,q);if(oe(k)){if(le=oe(k),typeof le!="function")throw Error(a(150));return k=le.call(k),ce(j,N,k,q)}if(typeof k.then=="function")return Pe(j,N,go(k),q);if(k.$$typeof===F)return Pe(j,N,ho(j,k),q);yo(j,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,N!==null&&N.tag===6?(r(j,N.sibling),q=d(N,k),q.return=j,j=q):(r(j,N),q=Ju(k,j.mode,q),q.return=j,j=q),y(j)):r(j,N)}return function(j,N,k,q){try{Er=0;var le=Pe(j,N,k,q);return ca=null,le}catch(se){if(se===oa||se===mo)throw se;var Te=Qt(29,se,null,j.mode);return Te.lanes=q,Te.return=j,Te}finally{}}}var yi=sg(!0),ig=sg(!1),vs=!1;function hd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fd(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function _s(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function bs(t,s,r){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(je&2)!==0){var d=o.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),o.pending=s,s=lo(t),Hp(t,null,r),s}return ro(t,o,s,r),lo(t)}function xr(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194048)!==0)){var o=s.lanes;o&=t.pendingLanes,r|=o,s.lanes=r,Wm(t,r)}}function md(t,s){var r=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var d=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var y={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};f===null?d=f=y:f=f.next=y,r=r.next}while(r!==null);f===null?d=f=s:f=f.next=s}else d=f=s;r={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}var pd=!1;function wr(){if(pd){var t=la;if(t!==null)throw t}}function Nr(t,s,r,o){pd=!1;var d=t.updateQueue;vs=!1;var f=d.firstBaseUpdate,y=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var x=S,M=x.next;x.next=null,y===null?f=M:y.next=M,y=x;var z=t.alternate;z!==null&&(z=z.updateQueue,S=z.lastBaseUpdate,S!==y&&(S===null?z.firstBaseUpdate=M:S.next=M,z.lastBaseUpdate=x))}if(f!==null){var G=d.baseState;y=0,z=M=x=null,S=f;do{var L=S.lane&-536870913,U=L!==S.lane;if(U?(Ce&L)===L:(o&L)===L){L!==0&&L===ra&&(pd=!0),z!==null&&(z=z.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var J=t,ce=S;L=s;var Pe=r;switch(ce.tag){case 1:if(J=ce.payload,typeof J=="function"){G=J.call(Pe,G,L);break e}G=J;break e;case 3:J.flags=J.flags&-65537|128;case 0:if(J=ce.payload,L=typeof J=="function"?J.call(Pe,G,L):J,L==null)break e;G=_({},G,L);break e;case 2:vs=!0}}L=S.callback,L!==null&&(t.flags|=64,U&&(t.flags|=8192),U=d.callbacks,U===null?d.callbacks=[L]:U.push(L))}else U={lane:L,tag:S.tag,payload:S.payload,callback:S.callback,next:null},z===null?(M=z=U,x=G):z=z.next=U,y|=L;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;U=S,S=U.next,U.next=null,d.lastBaseUpdate=U,d.shared.pending=null}}while(!0);z===null&&(x=G),d.baseState=x,d.firstBaseUpdate=M,d.lastBaseUpdate=z,f===null&&(d.shared.lanes=0),ws|=y,t.lanes=y,t.memoizedState=G}}function ag(t,s){if(typeof t!="function")throw Error(a(191,t));t.call(s)}function rg(t,s){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)ag(r[t],s)}var ua=T(null),vo=T(0);function lg(t,s){t=Xn,W(vo,t),W(ua,s),Xn=t|s.baseLanes}function gd(){W(vo,Xn),W(ua,ua.current)}function yd(){Xn=vo.current,P(ua),P(vo)}var Kt=T(null),cn=null;function Ss(t){var s=t.alternate;W(nt,nt.current&1),W(Kt,t),cn===null&&(s===null||ua.current!==null||s.memoizedState!==null)&&(cn=t)}function vd(t){W(nt,nt.current),W(Kt,t),cn===null&&(cn=t)}function og(t){t.tag===22?(W(nt,nt.current),W(Kt,t),cn===null&&(cn=t)):Es()}function Es(){W(nt,nt.current),W(Kt,Kt.current)}function Wt(t){P(Kt),cn===t&&(cn=null),P(nt)}var nt=T(0);function _o(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||xh(r)||wh(r)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Vn=0,me=null,Ue=null,rt=null,bo=!1,da=!1,vi=!1,So=0,Tr=0,ha=null,GC=0;function Xe(){throw Error(a(321))}function _d(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!Yt(t[r],s[r]))return!1;return!0}function bd(t,s,r,o,d,f){return Vn=f,me=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,I.H=t===null||t.memoizedState===null?Fg:Md,vi=!1,f=r(o,d),vi=!1,da&&(f=ug(s,r,o,d)),cg(t),f}function cg(t){I.H=jr;var s=Ue!==null&&Ue.next!==null;if(Vn=0,rt=Ue=me=null,bo=!1,Tr=0,ha=null,s)throw Error(a(300));t===null||lt||(t=t.dependencies,t!==null&&uo(t)&&(lt=!0))}function ug(t,s,r,o){me=t;var d=0;do{if(da&&(ha=null),Tr=0,da=!1,25<=d)throw Error(a(301));if(d+=1,rt=Ue=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}I.H=Yg,f=s(r,o)}while(da);return f}function FC(){var t=I.H,s=t.useState()[0];return s=typeof s.then=="function"?Ar(s):s,t=t.useState()[0],(Ue!==null?Ue.memoizedState:null)!==t&&(me.flags|=1024),s}function Sd(){var t=So!==0;return So=0,t}function Ed(t,s,r){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~r}function Cd(t){if(bo){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}bo=!1}Vn=0,rt=Ue=me=null,da=!1,Tr=So=0,ha=null}function Rt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?me.memoizedState=rt=t:rt=rt.next=t,rt}function st(){if(Ue===null){var t=me.alternate;t=t!==null?t.memoizedState:null}else t=Ue.next;var s=rt===null?me.memoizedState:rt.next;if(s!==null)rt=s,Ue=t;else{if(t===null)throw me.alternate===null?Error(a(467)):Error(a(310));Ue=t,t={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},rt===null?me.memoizedState=rt=t:rt=rt.next=t}return rt}function Eo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ar(t){var s=Tr;return Tr+=1,ha===null&&(ha=[]),t=eg(ha,t,s),s=me,(rt===null?s.memoizedState:rt.next)===null&&(s=s.alternate,I.H=s===null||s.memoizedState===null?Fg:Md),t}function Co(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ar(t);if(t.$$typeof===F)return Et(t)}throw Error(a(438,String(t)))}function xd(t){var s=null,r=me.updateQueue;if(r!==null&&(s=r.memoCache),s==null){var o=me.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(s={data:o.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),r===null&&(r=Eo(),me.updateQueue=r),r.memoCache=s,r=s.data[s.index],r===void 0)for(r=s.data[s.index]=Array(t),o=0;o<t;o++)r[o]=B;return s.index++,r}function Gn(t,s){return typeof s=="function"?s(t):s}function xo(t){var s=st();return wd(s,Ue,t)}function wd(t,s,r){var o=t.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=r;var d=t.baseQueue,f=o.pending;if(f!==null){if(d!==null){var y=d.next;d.next=f.next,f.next=y}s.baseQueue=d=f,o.pending=null}if(f=t.baseState,d===null)t.memoizedState=f;else{s=d.next;var S=y=null,x=null,M=s,z=!1;do{var G=M.lane&-536870913;if(G!==M.lane?(Ce&G)===G:(Vn&G)===G){var L=M.revertLane;if(L===0)x!==null&&(x=x.next={lane:0,revertLane:0,gesture:null,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),G===ra&&(z=!0);else if((Vn&L)===L){M=M.next,L===ra&&(z=!0);continue}else G={lane:0,revertLane:M.revertLane,gesture:null,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null},x===null?(S=x=G,y=f):x=x.next=G,me.lanes|=L,ws|=L;G=M.action,vi&&r(f,G),f=M.hasEagerState?M.eagerState:r(f,G)}else L={lane:G,revertLane:M.revertLane,gesture:M.gesture,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null},x===null?(S=x=L,y=f):x=x.next=L,me.lanes|=G,ws|=G;M=M.next}while(M!==null&&M!==s);if(x===null?y=f:x.next=S,!Yt(f,t.memoizedState)&&(lt=!0,z&&(r=la,r!==null)))throw r;t.memoizedState=f,t.baseState=y,t.baseQueue=x,o.lastRenderedState=f}return d===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Nd(t){var s=st(),r=s.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=t;var o=r.dispatch,d=r.pending,f=s.memoizedState;if(d!==null){r.pending=null;var y=d=d.next;do f=t(f,y.action),y=y.next;while(y!==d);Yt(f,s.memoizedState)||(lt=!0),s.memoizedState=f,s.baseQueue===null&&(s.baseState=f),r.lastRenderedState=f}return[f,o]}function dg(t,s,r){var o=me,d=st(),f=we;if(f){if(r===void 0)throw Error(a(407));r=r()}else r=s();var y=!Yt((Ue||d).memoizedState,r);if(y&&(d.memoizedState=r,lt=!0),d=d.queue,Rd(mg.bind(null,o,d,t),[t]),d.getSnapshot!==s||y||rt!==null&&rt.memoizedState.tag&1){if(o.flags|=2048,fa(9,{destroy:void 0},fg.bind(null,o,d,r,s),null),He===null)throw Error(a(349));f||(Vn&127)!==0||hg(o,s,r)}return r}function hg(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=me.updateQueue,s===null?(s=Eo(),me.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function fg(t,s,r,o){s.value=r,s.getSnapshot=o,pg(s)&&gg(t)}function mg(t,s,r){return r(function(){pg(s)&&gg(t)})}function pg(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!Yt(t,r)}catch{return!0}}function gg(t){var s=ci(t,2);s!==null&&Pt(s,t,2)}function Td(t){var s=Rt();if(typeof t=="function"){var r=t;if(t=r(),vi){ds(!0);try{r()}finally{ds(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gn,lastRenderedState:t},s}function yg(t,s,r,o){return t.baseState=r,wd(t,Ue,typeof o=="function"?o:Gn)}function YC(t,s,r,o,d){if(To(t))throw Error(a(485));if(t=s.action,t!==null){var f={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){f.listeners.push(y)}};I.T!==null?r(!0):f.isTransition=!1,o(f),r=s.pending,r===null?(f.next=s.pending=f,vg(s,f)):(f.next=r.next,s.pending=r.next=f)}}function vg(t,s){var r=s.action,o=s.payload,d=t.state;if(s.isTransition){var f=I.T,y={};I.T=y;try{var S=r(d,o),x=I.S;x!==null&&x(y,S),_g(t,s,S)}catch(M){Ad(t,s,M)}finally{f!==null&&y.types!==null&&(f.types=y.types),I.T=f}}else try{f=r(d,o),_g(t,s,f)}catch(M){Ad(t,s,M)}}function _g(t,s,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){bg(t,s,o)},function(o){return Ad(t,s,o)}):bg(t,s,r)}function bg(t,s,r){s.status="fulfilled",s.value=r,Sg(s),t.state=r,s=t.pending,s!==null&&(r=s.next,r===s?t.pending=null:(r=r.next,s.next=r,vg(t,r)))}function Ad(t,s,r){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do s.status="rejected",s.reason=r,Sg(s),s=s.next;while(s!==o)}t.action=null}function Sg(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function Eg(t,s){return s}function Cg(t,s){if(we){var r=He.formState;if(r!==null){e:{var o=me;if(we){if(Ge){t:{for(var d=Ge,f=on;d.nodeType!==8;){if(!f){d=null;break t}if(d=un(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){Ge=un(d.nextSibling),o=d.data==="F!";break e}}gs(o)}o=!1}o&&(s=r[0])}}return r=Rt(),r.memoizedState=r.baseState=s,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eg,lastRenderedState:s},r.queue=o,r=qg.bind(null,me,o),o.dispatch=r,o=Td(!1),f=kd.bind(null,me,!1,o.queue),o=Rt(),d={state:s,dispatch:null,action:t,pending:null},o.queue=d,r=YC.bind(null,me,d,f,r),d.dispatch=r,o.memoizedState=t,[s,r,!1]}function xg(t){var s=st();return wg(s,Ue,t)}function wg(t,s,r){if(s=wd(t,s,Eg)[0],t=xo(Gn)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var o=Ar(s)}catch(y){throw y===oa?mo:y}else o=s;s=st();var d=s.queue,f=d.dispatch;return r!==s.memoizedState&&(me.flags|=2048,fa(9,{destroy:void 0},QC.bind(null,d,r),null)),[o,f,t]}function QC(t,s){t.action=s}function Ng(t){var s=st(),r=Ue;if(r!==null)return wg(s,r,t);st(),s=s.memoizedState,r=st();var o=r.queue.dispatch;return r.memoizedState=t,[s,o,!1]}function fa(t,s,r,o){return t={tag:t,create:r,deps:o,inst:s,next:null},s=me.updateQueue,s===null&&(s=Eo(),me.updateQueue=s),r=s.lastEffect,r===null?s.lastEffect=t.next=t:(o=r.next,r.next=t,t.next=o,s.lastEffect=t),t}function Tg(){return st().memoizedState}function wo(t,s,r,o){var d=Rt();me.flags|=t,d.memoizedState=fa(1|s,{destroy:void 0},r,o===void 0?null:o)}function No(t,s,r,o){var d=st();o=o===void 0?null:o;var f=d.memoizedState.inst;Ue!==null&&o!==null&&_d(o,Ue.memoizedState.deps)?d.memoizedState=fa(s,f,r,o):(me.flags|=t,d.memoizedState=fa(1|s,f,r,o))}function Ag(t,s){wo(8390656,8,t,s)}function Rd(t,s){No(2048,8,t,s)}function KC(t){me.flags|=4;var s=me.updateQueue;if(s===null)s=Eo(),me.updateQueue=s,s.events=[t];else{var r=s.events;r===null?s.events=[t]:r.push(t)}}function Rg(t){var s=st().memoizedState;return KC({ref:s,nextImpl:t}),function(){if((je&2)!==0)throw Error(a(440));return s.impl.apply(void 0,arguments)}}function jg(t,s){return No(4,2,t,s)}function Og(t,s){return No(4,4,t,s)}function Ig(t,s){if(typeof s=="function"){t=t();var r=s(t);return function(){typeof r=="function"?r():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Dg(t,s,r){r=r!=null?r.concat([t]):null,No(4,4,Ig.bind(null,s,t),r)}function jd(){}function kg(t,s){var r=st();s=s===void 0?null:s;var o=r.memoizedState;return s!==null&&_d(s,o[1])?o[0]:(r.memoizedState=[t,s],t)}function Mg(t,s){var r=st();s=s===void 0?null:s;var o=r.memoizedState;if(s!==null&&_d(s,o[1]))return o[0];if(o=t(),vi){ds(!0);try{t()}finally{ds(!1)}}return r.memoizedState=[o,s],o}function Od(t,s,r){return r===void 0||(Vn&1073741824)!==0&&(Ce&261930)===0?t.memoizedState=s:(t.memoizedState=r,t=Ly(),me.lanes|=t,ws|=t,r)}function Lg(t,s,r,o){return Yt(r,s)?r:ua.current!==null?(t=Od(t,r,o),Yt(t,s)||(lt=!0),t):(Vn&42)===0||(Vn&1073741824)!==0&&(Ce&261930)===0?(lt=!0,t.memoizedState=r):(t=Ly(),me.lanes|=t,ws|=t,s)}function Ug(t,s,r,o,d){var f=V.p;V.p=f!==0&&8>f?f:8;var y=I.T,S={};I.T=S,kd(t,!1,s,r);try{var x=d(),M=I.S;if(M!==null&&M(S,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var z=VC(x,o);Rr(t,s,z,Zt(t))}else Rr(t,s,o,Zt(t))}catch(G){Rr(t,s,{then:function(){},status:"rejected",reason:G},Zt())}finally{V.p=f,y!==null&&S.types!==null&&(y.types=S.types),I.T=y}}function WC(){}function Id(t,s,r,o){if(t.tag!==5)throw Error(a(476));var d=zg(t).queue;Ug(t,d,s,Z,r===null?WC:function(){return Pg(t),r(o)})}function zg(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gn,lastRenderedState:Z},next:null};var r={};return s.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gn,lastRenderedState:r},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function Pg(t){var s=zg(t);s.next===null&&(s=t.alternate.memoizedState),Rr(t,s.next.queue,{},Zt())}function Dd(){return Et(Yr)}function Bg(){return st().memoizedState}function Hg(){return st().memoizedState}function $C(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var r=Zt();t=_s(r);var o=bs(s,t,r);o!==null&&(Pt(o,s,r),xr(o,s,r)),s={cache:od()},t.payload=s;return}s=s.return}}function XC(t,s,r){var o=Zt();r={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},To(t)?Vg(s,r):(r=Xu(t,s,r,o),r!==null&&(Pt(r,t,o),Gg(r,s,o)))}function qg(t,s,r){var o=Zt();Rr(t,s,r,o)}function Rr(t,s,r,o){var d={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(To(t))Vg(s,d);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=s.lastRenderedReducer,f!==null))try{var y=s.lastRenderedState,S=f(y,r);if(d.hasEagerState=!0,d.eagerState=S,Yt(S,y))return ro(t,s,d,0),He===null&&ao(),!1}catch{}finally{}if(r=Xu(t,s,d,o),r!==null)return Pt(r,t,o),Gg(r,s,o),!0}return!1}function kd(t,s,r,o){if(o={lane:2,revertLane:hh(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},To(t)){if(s)throw Error(a(479))}else s=Xu(t,r,o,2),s!==null&&Pt(s,t,2)}function To(t){var s=t.alternate;return t===me||s!==null&&s===me}function Vg(t,s){da=bo=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function Gg(t,s,r){if((r&4194048)!==0){var o=s.lanes;o&=t.pendingLanes,r|=o,s.lanes=r,Wm(t,r)}}var jr={readContext:Et,use:Co,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useLayoutEffect:Xe,useInsertionEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useSyncExternalStore:Xe,useId:Xe,useHostTransitionStatus:Xe,useFormState:Xe,useActionState:Xe,useOptimistic:Xe,useMemoCache:Xe,useCacheRefresh:Xe};jr.useEffectEvent=Xe;var Fg={readContext:Et,use:Co,useCallback:function(t,s){return Rt().memoizedState=[t,s===void 0?null:s],t},useContext:Et,useEffect:Ag,useImperativeHandle:function(t,s,r){r=r!=null?r.concat([t]):null,wo(4194308,4,Ig.bind(null,s,t),r)},useLayoutEffect:function(t,s){return wo(4194308,4,t,s)},useInsertionEffect:function(t,s){wo(4,2,t,s)},useMemo:function(t,s){var r=Rt();s=s===void 0?null:s;var o=t();if(vi){ds(!0);try{t()}finally{ds(!1)}}return r.memoizedState=[o,s],o},useReducer:function(t,s,r){var o=Rt();if(r!==void 0){var d=r(s);if(vi){ds(!0);try{r(s)}finally{ds(!1)}}}else d=s;return o.memoizedState=o.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},o.queue=t,t=t.dispatch=XC.bind(null,me,t),[o.memoizedState,t]},useRef:function(t){var s=Rt();return t={current:t},s.memoizedState=t},useState:function(t){t=Td(t);var s=t.queue,r=qg.bind(null,me,s);return s.dispatch=r,[t.memoizedState,r]},useDebugValue:jd,useDeferredValue:function(t,s){var r=Rt();return Od(r,t,s)},useTransition:function(){var t=Td(!1);return t=Ug.bind(null,me,t.queue,!0,!1),Rt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,r){var o=me,d=Rt();if(we){if(r===void 0)throw Error(a(407));r=r()}else{if(r=s(),He===null)throw Error(a(349));(Ce&127)!==0||hg(o,s,r)}d.memoizedState=r;var f={value:r,getSnapshot:s};return d.queue=f,Ag(mg.bind(null,o,f,t),[t]),o.flags|=2048,fa(9,{destroy:void 0},fg.bind(null,o,f,r,s),null),r},useId:function(){var t=Rt(),s=He.identifierPrefix;if(we){var r=Rn,o=An;r=(o&~(1<<32-Ft(o)-1)).toString(32)+r,s="_"+s+"R_"+r,r=So++,0<r&&(s+="H"+r.toString(32)),s+="_"}else r=GC++,s="_"+s+"r_"+r.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Dd,useFormState:Cg,useActionState:Cg,useOptimistic:function(t){var s=Rt();s.memoizedState=s.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=r,s=kd.bind(null,me,!0,r),r.dispatch=s,[t,s]},useMemoCache:xd,useCacheRefresh:function(){return Rt().memoizedState=$C.bind(null,me)},useEffectEvent:function(t){var s=Rt(),r={impl:t};return s.memoizedState=r,function(){if((je&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}},Md={readContext:Et,use:Co,useCallback:kg,useContext:Et,useEffect:Rd,useImperativeHandle:Dg,useInsertionEffect:jg,useLayoutEffect:Og,useMemo:Mg,useReducer:xo,useRef:Tg,useState:function(){return xo(Gn)},useDebugValue:jd,useDeferredValue:function(t,s){var r=st();return Lg(r,Ue.memoizedState,t,s)},useTransition:function(){var t=xo(Gn)[0],s=st().memoizedState;return[typeof t=="boolean"?t:Ar(t),s]},useSyncExternalStore:dg,useId:Bg,useHostTransitionStatus:Dd,useFormState:xg,useActionState:xg,useOptimistic:function(t,s){var r=st();return yg(r,Ue,t,s)},useMemoCache:xd,useCacheRefresh:Hg};Md.useEffectEvent=Rg;var Yg={readContext:Et,use:Co,useCallback:kg,useContext:Et,useEffect:Rd,useImperativeHandle:Dg,useInsertionEffect:jg,useLayoutEffect:Og,useMemo:Mg,useReducer:Nd,useRef:Tg,useState:function(){return Nd(Gn)},useDebugValue:jd,useDeferredValue:function(t,s){var r=st();return Ue===null?Od(r,t,s):Lg(r,Ue.memoizedState,t,s)},useTransition:function(){var t=Nd(Gn)[0],s=st().memoizedState;return[typeof t=="boolean"?t:Ar(t),s]},useSyncExternalStore:dg,useId:Bg,useHostTransitionStatus:Dd,useFormState:Ng,useActionState:Ng,useOptimistic:function(t,s){var r=st();return Ue!==null?yg(r,Ue,t,s):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:xd,useCacheRefresh:Hg};Yg.useEffectEvent=Rg;function Ld(t,s,r,o){s=t.memoizedState,r=r(o,s),r=r==null?s:_({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ud={enqueueSetState:function(t,s,r){t=t._reactInternals;var o=Zt(),d=_s(o);d.payload=s,r!=null&&(d.callback=r),s=bs(t,d,o),s!==null&&(Pt(s,t,o),xr(s,t,o))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var o=Zt(),d=_s(o);d.tag=1,d.payload=s,r!=null&&(d.callback=r),s=bs(t,d,o),s!==null&&(Pt(s,t,o),xr(s,t,o))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=Zt(),o=_s(r);o.tag=2,s!=null&&(o.callback=s),s=bs(t,o,r),s!==null&&(Pt(s,t,r),xr(s,t,r))}};function Qg(t,s,r,o,d,f,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,f,y):s.prototype&&s.prototype.isPureReactComponent?!gr(r,o)||!gr(d,f):!0}function Kg(t,s,r,o){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,o),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,o),s.state!==t&&Ud.enqueueReplaceState(s,s.state,null)}function _i(t,s){var r=s;if("ref"in s){r={};for(var o in s)o!=="ref"&&(r[o]=s[o])}if(t=t.defaultProps){r===s&&(r=_({},r));for(var d in t)r[d]===void 0&&(r[d]=t[d])}return r}function Wg(t){io(t)}function $g(t){console.error(t)}function Xg(t){io(t)}function Ao(t,s){try{var r=t.onUncaughtError;r(s.value,{componentStack:s.stack})}catch(o){setTimeout(function(){throw o})}}function Zg(t,s,r){try{var o=t.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function zd(t,s,r){return r=_s(r),r.tag=3,r.payload={element:null},r.callback=function(){Ao(t,s)},r}function Jg(t){return t=_s(t),t.tag=3,t}function ey(t,s,r,o){var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var f=o.value;t.payload=function(){return d(f)},t.callback=function(){Zg(s,r,o)}}var y=r.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(t.callback=function(){Zg(s,r,o),typeof d!="function"&&(Ns===null?Ns=new Set([this]):Ns.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})})}function ZC(t,s,r,o,d){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(s=r.alternate,s!==null&&aa(s,r,d,!0),r=Kt.current,r!==null){switch(r.tag){case 31:case 13:return cn===null?Bo():r.alternate===null&&Ze===0&&(Ze=3),r.flags&=-257,r.flags|=65536,r.lanes=d,o===po?r.flags|=16384:(s=r.updateQueue,s===null?r.updateQueue=new Set([o]):s.add(o),ch(t,o,d)),!1;case 22:return r.flags|=65536,o===po?r.flags|=16384:(s=r.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=s):(r=s.retryQueue,r===null?s.retryQueue=new Set([o]):r.add(o)),ch(t,o,d)),!1}throw Error(a(435,r.tag))}return ch(t,o,d),Bo(),!1}if(we)return s=Kt.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,o!==sd&&(t=Error(a(422),{cause:o}),_r(an(t,r)))):(o!==sd&&(s=Error(a(423),{cause:o}),_r(an(s,r))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,o=an(o,r),d=zd(t.stateNode,o,d),md(t,d),Ze!==4&&(Ze=2)),!1;var f=Error(a(520),{cause:o});if(f=an(f,r),zr===null?zr=[f]:zr.push(f),Ze!==4&&(Ze=2),s===null)return!0;o=an(o,r),r=s;do{switch(r.tag){case 3:return r.flags|=65536,t=d&-d,r.lanes|=t,t=zd(r.stateNode,o,t),md(r,t),!1;case 1:if(s=r.type,f=r.stateNode,(r.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Ns===null||!Ns.has(f))))return r.flags|=65536,d&=-d,r.lanes|=d,d=Jg(d),ey(d,t,r,o),md(r,d),!1}r=r.return}while(r!==null);return!1}var Pd=Error(a(461)),lt=!1;function Ct(t,s,r,o){s.child=t===null?ig(s,null,r,o):yi(s,t.child,r,o)}function ty(t,s,r,o,d){r=r.render;var f=s.ref;if("ref"in o){var y={};for(var S in o)S!=="ref"&&(y[S]=o[S])}else y=o;return fi(s),o=bd(t,s,r,y,f,d),S=Sd(),t!==null&&!lt?(Ed(t,s,d),Fn(t,s,d)):(we&&S&&td(s),s.flags|=1,Ct(t,s,o,d),s.child)}function ny(t,s,r,o,d){if(t===null){var f=r.type;return typeof f=="function"&&!Zu(f)&&f.defaultProps===void 0&&r.compare===null?(s.tag=15,s.type=f,sy(t,s,f,o,d)):(t=oo(r.type,null,o,s,s.mode,d),t.ref=s.ref,t.return=s,s.child=t)}if(f=t.child,!Qd(t,d)){var y=f.memoizedProps;if(r=r.compare,r=r!==null?r:gr,r(y,o)&&t.ref===s.ref)return Fn(t,s,d)}return s.flags|=1,t=Pn(f,o),t.ref=s.ref,t.return=s,s.child=t}function sy(t,s,r,o,d){if(t!==null){var f=t.memoizedProps;if(gr(f,o)&&t.ref===s.ref)if(lt=!1,s.pendingProps=o=f,Qd(t,d))(t.flags&131072)!==0&&(lt=!0);else return s.lanes=t.lanes,Fn(t,s,d)}return Bd(t,s,r,o,d)}function iy(t,s,r,o){var d=o.children,f=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((s.flags&128)!==0){if(f=f!==null?f.baseLanes|r:r,t!==null){for(o=s.child=t.child,d=0;o!==null;)d=d|o.lanes|o.childLanes,o=o.sibling;o=d&~f}else o=0,s.child=null;return ay(t,s,f,r,o)}if((r&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&fo(s,f!==null?f.cachePool:null),f!==null?lg(s,f):gd(),og(s);else return o=s.lanes=536870912,ay(t,s,f!==null?f.baseLanes|r:r,r,o)}else f!==null?(fo(s,f.cachePool),lg(s,f),Es(),s.memoizedState=null):(t!==null&&fo(s,null),gd(),Es());return Ct(t,s,d,r),s.child}function Or(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function ay(t,s,r,o,d){var f=ud();return f=f===null?null:{parent:at._currentValue,pool:f},s.memoizedState={baseLanes:r,cachePool:f},t!==null&&fo(s,null),gd(),og(s),t!==null&&aa(t,s,o,!0),s.childLanes=d,null}function Ro(t,s){return s=Oo({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function ry(t,s,r){return yi(s,t.child,null,r),t=Ro(s,s.pendingProps),t.flags|=2,Wt(s),s.memoizedState=null,t}function JC(t,s,r){var o=s.pendingProps,d=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(we){if(o.mode==="hidden")return t=Ro(s,o),s.lanes=536870912,Or(null,t);if(vd(s),(t=Ge)?(t=vv(t,on),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:ms!==null?{id:An,overflow:Rn}:null,retryLane:536870912,hydrationErrors:null},r=Vp(t),r.return=s,s.child=r,St=s,Ge=null)):t=null,t===null)throw gs(s);return s.lanes=536870912,null}return Ro(s,o)}var f=t.memoizedState;if(f!==null){var y=f.dehydrated;if(vd(s),d)if(s.flags&256)s.flags&=-257,s=ry(t,s,r);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(a(558));else if(lt||aa(t,s,r,!1),d=(r&t.childLanes)!==0,lt||d){if(o=He,o!==null&&(y=$m(o,r),y!==0&&y!==f.retryLane))throw f.retryLane=y,ci(t,y),Pt(o,t,y),Pd;Bo(),s=ry(t,s,r)}else t=f.treeContext,Ge=un(y.nextSibling),St=s,we=!0,ps=null,on=!1,t!==null&&Yp(s,t),s=Ro(s,o),s.flags|=4096;return s}return t=Pn(t.child,{mode:o.mode,children:o.children}),t.ref=s.ref,s.child=t,t.return=s,t}function jo(t,s){var r=s.ref;if(r===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(a(284));(t===null||t.ref!==r)&&(s.flags|=4194816)}}function Bd(t,s,r,o,d){return fi(s),r=bd(t,s,r,o,void 0,d),o=Sd(),t!==null&&!lt?(Ed(t,s,d),Fn(t,s,d)):(we&&o&&td(s),s.flags|=1,Ct(t,s,r,d),s.child)}function ly(t,s,r,o,d,f){return fi(s),s.updateQueue=null,r=ug(s,o,r,d),cg(t),o=Sd(),t!==null&&!lt?(Ed(t,s,f),Fn(t,s,f)):(we&&o&&td(s),s.flags|=1,Ct(t,s,r,f),s.child)}function oy(t,s,r,o,d){if(fi(s),s.stateNode===null){var f=ta,y=r.contextType;typeof y=="object"&&y!==null&&(f=Et(y)),f=new r(o,f),s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Ud,s.stateNode=f,f._reactInternals=s,f=s.stateNode,f.props=o,f.state=s.memoizedState,f.refs={},hd(s),y=r.contextType,f.context=typeof y=="object"&&y!==null?Et(y):ta,f.state=s.memoizedState,y=r.getDerivedStateFromProps,typeof y=="function"&&(Ld(s,r,y,o),f.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(y=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),y!==f.state&&Ud.enqueueReplaceState(f,f.state,null),Nr(s,o,f,d),wr(),f.state=s.memoizedState),typeof f.componentDidMount=="function"&&(s.flags|=4194308),o=!0}else if(t===null){f=s.stateNode;var S=s.memoizedProps,x=_i(r,S);f.props=x;var M=f.context,z=r.contextType;y=ta,typeof z=="object"&&z!==null&&(y=Et(z));var G=r.getDerivedStateFromProps;z=typeof G=="function"||typeof f.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,z||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(S||M!==y)&&Kg(s,f,o,y),vs=!1;var L=s.memoizedState;f.state=L,Nr(s,o,f,d),wr(),M=s.memoizedState,S||L!==M||vs?(typeof G=="function"&&(Ld(s,r,G,o),M=s.memoizedState),(x=vs||Qg(s,r,x,o,L,M,y))?(z||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(s.flags|=4194308)):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=o,s.memoizedState=M),f.props=o,f.state=M,f.context=y,o=x):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),o=!1)}else{f=s.stateNode,fd(t,s),y=s.memoizedProps,z=_i(r,y),f.props=z,G=s.pendingProps,L=f.context,M=r.contextType,x=ta,typeof M=="object"&&M!==null&&(x=Et(M)),S=r.getDerivedStateFromProps,(M=typeof S=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y!==G||L!==x)&&Kg(s,f,o,x),vs=!1,L=s.memoizedState,f.state=L,Nr(s,o,f,d),wr();var U=s.memoizedState;y!==G||L!==U||vs||t!==null&&t.dependencies!==null&&uo(t.dependencies)?(typeof S=="function"&&(Ld(s,r,S,o),U=s.memoizedState),(z=vs||Qg(s,r,z,o,L,U,x)||t!==null&&t.dependencies!==null&&uo(t.dependencies))?(M||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,U,x),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,U,x)),typeof f.componentDidUpdate=="function"&&(s.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof f.componentDidUpdate!="function"||y===t.memoizedProps&&L===t.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&L===t.memoizedState||(s.flags|=1024),s.memoizedProps=o,s.memoizedState=U),f.props=o,f.state=U,f.context=x,o=z):(typeof f.componentDidUpdate!="function"||y===t.memoizedProps&&L===t.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&L===t.memoizedState||(s.flags|=1024),o=!1)}return f=o,jo(t,s),o=(s.flags&128)!==0,f||o?(f=s.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:f.render(),s.flags|=1,t!==null&&o?(s.child=yi(s,t.child,null,d),s.child=yi(s,null,r,d)):Ct(t,s,r,d),s.memoizedState=f.state,t=s.child):t=Fn(t,s,d),t}function cy(t,s,r,o){return di(),s.flags|=256,Ct(t,s,r,o),s.child}var Hd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qd(t){return{baseLanes:t,cachePool:Zp()}}function Vd(t,s,r){return t=t!==null?t.childLanes&~r:0,s&&(t|=Xt),t}function uy(t,s,r){var o=s.pendingProps,d=!1,f=(s.flags&128)!==0,y;if((y=f)||(y=t!==null&&t.memoizedState===null?!1:(nt.current&2)!==0),y&&(d=!0,s.flags&=-129),y=(s.flags&32)!==0,s.flags&=-33,t===null){if(we){if(d?Ss(s):Es(),(t=Ge)?(t=vv(t,on),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:ms!==null?{id:An,overflow:Rn}:null,retryLane:536870912,hydrationErrors:null},r=Vp(t),r.return=s,s.child=r,St=s,Ge=null)):t=null,t===null)throw gs(s);return wh(t)?s.lanes=32:s.lanes=536870912,null}var S=o.children;return o=o.fallback,d?(Es(),d=s.mode,S=Oo({mode:"hidden",children:S},d),o=ui(o,d,r,null),S.return=s,o.return=s,S.sibling=o,s.child=S,o=s.child,o.memoizedState=qd(r),o.childLanes=Vd(t,y,r),s.memoizedState=Hd,Or(null,o)):(Ss(s),Gd(s,S))}var x=t.memoizedState;if(x!==null&&(S=x.dehydrated,S!==null)){if(f)s.flags&256?(Ss(s),s.flags&=-257,s=Fd(t,s,r)):s.memoizedState!==null?(Es(),s.child=t.child,s.flags|=128,s=null):(Es(),S=o.fallback,d=s.mode,o=Oo({mode:"visible",children:o.children},d),S=ui(S,d,r,null),S.flags|=2,o.return=s,S.return=s,o.sibling=S,s.child=o,yi(s,t.child,null,r),o=s.child,o.memoizedState=qd(r),o.childLanes=Vd(t,y,r),s.memoizedState=Hd,s=Or(null,o));else if(Ss(s),wh(S)){if(y=S.nextSibling&&S.nextSibling.dataset,y)var M=y.dgst;y=M,o=Error(a(419)),o.stack="",o.digest=y,_r({value:o,source:null,stack:null}),s=Fd(t,s,r)}else if(lt||aa(t,s,r,!1),y=(r&t.childLanes)!==0,lt||y){if(y=He,y!==null&&(o=$m(y,r),o!==0&&o!==x.retryLane))throw x.retryLane=o,ci(t,o),Pt(y,t,o),Pd;xh(S)||Bo(),s=Fd(t,s,r)}else xh(S)?(s.flags|=192,s.child=t.child,s=null):(t=x.treeContext,Ge=un(S.nextSibling),St=s,we=!0,ps=null,on=!1,t!==null&&Yp(s,t),s=Gd(s,o.children),s.flags|=4096);return s}return d?(Es(),S=o.fallback,d=s.mode,x=t.child,M=x.sibling,o=Pn(x,{mode:"hidden",children:o.children}),o.subtreeFlags=x.subtreeFlags&65011712,M!==null?S=Pn(M,S):(S=ui(S,d,r,null),S.flags|=2),S.return=s,o.return=s,o.sibling=S,s.child=o,Or(null,o),o=s.child,S=t.child.memoizedState,S===null?S=qd(r):(d=S.cachePool,d!==null?(x=at._currentValue,d=d.parent!==x?{parent:x,pool:x}:d):d=Zp(),S={baseLanes:S.baseLanes|r,cachePool:d}),o.memoizedState=S,o.childLanes=Vd(t,y,r),s.memoizedState=Hd,Or(t.child,o)):(Ss(s),r=t.child,t=r.sibling,r=Pn(r,{mode:"visible",children:o.children}),r.return=s,r.sibling=null,t!==null&&(y=s.deletions,y===null?(s.deletions=[t],s.flags|=16):y.push(t)),s.child=r,s.memoizedState=null,r)}function Gd(t,s){return s=Oo({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Oo(t,s){return t=Qt(22,t,null,s),t.lanes=0,t}function Fd(t,s,r){return yi(s,t.child,null,r),t=Gd(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function dy(t,s,r){t.lanes|=s;var o=t.alternate;o!==null&&(o.lanes|=s),rd(t.return,s,r)}function Yd(t,s,r,o,d,f){var y=t.memoizedState;y===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:d,treeForkCount:f}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=o,y.tail=r,y.tailMode=d,y.treeForkCount=f)}function hy(t,s,r){var o=s.pendingProps,d=o.revealOrder,f=o.tail;o=o.children;var y=nt.current,S=(y&2)!==0;if(S?(y=y&1|2,s.flags|=128):y&=1,W(nt,y),Ct(t,s,o,r),o=we?vr:0,!S&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&dy(t,r,s);else if(t.tag===19)dy(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(d){case"forwards":for(r=s.child,d=null;r!==null;)t=r.alternate,t!==null&&_o(t)===null&&(d=r),r=r.sibling;r=d,r===null?(d=s.child,s.child=null):(d=r.sibling,r.sibling=null),Yd(s,!1,d,r,f,o);break;case"backwards":case"unstable_legacy-backwards":for(r=null,d=s.child,s.child=null;d!==null;){if(t=d.alternate,t!==null&&_o(t)===null){s.child=d;break}t=d.sibling,d.sibling=r,r=d,d=t}Yd(s,!0,r,null,f,o);break;case"together":Yd(s,!1,null,null,void 0,o);break;default:s.memoizedState=null}return s.child}function Fn(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),ws|=s.lanes,(r&s.childLanes)===0)if(t!==null){if(aa(t,s,r,!1),(r&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(a(153));if(s.child!==null){for(t=s.child,r=Pn(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=Pn(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function Qd(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&uo(t)))}function ex(t,s,r){switch(s.tag){case 3:At(s,s.stateNode.containerInfo),ys(s,at,t.memoizedState.cache),di();break;case 27:case 5:sr(s);break;case 4:At(s,s.stateNode.containerInfo);break;case 10:ys(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,vd(s),null;break;case 13:var o=s.memoizedState;if(o!==null)return o.dehydrated!==null?(Ss(s),s.flags|=128,null):(r&s.child.childLanes)!==0?uy(t,s,r):(Ss(s),t=Fn(t,s,r),t!==null?t.sibling:null);Ss(s);break;case 19:var d=(t.flags&128)!==0;if(o=(r&s.childLanes)!==0,o||(aa(t,s,r,!1),o=(r&s.childLanes)!==0),d){if(o)return hy(t,s,r);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),W(nt,nt.current),o)break;return null;case 22:return s.lanes=0,iy(t,s,r,s.pendingProps);case 24:ys(s,at,t.memoizedState.cache)}return Fn(t,s,r)}function fy(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps)lt=!0;else{if(!Qd(t,r)&&(s.flags&128)===0)return lt=!1,ex(t,s,r);lt=(t.flags&131072)!==0}else lt=!1,we&&(s.flags&1048576)!==0&&Fp(s,vr,s.index);switch(s.lanes=0,s.tag){case 16:e:{var o=s.pendingProps;if(t=pi(s.elementType),s.type=t,typeof t=="function")Zu(t)?(o=_i(t,o),s.tag=1,s=oy(null,s,t,o,r)):(s.tag=0,s=Bd(null,s,t,o,r));else{if(t!=null){var d=t.$$typeof;if(d===ee){s.tag=11,s=ty(null,s,t,o,r);break e}else if(d===Y){s.tag=14,s=ny(null,s,t,o,r);break e}}throw s=Oe(t)||t,Error(a(306,s,""))}}return s;case 0:return Bd(t,s,s.type,s.pendingProps,r);case 1:return o=s.type,d=_i(o,s.pendingProps),oy(t,s,o,d,r);case 3:e:{if(At(s,s.stateNode.containerInfo),t===null)throw Error(a(387));o=s.pendingProps;var f=s.memoizedState;d=f.element,fd(t,s),Nr(s,o,null,r);var y=s.memoizedState;if(o=y.cache,ys(s,at,o),o!==f.cache&&ld(s,[at],r,!0),wr(),o=y.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:y.cache},s.updateQueue.baseState=f,s.memoizedState=f,s.flags&256){s=cy(t,s,o,r);break e}else if(o!==d){d=an(Error(a(424)),s),_r(d),s=cy(t,s,o,r);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ge=un(t.firstChild),St=s,we=!0,ps=null,on=!0,r=ig(s,null,o,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(di(),o===d){s=Fn(t,s,r);break e}Ct(t,s,o,r)}s=s.child}return s;case 26:return jo(t,s),t===null?(r=xv(s.type,null,s.pendingProps,null))?s.memoizedState=r:we||(r=s.type,t=s.pendingProps,o=Qo(be.current).createElement(r),o[bt]=s,o[Dt]=t,xt(o,r,t),ft(o),s.stateNode=o):s.memoizedState=xv(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return sr(s),t===null&&we&&(o=s.stateNode=Sv(s.type,s.pendingProps,be.current),St=s,on=!0,d=Ge,js(s.type)?(Nh=d,Ge=un(o.firstChild)):Ge=d),Ct(t,s,s.pendingProps.children,r),jo(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&we&&((d=o=Ge)&&(o=jx(o,s.type,s.pendingProps,on),o!==null?(s.stateNode=o,St=s,Ge=un(o.firstChild),on=!1,d=!0):d=!1),d||gs(s)),sr(s),d=s.type,f=s.pendingProps,y=t!==null?t.memoizedProps:null,o=f.children,Sh(d,f)?o=null:y!==null&&Sh(d,y)&&(s.flags|=32),s.memoizedState!==null&&(d=bd(t,s,FC,null,null,r),Yr._currentValue=d),jo(t,s),Ct(t,s,o,r),s.child;case 6:return t===null&&we&&((t=r=Ge)&&(r=Ox(r,s.pendingProps,on),r!==null?(s.stateNode=r,St=s,Ge=null,t=!0):t=!1),t||gs(s)),null;case 13:return uy(t,s,r);case 4:return At(s,s.stateNode.containerInfo),o=s.pendingProps,t===null?s.child=yi(s,null,o,r):Ct(t,s,o,r),s.child;case 11:return ty(t,s,s.type,s.pendingProps,r);case 7:return Ct(t,s,s.pendingProps,r),s.child;case 8:return Ct(t,s,s.pendingProps.children,r),s.child;case 12:return Ct(t,s,s.pendingProps.children,r),s.child;case 10:return o=s.pendingProps,ys(s,s.type,o.value),Ct(t,s,o.children,r),s.child;case 9:return d=s.type._context,o=s.pendingProps.children,fi(s),d=Et(d),o=o(d),s.flags|=1,Ct(t,s,o,r),s.child;case 14:return ny(t,s,s.type,s.pendingProps,r);case 15:return sy(t,s,s.type,s.pendingProps,r);case 19:return hy(t,s,r);case 31:return JC(t,s,r);case 22:return iy(t,s,r,s.pendingProps);case 24:return fi(s),o=Et(at),t===null?(d=ud(),d===null&&(d=He,f=od(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=r),d=f),s.memoizedState={parent:o,cache:d},hd(s),ys(s,at,d)):((t.lanes&r)!==0&&(fd(t,s),Nr(s,null,null,r),wr()),d=t.memoizedState,f=s.memoizedState,d.parent!==o?(d={parent:o,cache:o},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),ys(s,at,o)):(o=f.cache,ys(s,at,o),o!==d.cache&&ld(s,[at],r,!0))),Ct(t,s,s.pendingProps.children,r),s.child;case 29:throw s.pendingProps}throw Error(a(156,s.tag))}function Yn(t){t.flags|=4}function Kd(t,s,r,o,d){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(d&335544128)===d)if(t.stateNode.complete)t.flags|=8192;else if(By())t.flags|=8192;else throw gi=po,dd}else t.flags&=-16777217}function my(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Rv(s))if(By())t.flags|=8192;else throw gi=po,dd}function Io(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Qm():536870912,t.lanes|=s,ya|=s)}function Ir(t,s){if(!we)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Fe(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,o=0;if(s)for(var d=t.child;d!==null;)r|=d.lanes|d.childLanes,o|=d.subtreeFlags&65011712,o|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)r|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=o,t.childLanes=r,s}function tx(t,s,r){var o=s.pendingProps;switch(nd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(s),null;case 1:return Fe(s),null;case 3:return r=s.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),qn(at),tt(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ia(s)?Yn(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,id())),Fe(s),null;case 26:var d=s.type,f=s.memoizedState;return t===null?(Yn(s),f!==null?(Fe(s),my(s,f)):(Fe(s),Kd(s,d,null,o,r))):f?f!==t.memoizedState?(Yn(s),Fe(s),my(s,f)):(Fe(s),s.flags&=-16777217):(t=t.memoizedProps,t!==o&&Yn(s),Fe(s),Kd(s,d,t,o,r)),null;case 27:if(ql(s),r=be.current,d=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==o&&Yn(s);else{if(!o){if(s.stateNode===null)throw Error(a(166));return Fe(s),null}t=ne.current,ia(s)?Qp(s):(t=Sv(d,o,r),s.stateNode=t,Yn(s))}return Fe(s),null;case 5:if(ql(s),d=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==o&&Yn(s);else{if(!o){if(s.stateNode===null)throw Error(a(166));return Fe(s),null}if(f=ne.current,ia(s))Qp(s);else{var y=Qo(be.current);switch(f){case 1:f=y.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:f=y.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":f=y.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":f=y.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":f=y.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof o.is=="string"?y.createElement("select",{is:o.is}):y.createElement("select"),o.multiple?f.multiple=!0:o.size&&(f.size=o.size);break;default:f=typeof o.is=="string"?y.createElement(d,{is:o.is}):y.createElement(d)}}f[bt]=s,f[Dt]=o;e:for(y=s.child;y!==null;){if(y.tag===5||y.tag===6)f.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===s)break e;for(;y.sibling===null;){if(y.return===null||y.return===s)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}s.stateNode=f;e:switch(xt(f,d,o),d){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Yn(s)}}return Fe(s),Kd(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,r),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==o&&Yn(s);else{if(typeof o!="string"&&s.stateNode===null)throw Error(a(166));if(t=be.current,ia(s)){if(t=s.stateNode,r=s.memoizedProps,o=null,d=St,d!==null)switch(d.tag){case 27:case 5:o=d.memoizedProps}t[bt]=s,t=!!(t.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||uv(t.nodeValue,r)),t||gs(s,!0)}else t=Qo(t).createTextNode(o),t[bt]=s,s.stateNode=t}return Fe(s),null;case 31:if(r=s.memoizedState,t===null||t.memoizedState!==null){if(o=ia(s),r!==null){if(t===null){if(!o)throw Error(a(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[bt]=s}else di(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Fe(s),t=!1}else r=id(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return s.flags&256?(Wt(s),s):(Wt(s),null);if((s.flags&128)!==0)throw Error(a(558))}return Fe(s),null;case 13:if(o=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=ia(s),o!==null&&o.dehydrated!==null){if(t===null){if(!d)throw Error(a(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(a(317));d[bt]=s}else di(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Fe(s),d=!1}else d=id(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(Wt(s),s):(Wt(s),null)}return Wt(s),(s.flags&128)!==0?(s.lanes=r,s):(r=o!==null,t=t!==null&&t.memoizedState!==null,r&&(o=s.child,d=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(d=o.alternate.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==d&&(o.flags|=2048)),r!==t&&r&&(s.child.flags|=8192),Io(s,s.updateQueue),Fe(s),null);case 4:return tt(),t===null&&gh(s.stateNode.containerInfo),Fe(s),null;case 10:return qn(s.type),Fe(s),null;case 19:if(P(nt),o=s.memoizedState,o===null)return Fe(s),null;if(d=(s.flags&128)!==0,f=o.rendering,f===null)if(d)Ir(o,!1);else{if(Ze!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(f=_o(t),f!==null){for(s.flags|=128,Ir(o,!1),t=f.updateQueue,s.updateQueue=t,Io(s,t),s.subtreeFlags=0,t=r,r=s.child;r!==null;)qp(r,t),r=r.sibling;return W(nt,nt.current&1|2),we&&Bn(s,o.treeForkCount),s.child}t=t.sibling}o.tail!==null&&Vt()>Uo&&(s.flags|=128,d=!0,Ir(o,!1),s.lanes=4194304)}else{if(!d)if(t=_o(f),t!==null){if(s.flags|=128,d=!0,t=t.updateQueue,s.updateQueue=t,Io(s,t),Ir(o,!0),o.tail===null&&o.tailMode==="hidden"&&!f.alternate&&!we)return Fe(s),null}else 2*Vt()-o.renderingStartTime>Uo&&r!==536870912&&(s.flags|=128,d=!0,Ir(o,!1),s.lanes=4194304);o.isBackwards?(f.sibling=s.child,s.child=f):(t=o.last,t!==null?t.sibling=f:s.child=f,o.last=f)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Vt(),t.sibling=null,r=nt.current,W(nt,d?r&1|2:r&1),we&&Bn(s,o.treeForkCount),t):(Fe(s),null);case 22:case 23:return Wt(s),yd(),o=s.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(s.flags|=8192):o&&(s.flags|=8192),o?(r&536870912)!==0&&(s.flags&128)===0&&(Fe(s),s.subtreeFlags&6&&(s.flags|=8192)):Fe(s),r=s.updateQueue,r!==null&&Io(s,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==r&&(s.flags|=2048),t!==null&&P(mi),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),qn(at),Fe(s),null;case 25:return null;case 30:return null}throw Error(a(156,s.tag))}function nx(t,s){switch(nd(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return qn(at),tt(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return ql(s),null;case 31:if(s.memoizedState!==null){if(Wt(s),s.alternate===null)throw Error(a(340));di()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(Wt(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(a(340));di()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return P(nt),null;case 4:return tt(),null;case 10:return qn(s.type),null;case 22:case 23:return Wt(s),yd(),t!==null&&P(mi),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return qn(at),null;case 25:return null;default:return null}}function py(t,s){switch(nd(s),s.tag){case 3:qn(at),tt();break;case 26:case 27:case 5:ql(s);break;case 4:tt();break;case 31:s.memoizedState!==null&&Wt(s);break;case 13:Wt(s);break;case 19:P(nt);break;case 10:qn(s.type);break;case 22:case 23:Wt(s),yd(),t!==null&&P(mi);break;case 24:qn(at)}}function Dr(t,s){try{var r=s.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var d=o.next;r=d;do{if((r.tag&t)===t){o=void 0;var f=r.create,y=r.inst;o=f(),y.destroy=o}r=r.next}while(r!==d)}}catch(S){Le(s,s.return,S)}}function Cs(t,s,r){try{var o=s.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var f=d.next;o=f;do{if((o.tag&t)===t){var y=o.inst,S=y.destroy;if(S!==void 0){y.destroy=void 0,d=s;var x=r,M=S;try{M()}catch(z){Le(d,x,z)}}}o=o.next}while(o!==f)}}catch(z){Le(s,s.return,z)}}function gy(t){var s=t.updateQueue;if(s!==null){var r=t.stateNode;try{rg(s,r)}catch(o){Le(t,t.return,o)}}}function yy(t,s,r){r.props=_i(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(o){Le(t,s,o)}}function kr(t,s){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof r=="function"?t.refCleanup=r(o):r.current=o}}catch(d){Le(t,s,d)}}function jn(t,s){var r=t.ref,o=t.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(d){Le(t,s,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(d){Le(t,s,d)}else r.current=null}function vy(t){var s=t.type,r=t.memoizedProps,o=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break e;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(d){Le(t,t.return,d)}}function Wd(t,s,r){try{var o=t.stateNode;xx(o,t.type,r,s),o[Dt]=s}catch(d){Le(t,t.return,d)}}function _y(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&js(t.type)||t.tag===4}function $d(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_y(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&js(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xd(t,s,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,s?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,s):(s=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.appendChild(t),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=Un));else if(o!==4&&(o===27&&js(t.type)&&(r=t.stateNode,s=null),t=t.child,t!==null))for(Xd(t,s,r),t=t.sibling;t!==null;)Xd(t,s,r),t=t.sibling}function Do(t,s,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(o!==4&&(o===27&&js(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(Do(t,s,r),t=t.sibling;t!==null;)Do(t,s,r),t=t.sibling}function by(t){var s=t.stateNode,r=t.memoizedProps;try{for(var o=t.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);xt(s,o,r),s[bt]=t,s[Dt]=r}catch(f){Le(t,t.return,f)}}var Qn=!1,ot=!1,Zd=!1,Sy=typeof WeakSet=="function"?WeakSet:Set,mt=null;function sx(t,s){if(t=t.containerInfo,_h=ec,t=Dp(t),Fu(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var d=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break e}var y=0,S=-1,x=-1,M=0,z=0,G=t,L=null;t:for(;;){for(var U;G!==r||d!==0&&G.nodeType!==3||(S=y+d),G!==f||o!==0&&G.nodeType!==3||(x=y+o),G.nodeType===3&&(y+=G.nodeValue.length),(U=G.firstChild)!==null;)L=G,G=U;for(;;){if(G===t)break t;if(L===r&&++M===d&&(S=y),L===f&&++z===o&&(x=y),(U=G.nextSibling)!==null)break;G=L,L=G.parentNode}G=U}r=S===-1||x===-1?null:{start:S,end:x}}else r=null}r=r||{start:0,end:0}}else r=null;for(bh={focusedElem:t,selectionRange:r},ec=!1,mt=s;mt!==null;)if(s=mt,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,mt=t;else for(;mt!==null;){switch(s=mt,f=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)d=t[r],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,r=s,d=f.memoizedProps,f=f.memoizedState,o=r.stateNode;try{var J=_i(r.type,d);t=o.getSnapshotBeforeUpdate(J,f),o.__reactInternalSnapshotBeforeUpdate=t}catch(ce){Le(r,r.return,ce)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,r=t.nodeType,r===9)Ch(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Ch(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=s.sibling,t!==null){t.return=s.return,mt=t;break}mt=s.return}}function Ey(t,s,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:Wn(t,r),o&4&&Dr(5,r);break;case 1:if(Wn(t,r),o&4)if(t=r.stateNode,s===null)try{t.componentDidMount()}catch(y){Le(r,r.return,y)}else{var d=_i(r.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(d,s,t.__reactInternalSnapshotBeforeUpdate)}catch(y){Le(r,r.return,y)}}o&64&&gy(r),o&512&&kr(r,r.return);break;case 3:if(Wn(t,r),o&64&&(t=r.updateQueue,t!==null)){if(s=null,r.child!==null)switch(r.child.tag){case 27:case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}try{rg(t,s)}catch(y){Le(r,r.return,y)}}break;case 27:s===null&&o&4&&by(r);case 26:case 5:Wn(t,r),s===null&&o&4&&vy(r),o&512&&kr(r,r.return);break;case 12:Wn(t,r);break;case 31:Wn(t,r),o&4&&wy(t,r);break;case 13:Wn(t,r),o&4&&Ny(t,r),o&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=hx.bind(null,r),Ix(t,r))));break;case 22:if(o=r.memoizedState!==null||Qn,!o){s=s!==null&&s.memoizedState!==null||ot,d=Qn;var f=ot;Qn=o,(ot=s)&&!f?$n(t,r,(r.subtreeFlags&8772)!==0):Wn(t,r),Qn=d,ot=f}break;case 30:break;default:Wn(t,r)}}function Cy(t){var s=t.alternate;s!==null&&(t.alternate=null,Cy(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Au(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ye=null,Mt=!1;function Kn(t,s,r){for(r=r.child;r!==null;)xy(t,s,r),r=r.sibling}function xy(t,s,r){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(ir,r)}catch{}switch(r.tag){case 26:ot||jn(r,s),Kn(t,s,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:ot||jn(r,s);var o=Ye,d=Mt;js(r.type)&&(Ye=r.stateNode,Mt=!1),Kn(t,s,r),Vr(r.stateNode),Ye=o,Mt=d;break;case 5:ot||jn(r,s);case 6:if(o=Ye,d=Mt,Ye=null,Kn(t,s,r),Ye=o,Mt=d,Ye!==null)if(Mt)try{(Ye.nodeType===9?Ye.body:Ye.nodeName==="HTML"?Ye.ownerDocument.body:Ye).removeChild(r.stateNode)}catch(f){Le(r,s,f)}else try{Ye.removeChild(r.stateNode)}catch(f){Le(r,s,f)}break;case 18:Ye!==null&&(Mt?(t=Ye,gv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),wa(t)):gv(Ye,r.stateNode));break;case 4:o=Ye,d=Mt,Ye=r.stateNode.containerInfo,Mt=!0,Kn(t,s,r),Ye=o,Mt=d;break;case 0:case 11:case 14:case 15:Cs(2,r,s),ot||Cs(4,r,s),Kn(t,s,r);break;case 1:ot||(jn(r,s),o=r.stateNode,typeof o.componentWillUnmount=="function"&&yy(r,s,o)),Kn(t,s,r);break;case 21:Kn(t,s,r);break;case 22:ot=(o=ot)||r.memoizedState!==null,Kn(t,s,r),ot=o;break;default:Kn(t,s,r)}}function wy(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{wa(t)}catch(r){Le(s,s.return,r)}}}function Ny(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{wa(t)}catch(r){Le(s,s.return,r)}}function ix(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new Sy),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new Sy),s;default:throw Error(a(435,t.tag))}}function ko(t,s){var r=ix(t);s.forEach(function(o){if(!r.has(o)){r.add(o);var d=fx.bind(null,t,o);o.then(d,d)}})}function Lt(t,s){var r=s.deletions;if(r!==null)for(var o=0;o<r.length;o++){var d=r[o],f=t,y=s,S=y;e:for(;S!==null;){switch(S.tag){case 27:if(js(S.type)){Ye=S.stateNode,Mt=!1;break e}break;case 5:Ye=S.stateNode,Mt=!1;break e;case 3:case 4:Ye=S.stateNode.containerInfo,Mt=!0;break e}S=S.return}if(Ye===null)throw Error(a(160));xy(f,y,d),Ye=null,Mt=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Ty(s,t),s=s.sibling}var _n=null;function Ty(t,s){var r=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Lt(s,t),Ut(t),o&4&&(Cs(3,t,t.return),Dr(3,t),Cs(5,t,t.return));break;case 1:Lt(s,t),Ut(t),o&512&&(ot||r===null||jn(r,r.return)),o&64&&Qn&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var d=_n;if(Lt(s,t),Ut(t),o&512&&(ot||r===null||jn(r,r.return)),o&4){var f=r!==null?r.memoizedState:null;if(o=t.memoizedState,r===null)if(o===null)if(t.stateNode===null){e:{o=t.type,r=t.memoizedProps,d=d.ownerDocument||d;t:switch(o){case"title":f=d.getElementsByTagName("title")[0],(!f||f[lr]||f[bt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(o),d.head.insertBefore(f,d.querySelector("head > title"))),xt(f,o,r),f[bt]=t,ft(f),o=f;break e;case"link":var y=Tv("link","href",d).get(o+(r.href||""));if(y){for(var S=0;S<y.length;S++)if(f=y[S],f.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&f.getAttribute("rel")===(r.rel==null?null:r.rel)&&f.getAttribute("title")===(r.title==null?null:r.title)&&f.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){y.splice(S,1);break t}}f=d.createElement(o),xt(f,o,r),d.head.appendChild(f);break;case"meta":if(y=Tv("meta","content",d).get(o+(r.content||""))){for(S=0;S<y.length;S++)if(f=y[S],f.getAttribute("content")===(r.content==null?null:""+r.content)&&f.getAttribute("name")===(r.name==null?null:r.name)&&f.getAttribute("property")===(r.property==null?null:r.property)&&f.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&f.getAttribute("charset")===(r.charSet==null?null:r.charSet)){y.splice(S,1);break t}}f=d.createElement(o),xt(f,o,r),d.head.appendChild(f);break;default:throw Error(a(468,o))}f[bt]=t,ft(f),o=f}t.stateNode=o}else Av(d,t.type,t.stateNode);else t.stateNode=Nv(d,o,t.memoizedProps);else f!==o?(f===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):f.count--,o===null?Av(d,t.type,t.stateNode):Nv(d,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Wd(t,t.memoizedProps,r.memoizedProps)}break;case 27:Lt(s,t),Ut(t),o&512&&(ot||r===null||jn(r,r.return)),r!==null&&o&4&&Wd(t,t.memoizedProps,r.memoizedProps);break;case 5:if(Lt(s,t),Ut(t),o&512&&(ot||r===null||jn(r,r.return)),t.flags&32){d=t.stateNode;try{Ki(d,"")}catch(J){Le(t,t.return,J)}}o&4&&t.stateNode!=null&&(d=t.memoizedProps,Wd(t,d,r!==null?r.memoizedProps:d)),o&1024&&(Zd=!0);break;case 6:if(Lt(s,t),Ut(t),o&4){if(t.stateNode===null)throw Error(a(162));o=t.memoizedProps,r=t.stateNode;try{r.nodeValue=o}catch(J){Le(t,t.return,J)}}break;case 3:if($o=null,d=_n,_n=Ko(s.containerInfo),Lt(s,t),_n=d,Ut(t),o&4&&r!==null&&r.memoizedState.isDehydrated)try{wa(s.containerInfo)}catch(J){Le(t,t.return,J)}Zd&&(Zd=!1,Ay(t));break;case 4:o=_n,_n=Ko(t.stateNode.containerInfo),Lt(s,t),Ut(t),_n=o;break;case 12:Lt(s,t),Ut(t);break;case 31:Lt(s,t),Ut(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ko(t,o)));break;case 13:Lt(s,t),Ut(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Lo=Vt()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ko(t,o)));break;case 22:d=t.memoizedState!==null;var x=r!==null&&r.memoizedState!==null,M=Qn,z=ot;if(Qn=M||d,ot=z||x,Lt(s,t),ot=z,Qn=M,Ut(t),o&8192)e:for(s=t.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(r===null||x||Qn||ot||bi(t)),r=null,s=t;;){if(s.tag===5||s.tag===26){if(r===null){x=r=s;try{if(f=x.stateNode,d)y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{S=x.stateNode;var G=x.memoizedProps.style,L=G!=null&&G.hasOwnProperty("display")?G.display:null;S.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(J){Le(x,x.return,J)}}}else if(s.tag===6){if(r===null){x=s;try{x.stateNode.nodeValue=d?"":x.memoizedProps}catch(J){Le(x,x.return,J)}}}else if(s.tag===18){if(r===null){x=s;try{var U=x.stateNode;d?yv(U,!0):yv(x.stateNode,!1)}catch(J){Le(x,x.return,J)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;r===s&&(r=null),s=s.return}r===s&&(r=null),s.sibling.return=s.return,s=s.sibling}o&4&&(o=t.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,ko(t,r))));break;case 19:Lt(s,t),Ut(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ko(t,o)));break;case 30:break;case 21:break;default:Lt(s,t),Ut(t)}}function Ut(t){var s=t.flags;if(s&2){try{for(var r,o=t.return;o!==null;){if(_y(o)){r=o;break}o=o.return}if(r==null)throw Error(a(160));switch(r.tag){case 27:var d=r.stateNode,f=$d(t);Do(t,f,d);break;case 5:var y=r.stateNode;r.flags&32&&(Ki(y,""),r.flags&=-33);var S=$d(t);Do(t,S,y);break;case 3:case 4:var x=r.stateNode.containerInfo,M=$d(t);Xd(t,M,x);break;default:throw Error(a(161))}}catch(z){Le(t,t.return,z)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Ay(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;Ay(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Wn(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Ey(t,s.alternate,s),s=s.sibling}function bi(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Cs(4,s,s.return),bi(s);break;case 1:jn(s,s.return);var r=s.stateNode;typeof r.componentWillUnmount=="function"&&yy(s,s.return,r),bi(s);break;case 27:Vr(s.stateNode);case 26:case 5:jn(s,s.return),bi(s);break;case 22:s.memoizedState===null&&bi(s);break;case 30:bi(s);break;default:bi(s)}t=t.sibling}}function $n(t,s,r){for(r=r&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var o=s.alternate,d=t,f=s,y=f.flags;switch(f.tag){case 0:case 11:case 15:$n(d,f,r),Dr(4,f);break;case 1:if($n(d,f,r),o=f,d=o.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(M){Le(o,o.return,M)}if(o=f,d=o.updateQueue,d!==null){var S=o.stateNode;try{var x=d.shared.hiddenCallbacks;if(x!==null)for(d.shared.hiddenCallbacks=null,d=0;d<x.length;d++)ag(x[d],S)}catch(M){Le(o,o.return,M)}}r&&y&64&&gy(f),kr(f,f.return);break;case 27:by(f);case 26:case 5:$n(d,f,r),r&&o===null&&y&4&&vy(f),kr(f,f.return);break;case 12:$n(d,f,r);break;case 31:$n(d,f,r),r&&y&4&&wy(d,f);break;case 13:$n(d,f,r),r&&y&4&&Ny(d,f);break;case 22:f.memoizedState===null&&$n(d,f,r),kr(f,f.return);break;case 30:break;default:$n(d,f,r)}s=s.sibling}}function Jd(t,s){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&br(r))}function eh(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&br(t))}function bn(t,s,r,o){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ry(t,s,r,o),s=s.sibling}function Ry(t,s,r,o){var d=s.flags;switch(s.tag){case 0:case 11:case 15:bn(t,s,r,o),d&2048&&Dr(9,s);break;case 1:bn(t,s,r,o);break;case 3:bn(t,s,r,o),d&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&br(t)));break;case 12:if(d&2048){bn(t,s,r,o),t=s.stateNode;try{var f=s.memoizedProps,y=f.id,S=f.onPostCommit;typeof S=="function"&&S(y,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(x){Le(s,s.return,x)}}else bn(t,s,r,o);break;case 31:bn(t,s,r,o);break;case 13:bn(t,s,r,o);break;case 23:break;case 22:f=s.stateNode,y=s.alternate,s.memoizedState!==null?f._visibility&2?bn(t,s,r,o):Mr(t,s):f._visibility&2?bn(t,s,r,o):(f._visibility|=2,ma(t,s,r,o,(s.subtreeFlags&10256)!==0||!1)),d&2048&&Jd(y,s);break;case 24:bn(t,s,r,o),d&2048&&eh(s.alternate,s);break;default:bn(t,s,r,o)}}function ma(t,s,r,o,d){for(d=d&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var f=t,y=s,S=r,x=o,M=y.flags;switch(y.tag){case 0:case 11:case 15:ma(f,y,S,x,d),Dr(8,y);break;case 23:break;case 22:var z=y.stateNode;y.memoizedState!==null?z._visibility&2?ma(f,y,S,x,d):Mr(f,y):(z._visibility|=2,ma(f,y,S,x,d)),d&&M&2048&&Jd(y.alternate,y);break;case 24:ma(f,y,S,x,d),d&&M&2048&&eh(y.alternate,y);break;default:ma(f,y,S,x,d)}s=s.sibling}}function Mr(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var r=t,o=s,d=o.flags;switch(o.tag){case 22:Mr(r,o),d&2048&&Jd(o.alternate,o);break;case 24:Mr(r,o),d&2048&&eh(o.alternate,o);break;default:Mr(r,o)}s=s.sibling}}var Lr=8192;function pa(t,s,r){if(t.subtreeFlags&Lr)for(t=t.child;t!==null;)jy(t,s,r),t=t.sibling}function jy(t,s,r){switch(t.tag){case 26:pa(t,s,r),t.flags&Lr&&t.memoizedState!==null&&Gx(r,_n,t.memoizedState,t.memoizedProps);break;case 5:pa(t,s,r);break;case 3:case 4:var o=_n;_n=Ko(t.stateNode.containerInfo),pa(t,s,r),_n=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Lr,Lr=16777216,pa(t,s,r),Lr=o):pa(t,s,r));break;default:pa(t,s,r)}}function Oy(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Ur(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var o=s[r];mt=o,Dy(o,t)}Oy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Iy(t),t=t.sibling}function Iy(t){switch(t.tag){case 0:case 11:case 15:Ur(t),t.flags&2048&&Cs(9,t,t.return);break;case 3:Ur(t);break;case 12:Ur(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Mo(t)):Ur(t);break;default:Ur(t)}}function Mo(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var o=s[r];mt=o,Dy(o,t)}Oy(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Cs(8,s,s.return),Mo(s);break;case 22:r=s.stateNode,r._visibility&2&&(r._visibility&=-3,Mo(s));break;default:Mo(s)}t=t.sibling}}function Dy(t,s){for(;mt!==null;){var r=mt;switch(r.tag){case 0:case 11:case 15:Cs(8,r,s);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:br(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,mt=o;else e:for(r=t;mt!==null;){o=mt;var d=o.sibling,f=o.return;if(Cy(o),o===r){mt=null;break e}if(d!==null){d.return=f,mt=d;break e}mt=f}}}var ax={getCacheForType:function(t){var s=Et(at),r=s.data.get(t);return r===void 0&&(r=t(),s.data.set(t,r)),r},cacheSignal:function(){return Et(at).controller.signal}},rx=typeof WeakMap=="function"?WeakMap:Map,je=0,He=null,Se=null,Ce=0,Me=0,$t=null,xs=!1,ga=!1,th=!1,Xn=0,Ze=0,ws=0,Si=0,nh=0,Xt=0,ya=0,zr=null,zt=null,sh=!1,Lo=0,ky=0,Uo=1/0,zo=null,Ns=null,ct=0,Ts=null,va=null,Zn=0,ih=0,ah=null,My=null,Pr=0,rh=null;function Zt(){return(je&2)!==0&&Ce!==0?Ce&-Ce:I.T!==null?hh():Xm()}function Ly(){if(Xt===0)if((Ce&536870912)===0||we){var t=Fl;Fl<<=1,(Fl&3932160)===0&&(Fl=262144),Xt=t}else Xt=536870912;return t=Kt.current,t!==null&&(t.flags|=32),Xt}function Pt(t,s,r){(t===He&&(Me===2||Me===9)||t.cancelPendingCommit!==null)&&(_a(t,0),As(t,Ce,Xt,!1)),rr(t,r),((je&2)===0||t!==He)&&(t===He&&((je&2)===0&&(Si|=r),Ze===4&&As(t,Ce,Xt,!1)),On(t))}function Uy(t,s,r){if((je&6)!==0)throw Error(a(327));var o=!r&&(s&127)===0&&(s&t.expiredLanes)===0||ar(t,s),d=o?cx(t,s):oh(t,s,!0),f=o;do{if(d===0){ga&&!o&&As(t,s,0,!1);break}else{if(r=t.current.alternate,f&&!lx(r)){d=oh(t,s,!1),f=!1;continue}if(d===2){if(f=s,t.errorRecoveryDisabledLanes&f)var y=0;else y=t.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){s=y;e:{var S=t;d=zr;var x=S.current.memoizedState.isDehydrated;if(x&&(_a(S,y).flags|=256),y=oh(S,y,!1),y!==2){if(th&&!x){S.errorRecoveryDisabledLanes|=f,Si|=f,d=4;break e}f=zt,zt=d,f!==null&&(zt===null?zt=f:zt.push.apply(zt,f))}d=y}if(f=!1,d!==2)continue}}if(d===1){_a(t,0),As(t,s,0,!0);break}e:{switch(o=t,f=d,f){case 0:case 1:throw Error(a(345));case 4:if((s&4194048)!==s)break;case 6:As(o,s,Xt,!xs);break e;case 2:zt=null;break;case 3:case 5:break;default:throw Error(a(329))}if((s&62914560)===s&&(d=Lo+300-Vt(),10<d)){if(As(o,s,Xt,!xs),Ql(o,0,!0)!==0)break e;Zn=s,o.timeoutHandle=mv(zy.bind(null,o,r,zt,zo,sh,s,Xt,Si,ya,xs,f,"Throttled",-0,0),d);break e}zy(o,r,zt,zo,sh,s,Xt,Si,ya,xs,f,null,-0,0)}}break}while(!0);On(t)}function zy(t,s,r,o,d,f,y,S,x,M,z,G,L,U){if(t.timeoutHandle=-1,G=s.subtreeFlags,G&8192||(G&16785408)===16785408){G={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Un},jy(s,f,G);var J=(f&62914560)===f?Lo-Vt():(f&4194048)===f?ky-Vt():0;if(J=Fx(G,J),J!==null){Zn=f,t.cancelPendingCommit=J(Yy.bind(null,t,s,f,r,o,d,y,S,x,z,G,null,L,U)),As(t,f,y,!M);return}}Yy(t,s,f,r,o,d,y,S,x)}function lx(t){for(var s=t;;){var r=s.tag;if((r===0||r===11||r===15)&&s.flags&16384&&(r=s.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var d=r[o],f=d.getSnapshot;d=d.value;try{if(!Yt(f(),d))return!1}catch{return!1}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function As(t,s,r,o){s&=~nh,s&=~Si,t.suspendedLanes|=s,t.pingedLanes&=~s,o&&(t.warmLanes|=s),o=t.expirationTimes;for(var d=s;0<d;){var f=31-Ft(d),y=1<<f;o[f]=-1,d&=~y}r!==0&&Km(t,r,s)}function Po(){return(je&6)===0?(Br(0),!1):!0}function lh(){if(Se!==null){if(Me===0)var t=Se.return;else t=Se,Hn=hi=null,Cd(t),ca=null,Er=0,t=Se;for(;t!==null;)py(t.alternate,t),t=t.return;Se=null}}function _a(t,s){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,Tx(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),Zn=0,lh(),He=t,Se=r=Pn(t.current,null),Ce=s,Me=0,$t=null,xs=!1,ga=ar(t,s),th=!1,ya=Xt=nh=Si=ws=Ze=0,zt=zr=null,sh=!1,(s&8)!==0&&(s|=s&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=s;0<o;){var d=31-Ft(o),f=1<<d;s|=t[d],o&=~f}return Xn=s,ao(),r}function Py(t,s){me=null,I.H=jr,s===oa||s===mo?(s=tg(),Me=3):s===dd?(s=tg(),Me=4):Me=s===Pd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,$t=s,Se===null&&(Ze=1,Ao(t,an(s,t.current)))}function By(){var t=Kt.current;return t===null?!0:(Ce&4194048)===Ce?cn===null:(Ce&62914560)===Ce||(Ce&536870912)!==0?t===cn:!1}function Hy(){var t=I.H;return I.H=jr,t===null?jr:t}function qy(){var t=I.A;return I.A=ax,t}function Bo(){Ze=4,xs||(Ce&4194048)!==Ce&&Kt.current!==null||(ga=!0),(ws&134217727)===0&&(Si&134217727)===0||He===null||As(He,Ce,Xt,!1)}function oh(t,s,r){var o=je;je|=2;var d=Hy(),f=qy();(He!==t||Ce!==s)&&(zo=null,_a(t,s)),s=!1;var y=Ze;e:do try{if(Me!==0&&Se!==null){var S=Se,x=$t;switch(Me){case 8:lh(),y=6;break e;case 3:case 2:case 9:case 6:Kt.current===null&&(s=!0);var M=Me;if(Me=0,$t=null,ba(t,S,x,M),r&&ga){y=0;break e}break;default:M=Me,Me=0,$t=null,ba(t,S,x,M)}}ox(),y=Ze;break}catch(z){Py(t,z)}while(!0);return s&&t.shellSuspendCounter++,Hn=hi=null,je=o,I.H=d,I.A=f,Se===null&&(He=null,Ce=0,ao()),y}function ox(){for(;Se!==null;)Vy(Se)}function cx(t,s){var r=je;je|=2;var o=Hy(),d=qy();He!==t||Ce!==s?(zo=null,Uo=Vt()+500,_a(t,s)):ga=ar(t,s);e:do try{if(Me!==0&&Se!==null){s=Se;var f=$t;t:switch(Me){case 1:Me=0,$t=null,ba(t,s,f,1);break;case 2:case 9:if(Jp(f)){Me=0,$t=null,Gy(s);break}s=function(){Me!==2&&Me!==9||He!==t||(Me=7),On(t)},f.then(s,s);break e;case 3:Me=7;break e;case 4:Me=5;break e;case 7:Jp(f)?(Me=0,$t=null,Gy(s)):(Me=0,$t=null,ba(t,s,f,7));break;case 5:var y=null;switch(Se.tag){case 26:y=Se.memoizedState;case 5:case 27:var S=Se;if(y?Rv(y):S.stateNode.complete){Me=0,$t=null;var x=S.sibling;if(x!==null)Se=x;else{var M=S.return;M!==null?(Se=M,Ho(M)):Se=null}break t}}Me=0,$t=null,ba(t,s,f,5);break;case 6:Me=0,$t=null,ba(t,s,f,6);break;case 8:lh(),Ze=6;break e;default:throw Error(a(462))}}ux();break}catch(z){Py(t,z)}while(!0);return Hn=hi=null,I.H=o,I.A=d,je=r,Se!==null?0:(He=null,Ce=0,ao(),Ze)}function ux(){for(;Se!==null&&!DE();)Vy(Se)}function Vy(t){var s=fy(t.alternate,t,Xn);t.memoizedProps=t.pendingProps,s===null?Ho(t):Se=s}function Gy(t){var s=t,r=s.alternate;switch(s.tag){case 15:case 0:s=ly(r,s,s.pendingProps,s.type,void 0,Ce);break;case 11:s=ly(r,s,s.pendingProps,s.type.render,s.ref,Ce);break;case 5:Cd(s);default:py(r,s),s=Se=qp(s,Xn),s=fy(r,s,Xn)}t.memoizedProps=t.pendingProps,s===null?Ho(t):Se=s}function ba(t,s,r,o){Hn=hi=null,Cd(s),ca=null,Er=0;var d=s.return;try{if(ZC(t,d,s,r,Ce)){Ze=1,Ao(t,an(r,t.current)),Se=null;return}}catch(f){if(d!==null)throw Se=d,f;Ze=1,Ao(t,an(r,t.current)),Se=null;return}s.flags&32768?(we||o===1?t=!0:ga||(Ce&536870912)!==0?t=!1:(xs=t=!0,(o===2||o===9||o===3||o===6)&&(o=Kt.current,o!==null&&o.tag===13&&(o.flags|=16384))),Fy(s,t)):Ho(s)}function Ho(t){var s=t;do{if((s.flags&32768)!==0){Fy(s,xs);return}t=s.return;var r=tx(s.alternate,s,Xn);if(r!==null){Se=r;return}if(s=s.sibling,s!==null){Se=s;return}Se=s=t}while(s!==null);Ze===0&&(Ze=5)}function Fy(t,s){do{var r=nx(t.alternate,t);if(r!==null){r.flags&=32767,Se=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!s&&(t=t.sibling,t!==null)){Se=t;return}Se=t=r}while(t!==null);Ze=6,Se=null}function Yy(t,s,r,o,d,f,y,S,x){t.cancelPendingCommit=null;do qo();while(ct!==0);if((je&6)!==0)throw Error(a(327));if(s!==null){if(s===t.current)throw Error(a(177));if(f=s.lanes|s.childLanes,f|=$u,VE(t,r,f,y,S,x),t===He&&(Se=He=null,Ce=0),va=s,Ts=t,Zn=r,ih=f,ah=d,My=o,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,mx(Vl,function(){return Xy(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||o){o=I.T,I.T=null,d=V.p,V.p=2,y=je,je|=4;try{sx(t,s,r)}finally{je=y,V.p=d,I.T=o}}ct=1,Qy(),Ky(),Wy()}}function Qy(){if(ct===1){ct=0;var t=Ts,s=va,r=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||r){r=I.T,I.T=null;var o=V.p;V.p=2;var d=je;je|=4;try{Ty(s,t);var f=bh,y=Dp(t.containerInfo),S=f.focusedElem,x=f.selectionRange;if(y!==S&&S&&S.ownerDocument&&Ip(S.ownerDocument.documentElement,S)){if(x!==null&&Fu(S)){var M=x.start,z=x.end;if(z===void 0&&(z=M),"selectionStart"in S)S.selectionStart=M,S.selectionEnd=Math.min(z,S.value.length);else{var G=S.ownerDocument||document,L=G&&G.defaultView||window;if(L.getSelection){var U=L.getSelection(),J=S.textContent.length,ce=Math.min(x.start,J),Pe=x.end===void 0?ce:Math.min(x.end,J);!U.extend&&ce>Pe&&(y=Pe,Pe=ce,ce=y);var j=Op(S,ce),N=Op(S,Pe);if(j&&N&&(U.rangeCount!==1||U.anchorNode!==j.node||U.anchorOffset!==j.offset||U.focusNode!==N.node||U.focusOffset!==N.offset)){var k=G.createRange();k.setStart(j.node,j.offset),U.removeAllRanges(),ce>Pe?(U.addRange(k),U.extend(N.node,N.offset)):(k.setEnd(N.node,N.offset),U.addRange(k))}}}}for(G=[],U=S;U=U.parentNode;)U.nodeType===1&&G.push({element:U,left:U.scrollLeft,top:U.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<G.length;S++){var q=G[S];q.element.scrollLeft=q.left,q.element.scrollTop=q.top}}ec=!!_h,bh=_h=null}finally{je=d,V.p=o,I.T=r}}t.current=s,ct=2}}function Ky(){if(ct===2){ct=0;var t=Ts,s=va,r=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||r){r=I.T,I.T=null;var o=V.p;V.p=2;var d=je;je|=4;try{Ey(t,s.alternate,s)}finally{je=d,V.p=o,I.T=r}}ct=3}}function Wy(){if(ct===4||ct===3){ct=0,kE();var t=Ts,s=va,r=Zn,o=My;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?ct=5:(ct=0,va=Ts=null,$y(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(Ns=null),Nu(r),s=s.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(ir,s,void 0,(s.current.flags&128)===128)}catch{}if(o!==null){s=I.T,d=V.p,V.p=2,I.T=null;try{for(var f=t.onRecoverableError,y=0;y<o.length;y++){var S=o[y];f(S.value,{componentStack:S.stack})}}finally{I.T=s,V.p=d}}(Zn&3)!==0&&qo(),On(t),d=t.pendingLanes,(r&261930)!==0&&(d&42)!==0?t===rh?Pr++:(Pr=0,rh=t):Pr=0,Br(0)}}function $y(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,br(s)))}function qo(){return Qy(),Ky(),Wy(),Xy()}function Xy(){if(ct!==5)return!1;var t=Ts,s=ih;ih=0;var r=Nu(Zn),o=I.T,d=V.p;try{V.p=32>r?32:r,I.T=null,r=ah,ah=null;var f=Ts,y=Zn;if(ct=0,va=Ts=null,Zn=0,(je&6)!==0)throw Error(a(331));var S=je;if(je|=4,Iy(f.current),Ry(f,f.current,y,r),je=S,Br(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(ir,f)}catch{}return!0}finally{V.p=d,I.T=o,$y(t,s)}}function Zy(t,s,r){s=an(r,s),s=zd(t.stateNode,s,2),t=bs(t,s,2),t!==null&&(rr(t,2),On(t))}function Le(t,s,r){if(t.tag===3)Zy(t,t,r);else for(;s!==null;){if(s.tag===3){Zy(s,t,r);break}else if(s.tag===1){var o=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ns===null||!Ns.has(o))){t=an(r,t),r=Jg(2),o=bs(s,r,2),o!==null&&(ey(r,o,s,t),rr(o,2),On(o));break}}s=s.return}}function ch(t,s,r){var o=t.pingCache;if(o===null){o=t.pingCache=new rx;var d=new Set;o.set(s,d)}else d=o.get(s),d===void 0&&(d=new Set,o.set(s,d));d.has(r)||(th=!0,d.add(r),t=dx.bind(null,t,s,r),s.then(t,t))}function dx(t,s,r){var o=t.pingCache;o!==null&&o.delete(s),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,He===t&&(Ce&r)===r&&(Ze===4||Ze===3&&(Ce&62914560)===Ce&&300>Vt()-Lo?(je&2)===0&&_a(t,0):nh|=r,ya===Ce&&(ya=0)),On(t)}function Jy(t,s){s===0&&(s=Qm()),t=ci(t,s),t!==null&&(rr(t,s),On(t))}function hx(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),Jy(t,r)}function fx(t,s){var r=0;switch(t.tag){case 31:case 13:var o=t.stateNode,d=t.memoizedState;d!==null&&(r=d.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(a(314))}o!==null&&o.delete(s),Jy(t,r)}function mx(t,s){return Eu(t,s)}var Vo=null,Sa=null,uh=!1,Go=!1,dh=!1,Rs=0;function On(t){t!==Sa&&t.next===null&&(Sa===null?Vo=Sa=t:Sa=Sa.next=t),Go=!0,uh||(uh=!0,gx())}function Br(t,s){if(!dh&&Go){dh=!0;do for(var r=!1,o=Vo;o!==null;){if(t!==0){var d=o.pendingLanes;if(d===0)var f=0;else{var y=o.suspendedLanes,S=o.pingedLanes;f=(1<<31-Ft(42|t)+1)-1,f&=d&~(y&~S),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(r=!0,sv(o,f))}else f=Ce,f=Ql(o,o===He?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||ar(o,f)||(r=!0,sv(o,f));o=o.next}while(r);dh=!1}}function px(){ev()}function ev(){Go=uh=!1;var t=0;Rs!==0&&Nx()&&(t=Rs);for(var s=Vt(),r=null,o=Vo;o!==null;){var d=o.next,f=tv(o,s);f===0?(o.next=null,r===null?Vo=d:r.next=d,d===null&&(Sa=r)):(r=o,(t!==0||(f&3)!==0)&&(Go=!0)),o=d}ct!==0&&ct!==5||Br(t),Rs!==0&&(Rs=0)}function tv(t,s){for(var r=t.suspendedLanes,o=t.pingedLanes,d=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var y=31-Ft(f),S=1<<y,x=d[y];x===-1?((S&r)===0||(S&o)!==0)&&(d[y]=qE(S,s)):x<=s&&(t.expiredLanes|=S),f&=~S}if(s=He,r=Ce,r=Ql(t,t===s?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,r===0||t===s&&(Me===2||Me===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&Cu(o),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||ar(t,r)){if(s=r&-r,s===t.callbackPriority)return s;switch(o!==null&&Cu(o),Nu(r)){case 2:case 8:r=Fm;break;case 32:r=Vl;break;case 268435456:r=Ym;break;default:r=Vl}return o=nv.bind(null,t),r=Eu(r,o),t.callbackPriority=s,t.callbackNode=r,s}return o!==null&&o!==null&&Cu(o),t.callbackPriority=2,t.callbackNode=null,2}function nv(t,s){if(ct!==0&&ct!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(qo()&&t.callbackNode!==r)return null;var o=Ce;return o=Ql(t,t===He?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Uy(t,o,s),tv(t,Vt()),t.callbackNode!=null&&t.callbackNode===r?nv.bind(null,t):null)}function sv(t,s){if(qo())return null;Uy(t,s,!0)}function gx(){Ax(function(){(je&6)!==0?Eu(Gm,px):ev()})}function hh(){if(Rs===0){var t=ra;t===0&&(t=Gl,Gl<<=1,(Gl&261888)===0&&(Gl=256)),Rs=t}return Rs}function iv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Xl(""+t)}function av(t,s){var r=s.ownerDocument.createElement("input");return r.name=s.name,r.value=s.value,t.id&&r.setAttribute("form",t.id),s.parentNode.insertBefore(r,s),t=new FormData(t),r.parentNode.removeChild(r),t}function yx(t,s,r,o,d){if(s==="submit"&&r&&r.stateNode===d){var f=iv((d[Dt]||null).action),y=o.submitter;y&&(s=(s=y[Dt]||null)?iv(s.formAction):y.getAttribute("formAction"),s!==null&&(f=s,y=null));var S=new to("action","action",null,o,d);t.push({event:S,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Rs!==0){var x=y?av(d,y):new FormData(d);Id(r,{pending:!0,data:x,method:d.method,action:f},null,x)}}else typeof f=="function"&&(S.preventDefault(),x=y?av(d,y):new FormData(d),Id(r,{pending:!0,data:x,method:d.method,action:f},f,x))},currentTarget:d}]})}}for(var fh=0;fh<Wu.length;fh++){var mh=Wu[fh],vx=mh.toLowerCase(),_x=mh[0].toUpperCase()+mh.slice(1);vn(vx,"on"+_x)}vn(Lp,"onAnimationEnd"),vn(Up,"onAnimationIteration"),vn(zp,"onAnimationStart"),vn("dblclick","onDoubleClick"),vn("focusin","onFocus"),vn("focusout","onBlur"),vn(MC,"onTransitionRun"),vn(LC,"onTransitionStart"),vn(UC,"onTransitionCancel"),vn(Pp,"onTransitionEnd"),Yi("onMouseEnter",["mouseout","mouseover"]),Yi("onMouseLeave",["mouseout","mouseover"]),Yi("onPointerEnter",["pointerout","pointerover"]),Yi("onPointerLeave",["pointerout","pointerover"]),ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ai("onBeforeInput",["compositionend","keypress","textInput","paste"]),ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hr));function rv(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var o=t[r],d=o.event;o=o.listeners;e:{var f=void 0;if(s)for(var y=o.length-1;0<=y;y--){var S=o[y],x=S.instance,M=S.currentTarget;if(S=S.listener,x!==f&&d.isPropagationStopped())break e;f=S,d.currentTarget=M;try{f(d)}catch(z){io(z)}d.currentTarget=null,f=x}else for(y=0;y<o.length;y++){if(S=o[y],x=S.instance,M=S.currentTarget,S=S.listener,x!==f&&d.isPropagationStopped())break e;f=S,d.currentTarget=M;try{f(d)}catch(z){io(z)}d.currentTarget=null,f=x}}}}function Ee(t,s){var r=s[Tu];r===void 0&&(r=s[Tu]=new Set);var o=t+"__bubble";r.has(o)||(lv(s,t,2,!1),r.add(o))}function ph(t,s,r){var o=0;s&&(o|=4),lv(r,t,o,s)}var Fo="_reactListening"+Math.random().toString(36).slice(2);function gh(t){if(!t[Fo]){t[Fo]=!0,ep.forEach(function(r){r!=="selectionchange"&&(bx.has(r)||ph(r,!1,t),ph(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Fo]||(s[Fo]=!0,ph("selectionchange",!1,s))}}function lv(t,s,r,o){switch(Lv(s)){case 2:var d=Kx;break;case 8:d=Wx;break;default:d=Oh}r=d.bind(null,s,r,t),d=void 0,!Lu||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),o?d!==void 0?t.addEventListener(s,r,{capture:!0,passive:d}):t.addEventListener(s,r,!0):d!==void 0?t.addEventListener(s,r,{passive:d}):t.addEventListener(s,r,!1)}function yh(t,s,r,o,d){var f=o;if((s&1)===0&&(s&2)===0&&o!==null)e:for(;;){if(o===null)return;var y=o.tag;if(y===3||y===4){var S=o.stateNode.containerInfo;if(S===d)break;if(y===4)for(y=o.return;y!==null;){var x=y.tag;if((x===3||x===4)&&y.stateNode.containerInfo===d)return;y=y.return}for(;S!==null;){if(y=Vi(S),y===null)return;if(x=y.tag,x===5||x===6||x===26||x===27){o=f=y;continue e}S=S.parentNode}}o=o.return}hp(function(){var M=f,z=ku(r),G=[];e:{var L=Bp.get(t);if(L!==void 0){var U=to,J=t;switch(t){case"keypress":if(Jl(r)===0)break e;case"keydown":case"keyup":U=fC;break;case"focusin":J="focus",U=Bu;break;case"focusout":J="blur",U=Bu;break;case"beforeblur":case"afterblur":U=Bu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":U=pp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":U=tC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":U=gC;break;case Lp:case Up:case zp:U=iC;break;case Pp:U=vC;break;case"scroll":case"scrollend":U=JE;break;case"wheel":U=bC;break;case"copy":case"cut":case"paste":U=rC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":U=yp;break;case"toggle":case"beforetoggle":U=EC}var ce=(s&4)!==0,Pe=!ce&&(t==="scroll"||t==="scrollend"),j=ce?L!==null?L+"Capture":null:L;ce=[];for(var N=M,k;N!==null;){var q=N;if(k=q.stateNode,q=q.tag,q!==5&&q!==26&&q!==27||k===null||j===null||(q=cr(N,j),q!=null&&ce.push(qr(N,q,k))),Pe)break;N=N.return}0<ce.length&&(L=new U(L,J,null,r,z),G.push({event:L,listeners:ce}))}}if((s&7)===0){e:{if(L=t==="mouseover"||t==="pointerover",U=t==="mouseout"||t==="pointerout",L&&r!==Du&&(J=r.relatedTarget||r.fromElement)&&(Vi(J)||J[qi]))break e;if((U||L)&&(L=z.window===z?z:(L=z.ownerDocument)?L.defaultView||L.parentWindow:window,U?(J=r.relatedTarget||r.toElement,U=M,J=J?Vi(J):null,J!==null&&(Pe=c(J),ce=J.tag,J!==Pe||ce!==5&&ce!==27&&ce!==6)&&(J=null)):(U=null,J=M),U!==J)){if(ce=pp,q="onMouseLeave",j="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(ce=yp,q="onPointerLeave",j="onPointerEnter",N="pointer"),Pe=U==null?L:or(U),k=J==null?L:or(J),L=new ce(q,N+"leave",U,r,z),L.target=Pe,L.relatedTarget=k,q=null,Vi(z)===M&&(ce=new ce(j,N+"enter",J,r,z),ce.target=k,ce.relatedTarget=Pe,q=ce),Pe=q,U&&J)t:{for(ce=Sx,j=U,N=J,k=0,q=j;q;q=ce(q))k++;q=0;for(var le=N;le;le=ce(le))q++;for(;0<k-q;)j=ce(j),k--;for(;0<q-k;)N=ce(N),q--;for(;k--;){if(j===N||N!==null&&j===N.alternate){ce=j;break t}j=ce(j),N=ce(N)}ce=null}else ce=null;U!==null&&ov(G,L,U,ce,!1),J!==null&&Pe!==null&&ov(G,Pe,J,ce,!0)}}e:{if(L=M?or(M):window,U=L.nodeName&&L.nodeName.toLowerCase(),U==="select"||U==="input"&&L.type==="file")var Te=wp;else if(Cp(L))if(Np)Te=IC;else{Te=jC;var se=RC}else U=L.nodeName,!U||U.toLowerCase()!=="input"||L.type!=="checkbox"&&L.type!=="radio"?M&&Iu(M.elementType)&&(Te=wp):Te=OC;if(Te&&(Te=Te(t,M))){xp(G,Te,r,z);break e}se&&se(t,L,M),t==="focusout"&&M&&L.type==="number"&&M.memoizedProps.value!=null&&Ou(L,"number",L.value)}switch(se=M?or(M):window,t){case"focusin":(Cp(se)||se.contentEditable==="true")&&(Zi=se,Yu=M,yr=null);break;case"focusout":yr=Yu=Zi=null;break;case"mousedown":Qu=!0;break;case"contextmenu":case"mouseup":case"dragend":Qu=!1,kp(G,r,z);break;case"selectionchange":if(kC)break;case"keydown":case"keyup":kp(G,r,z)}var pe;if(qu)e:{switch(t){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else Xi?Sp(t,r)&&(xe="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(xe="onCompositionStart");xe&&(vp&&r.locale!=="ko"&&(Xi||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&Xi&&(pe=fp()):(fs=z,Uu="value"in fs?fs.value:fs.textContent,Xi=!0)),se=Yo(M,xe),0<se.length&&(xe=new gp(xe,t,null,r,z),G.push({event:xe,listeners:se}),pe?xe.data=pe:(pe=Ep(r),pe!==null&&(xe.data=pe)))),(pe=xC?wC(t,r):NC(t,r))&&(xe=Yo(M,"onBeforeInput"),0<xe.length&&(se=new gp("onBeforeInput","beforeinput",null,r,z),G.push({event:se,listeners:xe}),se.data=pe)),yx(G,t,M,r,z)}rv(G,s)})}function qr(t,s,r){return{instance:t,listener:s,currentTarget:r}}function Yo(t,s){for(var r=s+"Capture",o=[];t!==null;){var d=t,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=cr(t,r),d!=null&&o.unshift(qr(t,d,f)),d=cr(t,s),d!=null&&o.push(qr(t,d,f))),t.tag===3)return o;t=t.return}return[]}function Sx(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function ov(t,s,r,o,d){for(var f=s._reactName,y=[];r!==null&&r!==o;){var S=r,x=S.alternate,M=S.stateNode;if(S=S.tag,x!==null&&x===o)break;S!==5&&S!==26&&S!==27||M===null||(x=M,d?(M=cr(r,f),M!=null&&y.unshift(qr(r,M,x))):d||(M=cr(r,f),M!=null&&y.push(qr(r,M,x)))),r=r.return}y.length!==0&&t.push({event:s,listeners:y})}var Ex=/\r\n?/g,Cx=/\u0000|\uFFFD/g;function cv(t){return(typeof t=="string"?t:""+t).replace(Ex,`
`).replace(Cx,"")}function uv(t,s){return s=cv(s),cv(t)===s}function ze(t,s,r,o,d,f){switch(r){case"children":typeof o=="string"?s==="body"||s==="textarea"&&o===""||Ki(t,o):(typeof o=="number"||typeof o=="bigint")&&s!=="body"&&Ki(t,""+o);break;case"className":Wl(t,"class",o);break;case"tabIndex":Wl(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Wl(t,r,o);break;case"style":up(t,o,f);break;case"data":if(s!=="object"){Wl(t,"data",o);break}case"src":case"href":if(o===""&&(s!=="a"||r!=="href")){t.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=Xl(""+o),t.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(r==="formAction"?(s!=="input"&&ze(t,s,"name",d.name,d,null),ze(t,s,"formEncType",d.formEncType,d,null),ze(t,s,"formMethod",d.formMethod,d,null),ze(t,s,"formTarget",d.formTarget,d,null)):(ze(t,s,"encType",d.encType,d,null),ze(t,s,"method",d.method,d,null),ze(t,s,"target",d.target,d,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=Xl(""+o),t.setAttribute(r,o);break;case"onClick":o!=null&&(t.onclick=Un);break;case"onScroll":o!=null&&Ee("scroll",t);break;case"onScrollEnd":o!=null&&Ee("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(r=o.__html,r!=null){if(d.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}r=Xl(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""+o):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":o===!0?t.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,o):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(r,o):t.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(r):t.setAttribute(r,o);break;case"popover":Ee("beforetoggle",t),Ee("toggle",t),Kl(t,"popover",o);break;case"xlinkActuate":Ln(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Ln(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Ln(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Ln(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Ln(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Ln(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Ln(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Ln(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Ln(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Kl(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=XE.get(r)||r,Kl(t,r,o))}}function vh(t,s,r,o,d,f){switch(r){case"style":up(t,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(r=o.__html,r!=null){if(d.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"children":typeof o=="string"?Ki(t,o):(typeof o=="number"||typeof o=="bigint")&&Ki(t,""+o);break;case"onScroll":o!=null&&Ee("scroll",t);break;case"onScrollEnd":o!=null&&Ee("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Un);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!tp.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(d=r.endsWith("Capture"),s=r.slice(2,d?r.length-7:void 0),f=t[Dt]||null,f=f!=null?f[r]:null,typeof f=="function"&&t.removeEventListener(s,f,d),typeof o=="function")){typeof f!="function"&&f!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(s,o,d);break e}r in t?t[r]=o:o===!0?t.setAttribute(r,""):Kl(t,r,o)}}}function xt(t,s,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ee("error",t),Ee("load",t);var o=!1,d=!1,f;for(f in r)if(r.hasOwnProperty(f)){var y=r[f];if(y!=null)switch(f){case"src":o=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:ze(t,s,f,y,r,null)}}d&&ze(t,s,"srcSet",r.srcSet,r,null),o&&ze(t,s,"src",r.src,r,null);return;case"input":Ee("invalid",t);var S=f=y=d=null,x=null,M=null;for(o in r)if(r.hasOwnProperty(o)){var z=r[o];if(z!=null)switch(o){case"name":d=z;break;case"type":y=z;break;case"checked":x=z;break;case"defaultChecked":M=z;break;case"value":f=z;break;case"defaultValue":S=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(a(137,s));break;default:ze(t,s,o,z,r,null)}}rp(t,f,S,x,M,y,d,!1);return;case"select":Ee("invalid",t),o=y=f=null;for(d in r)if(r.hasOwnProperty(d)&&(S=r[d],S!=null))switch(d){case"value":f=S;break;case"defaultValue":y=S;break;case"multiple":o=S;default:ze(t,s,d,S,r,null)}s=f,r=y,t.multiple=!!o,s!=null?Qi(t,!!o,s,!1):r!=null&&Qi(t,!!o,r,!0);return;case"textarea":Ee("invalid",t),f=d=o=null;for(y in r)if(r.hasOwnProperty(y)&&(S=r[y],S!=null))switch(y){case"value":o=S;break;case"defaultValue":d=S;break;case"children":f=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(a(91));break;default:ze(t,s,y,S,r,null)}op(t,o,d,f);return;case"option":for(x in r)if(r.hasOwnProperty(x)&&(o=r[x],o!=null))switch(x){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:ze(t,s,x,o,r,null)}return;case"dialog":Ee("beforetoggle",t),Ee("toggle",t),Ee("cancel",t),Ee("close",t);break;case"iframe":case"object":Ee("load",t);break;case"video":case"audio":for(o=0;o<Hr.length;o++)Ee(Hr[o],t);break;case"image":Ee("error",t),Ee("load",t);break;case"details":Ee("toggle",t);break;case"embed":case"source":case"link":Ee("error",t),Ee("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(M in r)if(r.hasOwnProperty(M)&&(o=r[M],o!=null))switch(M){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:ze(t,s,M,o,r,null)}return;default:if(Iu(s)){for(z in r)r.hasOwnProperty(z)&&(o=r[z],o!==void 0&&vh(t,s,z,o,r,void 0));return}}for(S in r)r.hasOwnProperty(S)&&(o=r[S],o!=null&&ze(t,s,S,o,r,null))}function xx(t,s,r,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,y=null,S=null,x=null,M=null,z=null;for(U in r){var G=r[U];if(r.hasOwnProperty(U)&&G!=null)switch(U){case"checked":break;case"value":break;case"defaultValue":x=G;default:o.hasOwnProperty(U)||ze(t,s,U,null,o,G)}}for(var L in o){var U=o[L];if(G=r[L],o.hasOwnProperty(L)&&(U!=null||G!=null))switch(L){case"type":f=U;break;case"name":d=U;break;case"checked":M=U;break;case"defaultChecked":z=U;break;case"value":y=U;break;case"defaultValue":S=U;break;case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(a(137,s));break;default:U!==G&&ze(t,s,L,U,o,G)}}ju(t,y,S,x,M,z,f,d);return;case"select":U=y=S=L=null;for(f in r)if(x=r[f],r.hasOwnProperty(f)&&x!=null)switch(f){case"value":break;case"multiple":U=x;default:o.hasOwnProperty(f)||ze(t,s,f,null,o,x)}for(d in o)if(f=o[d],x=r[d],o.hasOwnProperty(d)&&(f!=null||x!=null))switch(d){case"value":L=f;break;case"defaultValue":S=f;break;case"multiple":y=f;default:f!==x&&ze(t,s,d,f,o,x)}s=S,r=y,o=U,L!=null?Qi(t,!!r,L,!1):!!o!=!!r&&(s!=null?Qi(t,!!r,s,!0):Qi(t,!!r,r?[]:"",!1));return;case"textarea":U=L=null;for(S in r)if(d=r[S],r.hasOwnProperty(S)&&d!=null&&!o.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:ze(t,s,S,null,o,d)}for(y in o)if(d=o[y],f=r[y],o.hasOwnProperty(y)&&(d!=null||f!=null))switch(y){case"value":L=d;break;case"defaultValue":U=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(a(91));break;default:d!==f&&ze(t,s,y,d,o,f)}lp(t,L,U);return;case"option":for(var J in r)if(L=r[J],r.hasOwnProperty(J)&&L!=null&&!o.hasOwnProperty(J))switch(J){case"selected":t.selected=!1;break;default:ze(t,s,J,null,o,L)}for(x in o)if(L=o[x],U=r[x],o.hasOwnProperty(x)&&L!==U&&(L!=null||U!=null))switch(x){case"selected":t.selected=L&&typeof L!="function"&&typeof L!="symbol";break;default:ze(t,s,x,L,o,U)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ce in r)L=r[ce],r.hasOwnProperty(ce)&&L!=null&&!o.hasOwnProperty(ce)&&ze(t,s,ce,null,o,L);for(M in o)if(L=o[M],U=r[M],o.hasOwnProperty(M)&&L!==U&&(L!=null||U!=null))switch(M){case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(a(137,s));break;default:ze(t,s,M,L,o,U)}return;default:if(Iu(s)){for(var Pe in r)L=r[Pe],r.hasOwnProperty(Pe)&&L!==void 0&&!o.hasOwnProperty(Pe)&&vh(t,s,Pe,void 0,o,L);for(z in o)L=o[z],U=r[z],!o.hasOwnProperty(z)||L===U||L===void 0&&U===void 0||vh(t,s,z,L,o,U);return}}for(var j in r)L=r[j],r.hasOwnProperty(j)&&L!=null&&!o.hasOwnProperty(j)&&ze(t,s,j,null,o,L);for(G in o)L=o[G],U=r[G],!o.hasOwnProperty(G)||L===U||L==null&&U==null||ze(t,s,G,L,o,U)}function dv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function wx(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,r=performance.getEntriesByType("resource"),o=0;o<r.length;o++){var d=r[o],f=d.transferSize,y=d.initiatorType,S=d.duration;if(f&&S&&dv(y)){for(y=0,S=d.responseEnd,o+=1;o<r.length;o++){var x=r[o],M=x.startTime;if(M>S)break;var z=x.transferSize,G=x.initiatorType;z&&dv(G)&&(x=x.responseEnd,y+=z*(x<S?1:(S-M)/(x-M)))}if(--o,s+=8*(f+y)/(d.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var _h=null,bh=null;function Qo(t){return t.nodeType===9?t:t.ownerDocument}function hv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function fv(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Sh(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Eh=null;function Nx(){var t=window.event;return t&&t.type==="popstate"?t===Eh?!1:(Eh=t,!0):(Eh=null,!1)}var mv=typeof setTimeout=="function"?setTimeout:void 0,Tx=typeof clearTimeout=="function"?clearTimeout:void 0,pv=typeof Promise=="function"?Promise:void 0,Ax=typeof queueMicrotask=="function"?queueMicrotask:typeof pv<"u"?function(t){return pv.resolve(null).then(t).catch(Rx)}:mv;function Rx(t){setTimeout(function(){throw t})}function js(t){return t==="head"}function gv(t,s){var r=s,o=0;do{var d=r.nextSibling;if(t.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"||r==="/&"){if(o===0){t.removeChild(d),wa(s);return}o--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")o++;else if(r==="html")Vr(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,Vr(r);for(var f=r.firstChild;f;){var y=f.nextSibling,S=f.nodeName;f[lr]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&f.rel.toLowerCase()==="stylesheet"||r.removeChild(f),f=y}}else r==="body"&&Vr(t.ownerDocument.body);r=d}while(r);wa(s)}function yv(t,s){var r=t;t=0;do{var o=r.nextSibling;if(r.nodeType===1?s?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(s?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=o}while(r)}function Ch(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var r=s;switch(s=s.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Ch(r),Au(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function jx(t,s,r,o){for(;t.nodeType===1;){var d=r;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[lr])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=un(t.nextSibling),t===null)break}return null}function Ox(t,s,r){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=un(t.nextSibling),t===null))return null;return t}function vv(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=un(t.nextSibling),t===null))return null;return t}function xh(t){return t.data==="$?"||t.data==="$~"}function wh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Ix(t,s){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||r.readyState!=="loading")s();else{var o=function(){s(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function un(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var Nh=null;function _v(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(s===0)return un(t.nextSibling);s--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||s++}t=t.nextSibling}return null}function bv(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(s===0)return t;s--}else r!=="/$"&&r!=="/&"||s++}t=t.previousSibling}return null}function Sv(t,s,r){switch(s=Qo(r),t){case"html":if(t=s.documentElement,!t)throw Error(a(452));return t;case"head":if(t=s.head,!t)throw Error(a(453));return t;case"body":if(t=s.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Vr(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Au(t)}var dn=new Map,Ev=new Set;function Ko(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Jn=V.d;V.d={f:Dx,r:kx,D:Mx,C:Lx,L:Ux,m:zx,X:Bx,S:Px,M:Hx};function Dx(){var t=Jn.f(),s=Po();return t||s}function kx(t){var s=Gi(t);s!==null&&s.tag===5&&s.type==="form"?Pg(s):Jn.r(t)}var Ea=typeof document>"u"?null:document;function Cv(t,s,r){var o=Ea;if(o&&typeof s=="string"&&s){var d=nn(s);d='link[rel="'+t+'"][href="'+d+'"]',typeof r=="string"&&(d+='[crossorigin="'+r+'"]'),Ev.has(d)||(Ev.add(d),t={rel:t,crossOrigin:r,href:s},o.querySelector(d)===null&&(s=o.createElement("link"),xt(s,"link",t),ft(s),o.head.appendChild(s)))}}function Mx(t){Jn.D(t),Cv("dns-prefetch",t,null)}function Lx(t,s){Jn.C(t,s),Cv("preconnect",t,s)}function Ux(t,s,r){Jn.L(t,s,r);var o=Ea;if(o&&t&&s){var d='link[rel="preload"][as="'+nn(s)+'"]';s==="image"&&r&&r.imageSrcSet?(d+='[imagesrcset="'+nn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(d+='[imagesizes="'+nn(r.imageSizes)+'"]')):d+='[href="'+nn(t)+'"]';var f=d;switch(s){case"style":f=Ca(t);break;case"script":f=xa(t)}dn.has(f)||(t=_({rel:"preload",href:s==="image"&&r&&r.imageSrcSet?void 0:t,as:s},r),dn.set(f,t),o.querySelector(d)!==null||s==="style"&&o.querySelector(Gr(f))||s==="script"&&o.querySelector(Fr(f))||(s=o.createElement("link"),xt(s,"link",t),ft(s),o.head.appendChild(s)))}}function zx(t,s){Jn.m(t,s);var r=Ea;if(r&&t){var o=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+nn(o)+'"][href="'+nn(t)+'"]',f=d;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=xa(t)}if(!dn.has(f)&&(t=_({rel:"modulepreload",href:t},s),dn.set(f,t),r.querySelector(d)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Fr(f)))return}o=r.createElement("link"),xt(o,"link",t),ft(o),r.head.appendChild(o)}}}function Px(t,s,r){Jn.S(t,s,r);var o=Ea;if(o&&t){var d=Fi(o).hoistableStyles,f=Ca(t);s=s||"default";var y=d.get(f);if(!y){var S={loading:0,preload:null};if(y=o.querySelector(Gr(f)))S.loading=5;else{t=_({rel:"stylesheet",href:t,"data-precedence":s},r),(r=dn.get(f))&&Th(t,r);var x=y=o.createElement("link");ft(x),xt(x,"link",t),x._p=new Promise(function(M,z){x.onload=M,x.onerror=z}),x.addEventListener("load",function(){S.loading|=1}),x.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Wo(y,s,o)}y={type:"stylesheet",instance:y,count:1,state:S},d.set(f,y)}}}function Bx(t,s){Jn.X(t,s);var r=Ea;if(r&&t){var o=Fi(r).hoistableScripts,d=xa(t),f=o.get(d);f||(f=r.querySelector(Fr(d)),f||(t=_({src:t,async:!0},s),(s=dn.get(d))&&Ah(t,s),f=r.createElement("script"),ft(f),xt(f,"link",t),r.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(d,f))}}function Hx(t,s){Jn.M(t,s);var r=Ea;if(r&&t){var o=Fi(r).hoistableScripts,d=xa(t),f=o.get(d);f||(f=r.querySelector(Fr(d)),f||(t=_({src:t,async:!0,type:"module"},s),(s=dn.get(d))&&Ah(t,s),f=r.createElement("script"),ft(f),xt(f,"link",t),r.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(d,f))}}function xv(t,s,r,o){var d=(d=be.current)?Ko(d):null;if(!d)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(s=Ca(r.href),r=Fi(d).hoistableStyles,o=r.get(s),o||(o={type:"style",instance:null,count:0,state:null},r.set(s,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=Ca(r.href);var f=Fi(d).hoistableStyles,y=f.get(t);if(y||(d=d.ownerDocument||d,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,y),(f=d.querySelector(Gr(t)))&&!f._p&&(y.instance=f,y.state.loading=5),dn.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},dn.set(t,r),f||qx(d,t,r,y.state))),s&&o===null)throw Error(a(528,""));return y}if(s&&o!==null)throw Error(a(529,""));return null;case"script":return s=r.async,r=r.src,typeof r=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=xa(r),r=Fi(d).hoistableScripts,o=r.get(s),o||(o={type:"script",instance:null,count:0,state:null},r.set(s,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function Ca(t){return'href="'+nn(t)+'"'}function Gr(t){return'link[rel="stylesheet"]['+t+"]"}function wv(t){return _({},t,{"data-precedence":t.precedence,precedence:null})}function qx(t,s,r,o){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?o.loading=1:(s=t.createElement("link"),o.preload=s,s.addEventListener("load",function(){return o.loading|=1}),s.addEventListener("error",function(){return o.loading|=2}),xt(s,"link",r),ft(s),t.head.appendChild(s))}function xa(t){return'[src="'+nn(t)+'"]'}function Fr(t){return"script[async]"+t}function Nv(t,s,r){if(s.count++,s.instance===null)switch(s.type){case"style":var o=t.querySelector('style[data-href~="'+nn(r.href)+'"]');if(o)return s.instance=o,ft(o),o;var d=_({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),ft(o),xt(o,"style",d),Wo(o,r.precedence,t),s.instance=o;case"stylesheet":d=Ca(r.href);var f=t.querySelector(Gr(d));if(f)return s.state.loading|=4,s.instance=f,ft(f),f;o=wv(r),(d=dn.get(d))&&Th(o,d),f=(t.ownerDocument||t).createElement("link"),ft(f);var y=f;return y._p=new Promise(function(S,x){y.onload=S,y.onerror=x}),xt(f,"link",o),s.state.loading|=4,Wo(f,r.precedence,t),s.instance=f;case"script":return f=xa(r.src),(d=t.querySelector(Fr(f)))?(s.instance=d,ft(d),d):(o=r,(d=dn.get(f))&&(o=_({},r),Ah(o,d)),t=t.ownerDocument||t,d=t.createElement("script"),ft(d),xt(d,"link",o),t.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(a(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(o=s.instance,s.state.loading|=4,Wo(o,r.precedence,t));return s.instance}function Wo(t,s,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=o.length?o[o.length-1]:null,f=d,y=0;y<o.length;y++){var S=o[y];if(S.dataset.precedence===s)f=S;else if(f!==d)break}f?f.parentNode.insertBefore(t,f.nextSibling):(s=r.nodeType===9?r.head:r,s.insertBefore(t,s.firstChild))}function Th(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Ah(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var $o=null;function Tv(t,s,r){if($o===null){var o=new Map,d=$o=new Map;d.set(r,o)}else d=$o,o=d.get(r),o||(o=new Map,d.set(r,o));if(o.has(t))return o;for(o.set(t,null),r=r.getElementsByTagName(t),d=0;d<r.length;d++){var f=r[d];if(!(f[lr]||f[bt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var y=f.getAttribute(s)||"";y=t+y;var S=o.get(y);S?S.push(f):o.set(y,[f])}}return o}function Av(t,s,r){t=t.ownerDocument||t,t.head.insertBefore(r,s==="title"?t.querySelector("head > title"):null)}function Vx(t,s,r){if(r===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Rv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Gx(t,s,r,o){if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var d=Ca(o.href),f=s.querySelector(Gr(d));if(f){s=f._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Xo.bind(t),s.then(t,t)),r.state.loading|=4,r.instance=f,ft(f);return}f=s.ownerDocument||s,o=wv(o),(d=dn.get(d))&&Th(o,d),f=f.createElement("link"),ft(f);var y=f;y._p=new Promise(function(S,x){y.onload=S,y.onerror=x}),xt(f,"link",o),r.instance=f}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=Xo.bind(t),s.addEventListener("load",r),s.addEventListener("error",r))}}var Rh=0;function Fx(t,s){return t.stylesheets&&t.count===0&&Jo(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var o=setTimeout(function(){if(t.stylesheets&&Jo(t,t.stylesheets),t.unsuspend){var f=t.unsuspend;t.unsuspend=null,f()}},6e4+s);0<t.imgBytes&&Rh===0&&(Rh=62500*wx());var d=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Jo(t,t.stylesheets),t.unsuspend)){var f=t.unsuspend;t.unsuspend=null,f()}},(t.imgBytes>Rh?50:800)+s);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(d)}}:null}function Xo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Jo(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Zo=null;function Jo(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Zo=new Map,s.forEach(Yx,t),Zo=null,Xo.call(t))}function Yx(t,s){if(!(s.state.loading&4)){var r=Zo.get(t);if(r)var o=r.get(null);else{r=new Map,Zo.set(t,r);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var y=d[f];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(r.set(y.dataset.precedence,y),o=y)}o&&r.set(null,o)}d=s.instance,y=d.getAttribute("data-precedence"),f=r.get(y)||o,f===o&&r.set(null,d),r.set(y,d),this.count++,o=Xo.bind(this),d.addEventListener("load",o),d.addEventListener("error",o),f?f.parentNode.insertBefore(d,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),s.state.loading|=4}}var Yr={$$typeof:F,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function Qx(t,s,r,o,d,f,y,S,x){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xu(0),this.hiddenUpdates=xu(null),this.identifierPrefix=o,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function jv(t,s,r,o,d,f,y,S,x,M,z,G){return t=new Qx(t,s,r,y,x,M,z,G,S),s=1,f===!0&&(s|=24),f=Qt(3,null,null,s),t.current=f,f.stateNode=t,s=od(),s.refCount++,t.pooledCache=s,s.refCount++,f.memoizedState={element:o,isDehydrated:r,cache:s},hd(f),t}function Ov(t){return t?(t=ta,t):ta}function Iv(t,s,r,o,d,f){d=Ov(d),o.context===null?o.context=d:o.pendingContext=d,o=_s(s),o.payload={element:r},f=f===void 0?null:f,f!==null&&(o.callback=f),r=bs(t,o,s),r!==null&&(Pt(r,t,s),xr(r,t,s))}function Dv(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function jh(t,s){Dv(t,s),(t=t.alternate)&&Dv(t,s)}function kv(t){if(t.tag===13||t.tag===31){var s=ci(t,67108864);s!==null&&Pt(s,t,67108864),jh(t,67108864)}}function Mv(t){if(t.tag===13||t.tag===31){var s=Zt();s=wu(s);var r=ci(t,s);r!==null&&Pt(r,t,s),jh(t,s)}}var ec=!0;function Kx(t,s,r,o){var d=I.T;I.T=null;var f=V.p;try{V.p=2,Oh(t,s,r,o)}finally{V.p=f,I.T=d}}function Wx(t,s,r,o){var d=I.T;I.T=null;var f=V.p;try{V.p=8,Oh(t,s,r,o)}finally{V.p=f,I.T=d}}function Oh(t,s,r,o){if(ec){var d=Ih(o);if(d===null)yh(t,s,o,tc,r),Uv(t,o);else if(Xx(d,t,s,r,o))o.stopPropagation();else if(Uv(t,o),s&4&&-1<$x.indexOf(t)){for(;d!==null;){var f=Gi(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var y=ii(f.pendingLanes);if(y!==0){var S=f;for(S.pendingLanes|=2,S.entangledLanes|=2;y;){var x=1<<31-Ft(y);S.entanglements[1]|=x,y&=~x}On(f),(je&6)===0&&(Uo=Vt()+500,Br(0))}}break;case 31:case 13:S=ci(f,2),S!==null&&Pt(S,f,2),Po(),jh(f,2)}if(f=Ih(o),f===null&&yh(t,s,o,tc,r),f===d)break;d=f}d!==null&&o.stopPropagation()}else yh(t,s,o,null,r)}}function Ih(t){return t=ku(t),Dh(t)}var tc=null;function Dh(t){if(tc=null,t=Vi(t),t!==null){var s=c(t);if(s===null)t=null;else{var r=s.tag;if(r===13){if(t=h(s),t!==null)return t;t=null}else if(r===31){if(t=m(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return tc=t,null}function Lv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ME()){case Gm:return 2;case Fm:return 8;case Vl:case LE:return 32;case Ym:return 268435456;default:return 32}default:return 32}}var kh=!1,Os=null,Is=null,Ds=null,Qr=new Map,Kr=new Map,ks=[],$x="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Uv(t,s){switch(t){case"focusin":case"focusout":Os=null;break;case"dragenter":case"dragleave":Is=null;break;case"mouseover":case"mouseout":Ds=null;break;case"pointerover":case"pointerout":Qr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kr.delete(s.pointerId)}}function Wr(t,s,r,o,d,f){return t===null||t.nativeEvent!==f?(t={blockedOn:s,domEventName:r,eventSystemFlags:o,nativeEvent:f,targetContainers:[d]},s!==null&&(s=Gi(s),s!==null&&kv(s)),t):(t.eventSystemFlags|=o,s=t.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),t)}function Xx(t,s,r,o,d){switch(s){case"focusin":return Os=Wr(Os,t,s,r,o,d),!0;case"dragenter":return Is=Wr(Is,t,s,r,o,d),!0;case"mouseover":return Ds=Wr(Ds,t,s,r,o,d),!0;case"pointerover":var f=d.pointerId;return Qr.set(f,Wr(Qr.get(f)||null,t,s,r,o,d)),!0;case"gotpointercapture":return f=d.pointerId,Kr.set(f,Wr(Kr.get(f)||null,t,s,r,o,d)),!0}return!1}function zv(t){var s=Vi(t.target);if(s!==null){var r=c(s);if(r!==null){if(s=r.tag,s===13){if(s=h(r),s!==null){t.blockedOn=s,Zm(t.priority,function(){Mv(r)});return}}else if(s===31){if(s=m(r),s!==null){t.blockedOn=s,Zm(t.priority,function(){Mv(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function nc(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=Ih(t.nativeEvent);if(r===null){r=t.nativeEvent;var o=new r.constructor(r.type,r);Du=o,r.target.dispatchEvent(o),Du=null}else return s=Gi(r),s!==null&&kv(s),t.blockedOn=r,!1;s.shift()}return!0}function Pv(t,s,r){nc(t)&&r.delete(s)}function Zx(){kh=!1,Os!==null&&nc(Os)&&(Os=null),Is!==null&&nc(Is)&&(Is=null),Ds!==null&&nc(Ds)&&(Ds=null),Qr.forEach(Pv),Kr.forEach(Pv)}function sc(t,s){t.blockedOn===s&&(t.blockedOn=null,kh||(kh=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Zx)))}var ic=null;function Bv(t){ic!==t&&(ic=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ic===t&&(ic=null);for(var s=0;s<t.length;s+=3){var r=t[s],o=t[s+1],d=t[s+2];if(typeof o!="function"){if(Dh(o||r)===null)continue;break}var f=Gi(r);f!==null&&(t.splice(s,3),s-=3,Id(f,{pending:!0,data:d,method:r.method,action:o},o,d))}}))}function wa(t){function s(x){return sc(x,t)}Os!==null&&sc(Os,t),Is!==null&&sc(Is,t),Ds!==null&&sc(Ds,t),Qr.forEach(s),Kr.forEach(s);for(var r=0;r<ks.length;r++){var o=ks[r];o.blockedOn===t&&(o.blockedOn=null)}for(;0<ks.length&&(r=ks[0],r.blockedOn===null);)zv(r),r.blockedOn===null&&ks.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var d=r[o],f=r[o+1],y=d[Dt]||null;if(typeof f=="function")y||Bv(r);else if(y){var S=null;if(f&&f.hasAttribute("formAction")){if(d=f,y=f[Dt]||null)S=y.formAction;else if(Dh(d)!==null)continue}else S=y.action;typeof S=="function"?r[o+1]=S:(r.splice(o,3),o-=3),Bv(r)}}}function Hv(){function t(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(y){return d=y})},focusReset:"manual",scroll:"manual"})}function s(){d!==null&&(d(),d=null),o||setTimeout(r,20)}function r(){if(!o&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,d=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(r,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),d!==null&&(d(),d=null)}}}function Mh(t){this._internalRoot=t}ac.prototype.render=Mh.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(a(409));var r=s.current,o=Zt();Iv(r,o,t,s,null,null)},ac.prototype.unmount=Mh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Iv(t.current,2,null,t,null,null),Po(),s[qi]=null}};function ac(t){this._internalRoot=t}ac.prototype.unstable_scheduleHydration=function(t){if(t){var s=Xm();t={blockedOn:null,target:t,priority:s};for(var r=0;r<ks.length&&s!==0&&s<ks[r].priority;r++);ks.splice(r,0,t),r===0&&zv(t)}};var qv=e.version;if(qv!=="19.2.1")throw Error(a(527,qv,"19.2.1"));V.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=g(s),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var Jx={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{ir=rc.inject(Jx),Gt=rc}catch{}}return Xr.createRoot=function(t,s){if(!l(t))throw Error(a(299));var r=!1,o="",d=Wg,f=$g,y=Xg;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(f=s.onCaughtError),s.onRecoverableError!==void 0&&(y=s.onRecoverableError)),s=jv(t,1,!1,null,null,r,o,null,d,f,y,Hv),t[qi]=s.current,gh(t),new Mh(s)},Xr.hydrateRoot=function(t,s,r){if(!l(t))throw Error(a(299));var o=!1,d="",f=Wg,y=$g,S=Xg,x=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(y=r.onCaughtError),r.onRecoverableError!==void 0&&(S=r.onRecoverableError),r.formState!==void 0&&(x=r.formState)),s=jv(t,1,!0,s,r??null,o,d,x,f,y,S,Hv),s.context=Ov(null),r=s.current,o=Zt(),o=wu(o),d=_s(o),d.callback=null,bs(r,d,o),r=o,s.current.lanes=r,rr(s,r),On(s),t[qi]=s.current,gh(t),new ac(s)},Xr.version="19.2.1",Xr}var Zv;function cw(){if(Zv)return zh.exports;Zv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),zh.exports=ow(),zh.exports}var uw=cw();var Jv="popstate";function dw(n={}){function e(a,l){let{pathname:c,search:h,hash:m}=a.location;return of("",{pathname:c,search:h,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function i(a,l){return typeof l=="string"?l:fl(l)}return fw(e,i,null,n)}function Ke(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function fn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hw(){return Math.random().toString(36).substring(2,10)}function e_(n,e){return{usr:n.state,key:n.key,idx:e}}function of(n,e,i=null,a){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?qa(e):e,state:i,key:e&&e.key||a||hw()}}function fl({pathname:n="/",search:e="",hash:i=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),i&&i!=="#"&&(n+=i.charAt(0)==="#"?i:"#"+i),n}function qa(n){let e={};if(n){let i=n.indexOf("#");i>=0&&(e.hash=n.substring(i),n=n.substring(0,i));let a=n.indexOf("?");a>=0&&(e.search=n.substring(a),n=n.substring(0,a)),n&&(e.pathname=n)}return e}function fw(n,e,i,a={}){let{window:l=document.defaultView,v5Compat:c=!1}=a,h=l.history,m="POP",p=null,g=v();g==null&&(g=0,h.replaceState({...h.state,idx:g},""));function v(){return(h.state||{idx:null}).idx}function _(){m="POP";let D=v(),A=D==null?null:D-g;g=D,p&&p({action:m,location:O.location,delta:A})}function b(D,A){m="PUSH";let H=of(O.location,D,A);g=v()+1;let F=e_(H,g),ee=O.createHref(H);try{h.pushState(F,"",ee)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;l.location.assign(ee)}c&&p&&p({action:m,location:O.location,delta:1})}function C(D,A){m="REPLACE";let H=of(O.location,D,A);g=v();let F=e_(H,g),ee=O.createHref(H);h.replaceState(F,"",ee),c&&p&&p({action:m,location:O.location,delta:0})}function w(D){return mw(D)}let O={get action(){return m},get location(){return n(l,h)},listen(D){if(p)throw new Error("A history only accepts one active listener");return l.addEventListener(Jv,_),p=D,()=>{l.removeEventListener(Jv,_),p=null}},createHref(D){return e(l,D)},createURL:w,encodeLocation(D){let A=w(D);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:b,replace:C,go(D){return h.go(D)}};return O}function mw(n,e=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),Ke(i,"No window.location.(origin|href) available to create URL");let a=typeof n=="string"?n:fl(n);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=i+a),new URL(a,i)}function Rb(n,e,i="/"){return pw(n,e,i,!1)}function pw(n,e,i,a){let l=typeof e=="string"?qa(e):e,c=ls(l.pathname||"/",i);if(c==null)return null;let h=jb(n);gw(h);let m=null;for(let p=0;m==null&&p<h.length;++p){let g=Tw(c);m=ww(h[p],g,a)}return m}function jb(n,e=[],i=[],a="",l=!1){let c=(h,m,p=l,g)=>{let v={relativePath:g===void 0?h.path||"":g,caseSensitive:h.caseSensitive===!0,childrenIndex:m,route:h};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(a)&&p)return;Ke(v.relativePath.startsWith(a),`Absolute route path "${v.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(a.length)}let _=is([a,v.relativePath]),b=i.concat(v);h.children&&h.children.length>0&&(Ke(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),jb(h.children,e,b,_,p)),!(h.path==null&&!h.index)&&e.push({path:_,score:Cw(_,h.index),routesMeta:b})};return n.forEach((h,m)=>{if(h.path===""||!h.path?.includes("?"))c(h,m);else for(let p of Ob(h.path))c(h,m,!0,p)}),e}function Ob(n){let e=n.split("/");if(e.length===0)return[];let[i,...a]=e,l=i.endsWith("?"),c=i.replace(/\?$/,"");if(a.length===0)return l?[c,""]:[c];let h=Ob(a.join("/")),m=[];return m.push(...h.map(p=>p===""?c:[c,p].join("/"))),l&&m.push(...h),m.map(p=>n.startsWith("/")&&p===""?"/":p)}function gw(n){n.sort((e,i)=>e.score!==i.score?i.score-e.score:xw(e.routesMeta.map(a=>a.childrenIndex),i.routesMeta.map(a=>a.childrenIndex)))}var yw=/^:[\w-]+$/,vw=3,_w=2,bw=1,Sw=10,Ew=-2,t_=n=>n==="*";function Cw(n,e){let i=n.split("/"),a=i.length;return i.some(t_)&&(a+=Ew),e&&(a+=_w),i.filter(l=>!t_(l)).reduce((l,c)=>l+(yw.test(c)?vw:c===""?bw:Sw),a)}function xw(n,e){return n.length===e.length&&n.slice(0,-1).every((a,l)=>a===e[l])?n[n.length-1]-e[e.length-1]:0}function ww(n,e,i=!1){let{routesMeta:a}=n,l={},c="/",h=[];for(let m=0;m<a.length;++m){let p=a[m],g=m===a.length-1,v=c==="/"?e:e.slice(c.length)||"/",_=_c({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},v),b=p.route;if(!_&&g&&i&&!a[a.length-1].route.index&&(_=_c({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!_)return null;Object.assign(l,_.params),h.push({params:l,pathname:is([c,_.pathname]),pathnameBase:Iw(is([c,_.pathnameBase])),route:b}),_.pathnameBase!=="/"&&(c=is([c,_.pathnameBase]))}return h}function _c(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[i,a]=Nw(n.path,n.caseSensitive,n.end),l=e.match(i);if(!l)return null;let c=l[0],h=c.replace(/(.)\/+$/,"$1"),m=l.slice(1);return{params:a.reduce((g,{paramName:v,isOptional:_},b)=>{if(v==="*"){let w=m[b]||"";h=c.slice(0,c.length-w.length).replace(/(.)\/+$/,"$1")}const C=m[b];return _&&!C?g[v]=void 0:g[v]=(C||"").replace(/%2F/g,"/"),g},{}),pathname:c,pathnameBase:h,pattern:n}}function Nw(n,e=!1,i=!0){fn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let a=[],l="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,p)=>(a.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(a.push({paramName:"*"}),l+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?l+="\\/*$":n!==""&&n!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),a]}function Tw(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ls(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let i=e.endsWith("/")?e.length-1:e.length,a=n.charAt(i);return a&&a!=="/"?null:n.slice(i)||"/"}var Aw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rw=n=>Aw.test(n);function jw(n,e="/"){let{pathname:i,search:a="",hash:l=""}=typeof n=="string"?qa(n):n,c;if(i)if(Rw(i))c=i;else{if(i.includes("//")){let h=i;i=i.replace(/\/\/+/g,"/"),fn(!1,`Pathnames cannot have embedded double slashes - normalizing ${h} -> ${i}`)}i.startsWith("/")?c=n_(i.substring(1),"/"):c=n_(i,e)}else c=e;return{pathname:c,search:Dw(a),hash:kw(l)}}function n_(n,e){let i=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(l=>{l===".."?i.length>1&&i.pop():l!=="."&&i.push(l)}),i.length>1?i.join("/"):"/"}function qh(n,e,i,a){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ow(n){return n.filter((e,i)=>i===0||e.route.path&&e.route.path.length>0)}function Mf(n){let e=Ow(n);return e.map((i,a)=>a===e.length-1?i.pathname:i.pathnameBase)}function Lf(n,e,i,a=!1){let l;typeof n=="string"?l=qa(n):(l={...n},Ke(!l.pathname||!l.pathname.includes("?"),qh("?","pathname","search",l)),Ke(!l.pathname||!l.pathname.includes("#"),qh("#","pathname","hash",l)),Ke(!l.search||!l.search.includes("#"),qh("#","search","hash",l)));let c=n===""||l.pathname==="",h=c?"/":l.pathname,m;if(h==null)m=i;else{let _=e.length-1;if(!a&&h.startsWith("..")){let b=h.split("/");for(;b[0]==="..";)b.shift(),_-=1;l.pathname=b.join("/")}m=_>=0?e[_]:"/"}let p=jw(l,m),g=h&&h!=="/"&&h.endsWith("/"),v=(c||h===".")&&i.endsWith("/");return!p.pathname.endsWith("/")&&(g||v)&&(p.pathname+="/"),p}var is=n=>n.join("/").replace(/\/\/+/g,"/"),Iw=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Dw=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,kw=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Mw(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function Lw(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ib=["POST","PUT","PATCH","DELETE"];new Set(Ib);var Uw=["GET",...Ib];new Set(Uw);var Va=E.createContext(null);Va.displayName="DataRouter";var Kc=E.createContext(null);Kc.displayName="DataRouterState";E.createContext(!1);var Db=E.createContext({isTransitioning:!1});Db.displayName="ViewTransition";var zw=E.createContext(new Map);zw.displayName="Fetchers";var Pw=E.createContext(null);Pw.displayName="Await";var gn=E.createContext(null);gn.displayName="Navigation";var Nl=E.createContext(null);Nl.displayName="Location";var yn=E.createContext({outlet:null,matches:[],isDataRoute:!1});yn.displayName="Route";var Uf=E.createContext(null);Uf.displayName="RouteError";function Bw(n,{relative:e}={}){Ke(Ga(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:a}=E.useContext(gn),{hash:l,pathname:c,search:h}=Tl(n,{relative:e}),m=c;return i!=="/"&&(m=c==="/"?i:is([i,c])),a.createHref({pathname:m,search:h,hash:l})}function Ga(){return E.useContext(Nl)!=null}function Nn(){return Ke(Ga(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(Nl).location}var kb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Mb(n){E.useContext(gn).static||E.useLayoutEffect(n)}function qt(){let{isDataRoute:n}=E.useContext(yn);return n?tN():Hw()}function Hw(){Ke(Ga(),"useNavigate() may be used only in the context of a <Router> component.");let n=E.useContext(Va),{basename:e,navigator:i}=E.useContext(gn),{matches:a}=E.useContext(yn),{pathname:l}=Nn(),c=JSON.stringify(Mf(a)),h=E.useRef(!1);return Mb(()=>{h.current=!0}),E.useCallback((p,g={})=>{if(fn(h.current,kb),!h.current)return;if(typeof p=="number"){i.go(p);return}let v=Lf(p,JSON.parse(c),l,g.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:is([e,v.pathname])),(g.replace?i.replace:i.push)(v,g.state,g)},[e,i,c,l,n])}var qw=E.createContext(null);function Vw(n){let e=E.useContext(yn).outlet;return E.useMemo(()=>e&&E.createElement(qw.Provider,{value:n},e),[e,n])}function Lb(){let{matches:n}=E.useContext(yn),e=n[n.length-1];return e?e.params:{}}function Tl(n,{relative:e}={}){let{matches:i}=E.useContext(yn),{pathname:a}=Nn(),l=JSON.stringify(Mf(i));return E.useMemo(()=>Lf(n,JSON.parse(l),a,e==="path"),[n,l,a,e])}function Gw(n,e){return Ub(n,e)}function Ub(n,e,i,a,l){Ke(Ga(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=E.useContext(gn),{matches:h}=E.useContext(yn),m=h[h.length-1],p=m?m.params:{},g=m?m.pathname:"/",v=m?m.pathnameBase:"/",_=m&&m.route;{let H=_&&_.path||"";zb(g,!_||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let b=Nn(),C;if(e){let H=typeof e=="string"?qa(e):e;Ke(v==="/"||H.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${H.pathname}" was given in the \`location\` prop.`),C=H}else C=b;let w=C.pathname||"/",O=w;if(v!=="/"){let H=v.replace(/^\//,"").split("/");O="/"+w.replace(/^\//,"").split("/").slice(H.length).join("/")}let D=Rb(n,{pathname:O});fn(_||D!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),fn(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=Ww(D&&D.map(H=>Object.assign({},H,{params:Object.assign({},p,H.params),pathname:is([v,c.encodeLocation?c.encodeLocation(H.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?v:is([v,c.encodeLocation?c.encodeLocation(H.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathnameBase])})),h,i,a,l);return e&&A?E.createElement(Nl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},A):A}function Fw(){let n=eN(),e=Mw(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),i=n instanceof Error?n.stack:null,a="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:a},c={padding:"2px 4px",backgroundColor:a},h=null;return console.error("Error handled by React Router default ErrorBoundary:",n),h=E.createElement(E.Fragment,null,E.createElement("p",null," Hey developer "),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:c},"ErrorBoundary")," or"," ",E.createElement("code",{style:c},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),i?E.createElement("pre",{style:l},i):null,h)}var Yw=E.createElement(Fw,null),Qw=class extends E.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?E.createElement(yn.Provider,{value:this.props.routeContext},E.createElement(Uf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Kw({routeContext:n,match:e,children:i}){let a=E.useContext(Va);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),E.createElement(yn.Provider,{value:n},i)}function Ww(n,e=[],i=null,a=null,l=null){if(n==null){if(!i)return null;if(i.errors)n=i.matches;else if(e.length===0&&!i.initialized&&i.matches.length>0)n=i.matches;else return null}let c=n,h=i?.errors;if(h!=null){let v=c.findIndex(_=>_.route.id&&h?.[_.route.id]!==void 0);Ke(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),c=c.slice(0,Math.min(c.length,v+1))}let m=!1,p=-1;if(i)for(let v=0;v<c.length;v++){let _=c[v];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(p=v),_.route.id){let{loaderData:b,errors:C}=i,w=_.route.loader&&!b.hasOwnProperty(_.route.id)&&(!C||C[_.route.id]===void 0);if(_.route.lazy||w){m=!0,p>=0?c=c.slice(0,p+1):c=[c[0]];break}}}let g=i&&a?(v,_)=>{a(v,{location:i.location,params:i.matches?.[0]?.params??{},unstable_pattern:Lw(i.matches),errorInfo:_})}:void 0;return c.reduceRight((v,_,b)=>{let C,w=!1,O=null,D=null;i&&(C=h&&_.route.id?h[_.route.id]:void 0,O=_.route.errorElement||Yw,m&&(p<0&&b===0?(zb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,D=null):p===b&&(w=!0,D=_.route.hydrateFallbackElement||null)));let A=e.concat(c.slice(0,b+1)),H=()=>{let F;return C?F=O:w?F=D:_.route.Component?F=E.createElement(_.route.Component,null):_.route.element?F=_.route.element:F=v,E.createElement(Kw,{match:_,routeContext:{outlet:v,matches:A,isDataRoute:i!=null},children:F})};return i&&(_.route.ErrorBoundary||_.route.errorElement||b===0)?E.createElement(Qw,{location:i.location,revalidation:i.revalidation,component:O,error:C,children:H(),routeContext:{outlet:null,matches:A,isDataRoute:!0},onError:g}):H()},null)}function zf(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $w(n){let e=E.useContext(Va);return Ke(e,zf(n)),e}function Xw(n){let e=E.useContext(Kc);return Ke(e,zf(n)),e}function Zw(n){let e=E.useContext(yn);return Ke(e,zf(n)),e}function Pf(n){let e=Zw(n),i=e.matches[e.matches.length-1];return Ke(i.route.id,`${n} can only be used on routes that contain a unique "id"`),i.route.id}function Jw(){return Pf("useRouteId")}function eN(){let n=E.useContext(Uf),e=Xw("useRouteError"),i=Pf("useRouteError");return n!==void 0?n:e.errors?.[i]}function tN(){let{router:n}=$w("useNavigate"),e=Pf("useNavigate"),i=E.useRef(!1);return Mb(()=>{i.current=!0}),E.useCallback(async(l,c={})=>{fn(i.current,kb),i.current&&(typeof l=="number"?await n.navigate(l):await n.navigate(l,{fromRouteId:e,...c}))},[n,e])}var s_={};function zb(n,e,i){!e&&!s_[n]&&(s_[n]=!0,fn(!1,i))}E.memo(nN);function nN({routes:n,future:e,state:i,unstable_onError:a}){return Ub(n,void 0,i,a,e)}function Ia({to:n,replace:e,state:i,relative:a}){Ke(Ga(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=E.useContext(gn);fn(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=E.useContext(yn),{pathname:h}=Nn(),m=qt(),p=Lf(n,Mf(c),h,a==="path"),g=JSON.stringify(p);return E.useEffect(()=>{m(JSON.parse(g),{replace:e,state:i,relative:a})},[m,g,a,e,i]),null}function sN(n){return Vw(n.context)}function ut(n){Ke(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function iN({basename:n="/",children:e=null,location:i,navigationType:a="POP",navigator:l,static:c=!1,unstable_useTransitions:h}){Ke(!Ga(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=n.replace(/^\/*/,"/"),p=E.useMemo(()=>({basename:m,navigator:l,static:c,unstable_useTransitions:h,future:{}}),[m,l,c,h]);typeof i=="string"&&(i=qa(i));let{pathname:g="/",search:v="",hash:_="",state:b=null,key:C="default"}=i,w=E.useMemo(()=>{let O=ls(g,m);return O==null?null:{location:{pathname:O,search:v,hash:_,state:b,key:C},navigationType:a}},[m,g,v,_,b,C,a]);return fn(w!=null,`<Router basename="${m}"> is not able to match the URL "${g}${v}${_}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:E.createElement(gn.Provider,{value:p},E.createElement(Nl.Provider,{children:e,value:w}))}function aN({children:n,location:e}){return Gw(cf(n),e)}function cf(n,e=[]){let i=[];return E.Children.forEach(n,(a,l)=>{if(!E.isValidElement(a))return;let c=[...e,l];if(a.type===E.Fragment){i.push.apply(i,cf(a.props.children,c));return}Ke(a.type===ut,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ke(!a.props.index||!a.props.children,"An index route cannot have child routes.");let h={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(h.children=cf(a.props.children,c)),i.push(h)}),i}var hc="get",fc="application/x-www-form-urlencoded";function Wc(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function rN(n){return Wc(n)&&n.tagName.toLowerCase()==="button"}function lN(n){return Wc(n)&&n.tagName.toLowerCase()==="form"}function oN(n){return Wc(n)&&n.tagName.toLowerCase()==="input"}function cN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function uN(n,e){return n.button===0&&(!e||e==="_self")&&!cN(n)}var lc=null;function dN(){if(lc===null)try{new FormData(document.createElement("form"),0),lc=!1}catch{lc=!0}return lc}var hN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Vh(n){return n!=null&&!hN.has(n)?(fn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${fc}"`),null):n}function fN(n,e){let i,a,l,c,h;if(lN(n)){let m=n.getAttribute("action");a=m?ls(m,e):null,i=n.getAttribute("method")||hc,l=Vh(n.getAttribute("enctype"))||fc,c=new FormData(n)}else if(rN(n)||oN(n)&&(n.type==="submit"||n.type==="image")){let m=n.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||m.getAttribute("action");if(a=p?ls(p,e):null,i=n.getAttribute("formmethod")||m.getAttribute("method")||hc,l=Vh(n.getAttribute("formenctype"))||Vh(m.getAttribute("enctype"))||fc,c=new FormData(m,n),!dN()){let{name:g,type:v,value:_}=n;if(v==="image"){let b=g?`${g}.`:"";c.append(`${b}x`,"0"),c.append(`${b}y`,"0")}else g&&c.append(g,_)}}else{if(Wc(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=hc,a=null,l=fc,h=n}return c&&l==="text/plain"&&(h=c,c=void 0),{action:a,method:i.toLowerCase(),encType:l,formData:c,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Bf(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function mN(n,e,i){let a=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return a.pathname==="/"?a.pathname=`_root.${i}`:e&&ls(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${i}`,a}async function pN(n,e){if(n.id in e)return e[n.id];try{let i=await import(n.module);return e[n.id]=i,i}catch(i){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function gN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function yN(n,e,i){let a=await Promise.all(n.map(async l=>{let c=e.routes[l.route.id];if(c){let h=await pN(c,i);return h.links?h.links():[]}return[]}));return SN(a.flat(1).filter(gN).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function i_(n,e,i,a,l,c){let h=(p,g)=>i[g]?p.route.id!==i[g].route.id:!0,m=(p,g)=>i[g].pathname!==p.pathname||i[g].route.path?.endsWith("*")&&i[g].params["*"]!==p.params["*"];return c==="assets"?e.filter((p,g)=>h(p,g)||m(p,g)):c==="data"?e.filter((p,g)=>{let v=a.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(h(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let _=p.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function vN(n,e,{includeHydrateFallback:i}={}){return _N(n.map(a=>{let l=e.routes[a.route.id];if(!l)return[];let c=[l.module];return l.clientActionModule&&(c=c.concat(l.clientActionModule)),l.clientLoaderModule&&(c=c.concat(l.clientLoaderModule)),i&&l.hydrateFallbackModule&&(c=c.concat(l.hydrateFallbackModule)),l.imports&&(c=c.concat(l.imports)),c}).flat(1))}function _N(n){return[...new Set(n)]}function bN(n){let e={},i=Object.keys(n).sort();for(let a of i)e[a]=n[a];return e}function SN(n,e){let i=new Set;return new Set(e),n.reduce((a,l)=>{let c=JSON.stringify(bN(l));return i.has(c)||(i.add(c),a.push({key:c,link:l})),a},[])}function Pb(){let n=E.useContext(Va);return Bf(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function EN(){let n=E.useContext(Kc);return Bf(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Hf=E.createContext(void 0);Hf.displayName="FrameworkContext";function Bb(){let n=E.useContext(Hf);return Bf(n,"You must render this element inside a <HydratedRouter> element"),n}function CN(n,e){let i=E.useContext(Hf),[a,l]=E.useState(!1),[c,h]=E.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:v,onTouchStart:_}=e,b=E.useRef(null);E.useEffect(()=>{if(n==="render"&&h(!0),n==="viewport"){let O=A=>{A.forEach(H=>{h(H.isIntersecting)})},D=new IntersectionObserver(O,{threshold:.5});return b.current&&D.observe(b.current),()=>{D.disconnect()}}},[n]),E.useEffect(()=>{if(a){let O=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(O)}}},[a]);let C=()=>{l(!0)},w=()=>{l(!1),h(!1)};return i?n!=="intent"?[c,b,{}]:[c,b,{onFocus:Zr(m,C),onBlur:Zr(p,w),onMouseEnter:Zr(g,C),onMouseLeave:Zr(v,w),onTouchStart:Zr(_,C)}]:[!1,b,{}]}function Zr(n,e){return i=>{n&&n(i),i.defaultPrevented||e(i)}}function xN({page:n,...e}){let{router:i}=Pb(),a=E.useMemo(()=>Rb(i.routes,n,i.basename),[i.routes,n,i.basename]);return a?E.createElement(NN,{page:n,matches:a,...e}):null}function wN(n){let{manifest:e,routeModules:i}=Bb(),[a,l]=E.useState([]);return E.useEffect(()=>{let c=!1;return yN(n,e,i).then(h=>{c||l(h)}),()=>{c=!0}},[n,e,i]),a}function NN({page:n,matches:e,...i}){let a=Nn(),{manifest:l,routeModules:c}=Bb(),{basename:h}=Pb(),{loaderData:m,matches:p}=EN(),g=E.useMemo(()=>i_(n,e,p,l,a,"data"),[n,e,p,l,a]),v=E.useMemo(()=>i_(n,e,p,l,a,"assets"),[n,e,p,l,a]),_=E.useMemo(()=>{if(n===a.pathname+a.search+a.hash)return[];let w=new Set,O=!1;if(e.forEach(A=>{let H=l.routes[A.route.id];!H||!H.hasLoader||(!g.some(F=>F.route.id===A.route.id)&&A.route.id in m&&c[A.route.id]?.shouldRevalidate||H.hasClientLoader?O=!0:w.add(A.route.id))}),w.size===0)return[];let D=mN(n,h,"data");return O&&w.size>0&&D.searchParams.set("_routes",e.filter(A=>w.has(A.route.id)).map(A=>A.route.id).join(",")),[D.pathname+D.search]},[h,m,a,l,g,e,n,c]),b=E.useMemo(()=>vN(v,l),[v,l]),C=wN(v);return E.createElement(E.Fragment,null,_.map(w=>E.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...i})),b.map(w=>E.createElement("link",{key:w,rel:"modulepreload",href:w,...i})),C.map(({key:w,link:O})=>E.createElement("link",{key:w,nonce:i.nonce,...O})))}function TN(...n){return e=>{n.forEach(i=>{typeof i=="function"?i(e):i!=null&&(i.current=e)})}}var Hb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Hb&&(window.__reactRouterVersion="7.10.1")}catch{}function AN({basename:n,children:e,unstable_useTransitions:i,window:a}){let l=E.useRef();l.current==null&&(l.current=dw({window:a,v5Compat:!0}));let c=l.current,[h,m]=E.useState({action:c.action,location:c.location}),p=E.useCallback(g=>{i===!1?m(g):E.startTransition(()=>m(g))},[i]);return E.useLayoutEffect(()=>c.listen(p),[c,p]),E.createElement(iN,{basename:n,children:e,location:h.location,navigationType:h.action,navigator:c,unstable_useTransitions:i===!0})}var qb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,We=E.forwardRef(function({onClick:e,discover:i="render",prefetch:a="none",relative:l,reloadDocument:c,replace:h,state:m,target:p,to:g,preventScrollReset:v,viewTransition:_,...b},C){let{basename:w,unstable_useTransitions:O}=E.useContext(gn),D=typeof g=="string"&&qb.test(g),A,H=!1;if(typeof g=="string"&&D&&(A=g,Hb))try{let B=new URL(window.location.href),te=g.startsWith("//")?new URL(B.protocol+g):new URL(g),oe=ls(te.pathname,w);te.origin===B.origin&&oe!=null?g=oe+te.search+te.hash:H=!0}catch{fn(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let F=Bw(g,{relative:l}),[ee,K,X]=CN(a,b),Y=ON(g,{replace:h,state:m,target:p,preventScrollReset:v,relative:l,viewTransition:_,unstable_useTransitions:O});function $(B){e&&e(B),B.defaultPrevented||Y(B)}let R=E.createElement("a",{...b,...X,href:A||F,onClick:H||c?e:$,ref:TN(C,K),target:p,"data-discover":!D&&i==="render"?"true":void 0});return ee&&!D?E.createElement(E.Fragment,null,R,E.createElement(xN,{page:F})):R});We.displayName="Link";var bc=E.forwardRef(function({"aria-current":e="page",caseSensitive:i=!1,className:a="",end:l=!1,style:c,to:h,viewTransition:m,children:p,...g},v){let _=Tl(h,{relative:g.relative}),b=Nn(),C=E.useContext(Kc),{navigator:w,basename:O}=E.useContext(gn),D=C!=null&&LN(_)&&m===!0,A=w.encodeLocation?w.encodeLocation(_).pathname:_.pathname,H=b.pathname,F=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;i||(H=H.toLowerCase(),F=F?F.toLowerCase():null,A=A.toLowerCase()),F&&O&&(F=ls(F,O)||F);const ee=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let K=H===A||!l&&H.startsWith(A)&&H.charAt(ee)==="/",X=F!=null&&(F===A||!l&&F.startsWith(A)&&F.charAt(A.length)==="/"),Y={isActive:K,isPending:X,isTransitioning:D},$=K?e:void 0,R;typeof a=="function"?R=a(Y):R=[a,K?"active":null,X?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let B=typeof c=="function"?c(Y):c;return E.createElement(We,{...g,"aria-current":$,className:R,ref:v,style:B,to:h,viewTransition:m},typeof p=="function"?p(Y):p)});bc.displayName="NavLink";var RN=E.forwardRef(({discover:n="render",fetcherKey:e,navigate:i,reloadDocument:a,replace:l,state:c,method:h=hc,action:m,onSubmit:p,relative:g,preventScrollReset:v,viewTransition:_,...b},C)=>{let{unstable_useTransitions:w}=E.useContext(gn),O=kN(),D=MN(m,{relative:g}),A=h.toLowerCase()==="get"?"get":"post",H=typeof m=="string"&&qb.test(m),F=ee=>{if(p&&p(ee),ee.defaultPrevented)return;ee.preventDefault();let K=ee.nativeEvent.submitter,X=K?.getAttribute("formmethod")||h,Y=()=>O(K||ee.currentTarget,{fetcherKey:e,method:X,navigate:i,replace:l,state:c,relative:g,preventScrollReset:v,viewTransition:_});w&&i!==!1?E.startTransition(()=>Y()):Y()};return E.createElement("form",{ref:C,method:A,action:D,onSubmit:a?p:F,...b,"data-discover":!H&&n==="render"?"true":void 0})});RN.displayName="Form";function jN(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Vb(n){let e=E.useContext(Va);return Ke(e,jN(n)),e}function ON(n,{target:e,replace:i,state:a,preventScrollReset:l,relative:c,viewTransition:h,unstable_useTransitions:m}={}){let p=qt(),g=Nn(),v=Tl(n,{relative:c});return E.useCallback(_=>{if(uN(_,e)){_.preventDefault();let b=i!==void 0?i:fl(g)===fl(v),C=()=>p(n,{replace:b,state:a,preventScrollReset:l,relative:c,viewTransition:h});m?E.startTransition(()=>C()):C()}},[g,p,v,i,a,e,n,l,c,h,m])}var IN=0,DN=()=>`__${String(++IN)}__`;function kN(){let{router:n}=Vb("useSubmit"),{basename:e}=E.useContext(gn),i=Jw(),a=n.fetch,l=n.navigate;return E.useCallback(async(c,h={})=>{let{action:m,method:p,encType:g,formData:v,body:_}=fN(c,e);if(h.navigate===!1){let b=h.fetcherKey||DN();await a(b,i,h.action||m,{preventScrollReset:h.preventScrollReset,formData:v,body:_,formMethod:h.method||p,formEncType:h.encType||g,flushSync:h.flushSync})}else await l(h.action||m,{preventScrollReset:h.preventScrollReset,formData:v,body:_,formMethod:h.method||p,formEncType:h.encType||g,replace:h.replace,state:h.state,fromRouteId:i,flushSync:h.flushSync,viewTransition:h.viewTransition})},[a,l,e,i])}function MN(n,{relative:e}={}){let{basename:i}=E.useContext(gn),a=E.useContext(yn);Ke(a,"useFormAction must be used inside a RouteContext");let[l]=a.matches.slice(-1),c={...Tl(n||".",{relative:e})},h=Nn();if(n==null){c.search=h.search;let m=new URLSearchParams(c.search),p=m.getAll("index");if(p.some(v=>v==="")){m.delete("index"),p.filter(_=>_).forEach(_=>m.append("index",_));let v=m.toString();c.search=v?`?${v}`:""}}return(!n||n===".")&&l.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(c.pathname=c.pathname==="/"?i:is([i,c.pathname])),fl(c)}function LN(n,{relative:e}={}){let i=E.useContext(Db);Ke(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Vb("useViewTransitionState"),l=Tl(n,{relative:e});if(!i.isTransitioning)return!1;let c=ls(i.currentLocation.pathname,a)||i.currentLocation.pathname,h=ls(i.nextLocation.pathname,a)||i.nextLocation.pathname;return _c(l.pathname,h)!=null||_c(l.pathname,c)!=null}const UN=()=>{};var a_={};const Gb={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const Q=function(n,e){if(!n)throw Fa(e)},Fa=function(n){return new Error("Firebase Database ("+Gb.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};const Fb=function(n){const e=[];let i=0;for(let a=0;a<n.length;a++){let l=n.charCodeAt(a);l<128?e[i++]=l:l<2048?(e[i++]=l>>6|192,e[i++]=l&63|128):(l&64512)===55296&&a+1<n.length&&(n.charCodeAt(a+1)&64512)===56320?(l=65536+((l&1023)<<10)+(n.charCodeAt(++a)&1023),e[i++]=l>>18|240,e[i++]=l>>12&63|128,e[i++]=l>>6&63|128,e[i++]=l&63|128):(e[i++]=l>>12|224,e[i++]=l>>6&63|128,e[i++]=l&63|128)}return e},zN=function(n){const e=[];let i=0,a=0;for(;i<n.length;){const l=n[i++];if(l<128)e[a++]=String.fromCharCode(l);else if(l>191&&l<224){const c=n[i++];e[a++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=n[i++],h=n[i++],m=n[i++],p=((l&7)<<18|(c&63)<<12|(h&63)<<6|m&63)-65536;e[a++]=String.fromCharCode(55296+(p>>10)),e[a++]=String.fromCharCode(56320+(p&1023))}else{const c=n[i++],h=n[i++];e[a++]=String.fromCharCode((l&15)<<12|(c&63)<<6|h&63)}}return e.join("")},qf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let l=0;l<n.length;l+=3){const c=n[l],h=l+1<n.length,m=h?n[l+1]:0,p=l+2<n.length,g=p?n[l+2]:0,v=c>>2,_=(c&3)<<4|m>>4;let b=(m&15)<<2|g>>6,C=g&63;p||(C=64,h||(b=64)),a.push(i[v],i[_],i[b],i[C])}return a.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Fb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):zN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let l=0;l<n.length;){const c=i[n.charAt(l++)],m=l<n.length?i[n.charAt(l)]:0;++l;const g=l<n.length?i[n.charAt(l)]:64;++l;const _=l<n.length?i[n.charAt(l)]:64;if(++l,c==null||m==null||g==null||_==null)throw new PN;const b=c<<2|m>>4;if(a.push(b),g!==64){const C=m<<4&240|g>>2;if(a.push(C),_!==64){const w=g<<6&192|_;a.push(w)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class PN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Yb=function(n){const e=Fb(n);return qf.encodeByteArray(e,!0)},Sc=function(n){return Yb(n).replace(/\./g,"")},Ec=function(n){try{return qf.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function BN(n){return Qb(void 0,n)}function Qb(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const i=e;return new Date(i.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const i in e)!e.hasOwnProperty(i)||!HN(i)||(n[i]=Qb(n[i],e[i]));return n}function HN(n){return n!=="__proto__"}function qN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const VN=()=>qN().__FIREBASE_DEFAULTS__,GN=()=>{if(typeof process>"u"||typeof a_>"u")return;const n=a_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},FN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Ec(n[1]);return e&&JSON.parse(e)},Vf=()=>{try{return UN()||VN()||GN()||FN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Kb=n=>{var e,i;return(i=(e=Vf())===null||e===void 0?void 0:e.emulatorHosts)===null||i===void 0?void 0:i[n]},YN=n=>{const e=Kb(n);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),a]:[e.substring(0,i),a]},Wb=()=>{var n;return(n=Vf())===null||n===void 0?void 0:n.config},$b=n=>{var e;return(e=Vf())===null||e===void 0?void 0:e[`_${n}`]};class In{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,a)=>{i?this.reject(i):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,a))}}}function Ya(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Xb(n){return(await fetch(n,{credentials:"include"})).ok}function QN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},a=e||"demo-project",l=n.iat||0,c=n.sub||n.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Sc(JSON.stringify(i)),Sc(JSON.stringify(h)),""].join(".")}const rl={};function KN(){const n={prod:[],emulator:[]};for(const e of Object.keys(rl))rl[e]?n.emulator.push(e):n.prod.push(e);return n}function WN(n){let e=document.getElementById(n),i=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),i=!0),{created:i,element:e}}let r_=!1;function Zb(n,e){if(typeof window>"u"||typeof document>"u"||!Ya(window.location.host)||rl[n]===e||rl[n]||r_)return;rl[n]=e;function i(b){return`__firebase__banner__${b}`}const a="__firebase__banner",c=KN().prod.length>0;function h(){const b=document.getElementById(a);b&&b.remove()}function m(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function p(b,C){b.setAttribute("width","24"),b.setAttribute("id",C),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{r_=!0,h()},b}function v(b,C){b.setAttribute("id",C),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function _(){const b=WN(a),C=i("text"),w=document.getElementById(C)||document.createElement("span"),O=i("learnmore"),D=document.getElementById(O)||document.createElement("a"),A=i("preprendIcon"),H=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const F=b.element;m(F),v(D,O);const ee=g();p(H,A),F.append(H,w,D,ee),document.body.appendChild(F)}c?(w.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}function It(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Gf(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(It())}function $N(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function XN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Jb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZN(){const n=It();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function JN(){return Gb.NODE_ADMIN===!0}function e1(){try{return typeof indexedDB=="object"}catch{return!1}}function t1(){return new Promise((n,e)=>{try{let i=!0;const a="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(a);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(a),n(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{var c;e(((c=l.error)===null||c===void 0?void 0:c.message)||"")}}catch(i){e(i)}})}const n1="FirebaseError";class Zs extends Error{constructor(e,i,a){super(i),this.code=e,this.customData=a,this.name=n1,Object.setPrototypeOf(this,Zs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Al.prototype.create)}}class Al{constructor(e,i,a){this.service=e,this.serviceName=i,this.errors=a}create(e,...i){const a=i[0]||{},l=`${this.service}/${e}`,c=this.errors[e],h=c?s1(c,a):"Error",m=`${this.serviceName}: ${h} (${l}).`;return new Zs(l,m,a)}}function s1(n,e){return n.replace(i1,(i,a)=>{const l=e[a];return l!=null?String(l):`<${a}?>`})}const i1=/\{\$([^}]+)}/g;function ml(n){return JSON.parse(n)}function dt(n){return JSON.stringify(n)}const e0=function(n){let e={},i={},a={},l="";try{const c=n.split(".");e=ml(Ec(c[0])||""),i=ml(Ec(c[1])||""),l=c[2],a=i.d||{},delete i.d}catch{}return{header:e,claims:i,data:a,signature:l}},a1=function(n){const e=e0(n),i=e.claims;return!!i&&typeof i=="object"&&i.hasOwnProperty("iat")},r1=function(n){const e=e0(n).claims;return typeof e=="object"&&e.admin===!0};function Mn(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Da(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function Cc(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function xc(n,e,i){const a={};for(const l in n)Object.prototype.hasOwnProperty.call(n,l)&&(a[l]=e.call(i,n[l],l,n));return a}function Ai(n,e){if(n===e)return!0;const i=Object.keys(n),a=Object.keys(e);for(const l of i){if(!a.includes(l))return!1;const c=n[l],h=e[l];if(l_(c)&&l_(h)){if(!Ai(c,h))return!1}else if(c!==h)return!1}for(const l of a)if(!i.includes(l))return!1;return!0}function l_(n){return n!==null&&typeof n=="object"}function Qa(n){const e=[];for(const[i,a]of Object.entries(n))Array.isArray(a)?a.forEach(l=>{e.push(encodeURIComponent(i)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(i)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function il(n){const e={};return n.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[l,c]=a.split("=");e[decodeURIComponent(l)]=decodeURIComponent(c)}}),e}function al(n){const e=n.indexOf("?");if(!e)return"";const i=n.indexOf("#",e);return n.substring(e,i>0?i:void 0)}class l1{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,i){i||(i=0);const a=this.W_;if(typeof e=="string")for(let _=0;_<16;_++)a[_]=e.charCodeAt(i)<<24|e.charCodeAt(i+1)<<16|e.charCodeAt(i+2)<<8|e.charCodeAt(i+3),i+=4;else for(let _=0;_<16;_++)a[_]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i+=4;for(let _=16;_<80;_++){const b=a[_-3]^a[_-8]^a[_-14]^a[_-16];a[_]=(b<<1|b>>>31)&4294967295}let l=this.chain_[0],c=this.chain_[1],h=this.chain_[2],m=this.chain_[3],p=this.chain_[4],g,v;for(let _=0;_<80;_++){_<40?_<20?(g=m^c&(h^m),v=1518500249):(g=c^h^m,v=1859775393):_<60?(g=c&h|m&(c|h),v=2400959708):(g=c^h^m,v=3395469782);const b=(l<<5|l>>>27)+g+p+v+a[_]&4294967295;p=m,m=h,h=(c<<30|c>>>2)&4294967295,c=l,l=b}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+m&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295}update(e,i){if(e==null)return;i===void 0&&(i=e.length);const a=i-this.blockSize;let l=0;const c=this.buf_;let h=this.inbuf_;for(;l<i;){if(h===0)for(;l<=a;)this.compress_(e,l),l+=this.blockSize;if(typeof e=="string"){for(;l<i;)if(c[h]=e.charCodeAt(l),++h,++l,h===this.blockSize){this.compress_(c),h=0;break}}else for(;l<i;)if(c[h]=e[l],++h,++l,h===this.blockSize){this.compress_(c),h=0;break}}this.inbuf_=h,this.total_+=i}digest(){const e=[];let i=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let l=this.blockSize-1;l>=56;l--)this.buf_[l]=i&255,i/=256;this.compress_(this.buf_);let a=0;for(let l=0;l<5;l++)for(let c=24;c>=0;c-=8)e[a]=this.chain_[l]>>c&255,++a;return e}}function o1(n,e){const i=new c1(n,e);return i.subscribe.bind(i)}class c1{constructor(e,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(i=>{i.next(e)})}error(e){this.forEachObserver(i=>{i.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,i,a){let l;if(e===void 0&&i===void 0&&a===void 0)throw new Error("Missing Observer.");u1(e,["next","error","complete"])?l=e:l={next:e,error:i,complete:a},l.next===void 0&&(l.next=Gh),l.error===void 0&&(l.error=Gh),l.complete===void 0&&(l.complete=Gh);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,e)}sendOne(e,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{i(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function u1(n,e){if(typeof n!="object"||n===null)return!1;for(const i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}function Gh(){}function ka(n,e){return`${n} failed: ${e} argument `}const d1=function(n){const e=[];let i=0;for(let a=0;a<n.length;a++){let l=n.charCodeAt(a);if(l>=55296&&l<=56319){const c=l-55296;a++,Q(a<n.length,"Surrogate pair missing trail surrogate.");const h=n.charCodeAt(a)-56320;l=65536+(c<<10)+h}l<128?e[i++]=l:l<2048?(e[i++]=l>>6|192,e[i++]=l&63|128):l<65536?(e[i++]=l>>12|224,e[i++]=l>>6&63|128,e[i++]=l&63|128):(e[i++]=l>>18|240,e[i++]=l>>12&63|128,e[i++]=l>>6&63|128,e[i++]=l&63|128)}return e},$c=function(n){let e=0;for(let i=0;i<n.length;i++){const a=n.charCodeAt(i);a<128?e++:a<2048?e+=2:a>=55296&&a<=56319?(e+=4,i++):e+=3}return e};function _t(n){return n&&n._delegate?n._delegate:n}class Ri{constructor(e,i,a){this.name=e,this.instanceFactory=i,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ei="[DEFAULT]";class h1{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const a=new In;if(this.instancesDeferred.set(i,a),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&a.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){var i;const a=this.normalizeInstanceIdentifier(e?.identifier),l=(i=e?.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(c){if(l)return null;throw c}else{if(l)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(m1(e))try{this.getOrInitializeService({instanceIdentifier:Ei})}catch{}for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const c=this.getOrInitializeService({instanceIdentifier:l});a.resolve(c)}catch{}}}}clearInstance(e=Ei){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ei){return this.instances.has(e)}getOptions(e=Ei){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:a,options:i});for(const[c,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);a===m&&h.resolve(l)}return l}onInit(e,i){var a;const l=this.normalizeInstanceIdentifier(i),c=(a=this.onInitCallbacks.get(l))!==null&&a!==void 0?a:new Set;c.add(e),this.onInitCallbacks.set(l,c);const h=this.instances.get(l);return h&&e(h,l),()=>{c.delete(e)}}invokeOnInitCallbacks(e,i){const a=this.onInitCallbacks.get(i);if(a)for(const l of a)try{l(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:f1(e),options:i}),this.instances.set(e,a),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Ei){return this.component?this.component.multipleInstances?e:Ei:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function f1(n){return n===Ei?void 0:n}function m1(n){return n.instantiationMode==="EAGER"}class p1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new h1(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}var Be;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Be||(Be={}));const g1={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},y1=Be.INFO,v1={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},_1=(n,e,...i)=>{if(e<n.logLevel)return;const a=new Date().toISOString(),l=v1[e];if(l)console[l](`[${a}]  ${n.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ff{constructor(e){this.name=e,this._logLevel=y1,this._logHandler=_1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?g1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const b1=(n,e)=>e.some(i=>n instanceof i);let o_,c_;function S1(){return o_||(o_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function E1(){return c_||(c_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const t0=new WeakMap,uf=new WeakMap,n0=new WeakMap,Fh=new WeakMap,Yf=new WeakMap;function C1(n){const e=new Promise((i,a)=>{const l=()=>{n.removeEventListener("success",c),n.removeEventListener("error",h)},c=()=>{i(qs(n.result)),l()},h=()=>{a(n.error),l()};n.addEventListener("success",c),n.addEventListener("error",h)});return e.then(i=>{i instanceof IDBCursor&&t0.set(i,n)}).catch(()=>{}),Yf.set(e,n),e}function x1(n){if(uf.has(n))return;const e=new Promise((i,a)=>{const l=()=>{n.removeEventListener("complete",c),n.removeEventListener("error",h),n.removeEventListener("abort",h)},c=()=>{i(),l()},h=()=>{a(n.error||new DOMException("AbortError","AbortError")),l()};n.addEventListener("complete",c),n.addEventListener("error",h),n.addEventListener("abort",h)});uf.set(n,e)}let df={get(n,e,i){if(n instanceof IDBTransaction){if(e==="done")return uf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||n0.get(n);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return qs(n[e])},set(n,e,i){return n[e]=i,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function w1(n){df=n(df)}function N1(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const a=n.call(Yh(this),e,...i);return n0.set(a,e.sort?e.sort():[e]),qs(a)}:E1().includes(n)?function(...e){return n.apply(Yh(this),e),qs(t0.get(this))}:function(...e){return qs(n.apply(Yh(this),e))}}function T1(n){return typeof n=="function"?N1(n):(n instanceof IDBTransaction&&x1(n),b1(n,S1())?new Proxy(n,df):n)}function qs(n){if(n instanceof IDBRequest)return C1(n);if(Fh.has(n))return Fh.get(n);const e=T1(n);return e!==n&&(Fh.set(n,e),Yf.set(e,n)),e}const Yh=n=>Yf.get(n);function A1(n,e,{blocked:i,upgrade:a,blocking:l,terminated:c}={}){const h=indexedDB.open(n,e),m=qs(h);return a&&h.addEventListener("upgradeneeded",p=>{a(qs(h.result),p.oldVersion,p.newVersion,qs(h.transaction),p)}),i&&h.addEventListener("blocked",p=>i(p.oldVersion,p.newVersion,p)),m.then(p=>{c&&p.addEventListener("close",()=>c()),l&&p.addEventListener("versionchange",g=>l(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const R1=["get","getKey","getAll","getAllKeys","count"],j1=["put","add","delete","clear"],Qh=new Map;function u_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Qh.get(e))return Qh.get(e);const i=e.replace(/FromIndex$/,""),a=e!==i,l=j1.includes(i);if(!(i in(a?IDBIndex:IDBObjectStore).prototype)||!(l||R1.includes(i)))return;const c=async function(h,...m){const p=this.transaction(h,l?"readwrite":"readonly");let g=p.store;return a&&(g=g.index(m.shift())),(await Promise.all([g[i](...m),l&&p.done]))[0]};return Qh.set(e,c),c}w1(n=>({...n,get:(e,i,a)=>u_(e,i)||n.get(e,i,a),has:(e,i)=>!!u_(e,i)||n.has(e,i)}));class O1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(I1(i)){const a=i.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(i=>i).join(" ")}}function I1(n){const e=n.getComponent();return e?.type==="VERSION"}const hf="@firebase/app",d_="0.13.2";const os=new Ff("@firebase/app"),D1="@firebase/app-compat",k1="@firebase/analytics-compat",M1="@firebase/analytics",L1="@firebase/app-check-compat",U1="@firebase/app-check",z1="@firebase/auth",P1="@firebase/auth-compat",B1="@firebase/database",H1="@firebase/data-connect",q1="@firebase/database-compat",V1="@firebase/functions",G1="@firebase/functions-compat",F1="@firebase/installations",Y1="@firebase/installations-compat",Q1="@firebase/messaging",K1="@firebase/messaging-compat",W1="@firebase/performance",$1="@firebase/performance-compat",X1="@firebase/remote-config",Z1="@firebase/remote-config-compat",J1="@firebase/storage",eT="@firebase/storage-compat",tT="@firebase/firestore",nT="@firebase/ai",sT="@firebase/firestore-compat",iT="firebase",aT="11.10.0";const ff="[DEFAULT]",rT={[hf]:"fire-core",[D1]:"fire-core-compat",[M1]:"fire-analytics",[k1]:"fire-analytics-compat",[U1]:"fire-app-check",[L1]:"fire-app-check-compat",[z1]:"fire-auth",[P1]:"fire-auth-compat",[B1]:"fire-rtdb",[H1]:"fire-data-connect",[q1]:"fire-rtdb-compat",[V1]:"fire-fn",[G1]:"fire-fn-compat",[F1]:"fire-iid",[Y1]:"fire-iid-compat",[Q1]:"fire-fcm",[K1]:"fire-fcm-compat",[W1]:"fire-perf",[$1]:"fire-perf-compat",[X1]:"fire-rc",[Z1]:"fire-rc-compat",[J1]:"fire-gcs",[eT]:"fire-gcs-compat",[tT]:"fire-fst",[sT]:"fire-fst-compat",[nT]:"fire-vertex","fire-js":"fire-js",[iT]:"fire-js-all"};const wc=new Map,lT=new Map,mf=new Map;function h_(n,e){try{n.container.addComponent(e)}catch(i){os.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,i)}}function Ma(n){const e=n.name;if(mf.has(e))return os.debug(`There were multiple attempts to register component ${e}.`),!1;mf.set(e,n);for(const i of wc.values())h_(i,n);for(const i of lT.values())h_(i,n);return!0}function Qf(n,e){const i=n.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),n.container.getProvider(e)}function Jt(n){return n==null?!1:n.settings!==void 0}const oT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vs=new Al("app","Firebase",oT);class cT{constructor(e,i,a){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Ri("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vs.create("app-deleted",{appName:this._name})}}const Ka=aT;function s0(n,e={}){let i=n;typeof e!="object"&&(e={name:e});const a=Object.assign({name:ff,automaticDataCollectionEnabled:!0},e),l=a.name;if(typeof l!="string"||!l)throw Vs.create("bad-app-name",{appName:String(l)});if(i||(i=Wb()),!i)throw Vs.create("no-options");const c=wc.get(l);if(c){if(Ai(i,c.options)&&Ai(a,c.config))return c;throw Vs.create("duplicate-app",{appName:l})}const h=new p1(l);for(const p of mf.values())h.addComponent(p);const m=new cT(i,a,h);return wc.set(l,m),m}function i0(n=ff){const e=wc.get(n);if(!e&&n===ff&&Wb())return s0();if(!e)throw Vs.create("no-app",{appName:n});return e}function Gs(n,e,i){var a;let l=(a=rT[n])!==null&&a!==void 0?a:n;i&&(l+=`-${i}`);const c=l.match(/\s|\//),h=e.match(/\s|\//);if(c||h){const m=[`Unable to register library "${l}" with version "${e}":`];c&&m.push(`library name "${l}" contains illegal characters (whitespace or "/")`),c&&h&&m.push("and"),h&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),os.warn(m.join(" "));return}Ma(new Ri(`${l}-version`,()=>({library:l,version:e}),"VERSION"))}const uT="firebase-heartbeat-database",dT=1,pl="firebase-heartbeat-store";let Kh=null;function a0(){return Kh||(Kh=A1(uT,dT,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(pl)}catch(i){console.warn(i)}}}}).catch(n=>{throw Vs.create("idb-open",{originalErrorMessage:n.message})})),Kh}async function hT(n){try{const i=(await a0()).transaction(pl),a=await i.objectStore(pl).get(r0(n));return await i.done,a}catch(e){if(e instanceof Zs)os.warn(e.message);else{const i=Vs.create("idb-get",{originalErrorMessage:e?.message});os.warn(i.message)}}}async function f_(n,e){try{const a=(await a0()).transaction(pl,"readwrite");await a.objectStore(pl).put(e,r0(n)),await a.done}catch(i){if(i instanceof Zs)os.warn(i.message);else{const a=Vs.create("idb-set",{originalErrorMessage:i?.message});os.warn(a.message)}}}function r0(n){return`${n.name}!${n.options.appId}`}const fT=1024,mT=30;class pT{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new yT(i),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,i;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=m_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(h=>h.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>mT){const h=vT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){os.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=m_(),{heartbeatsToSend:a,unsentEntries:l}=gT(this._heartbeatsCache.heartbeats),c=Sc(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=i,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(i){return os.warn(i),""}}}function m_(){return new Date().toISOString().substring(0,10)}function gT(n,e=fT){const i=[];let a=n.slice();for(const l of n){const c=i.find(h=>h.agent===l.agent);if(c){if(c.dates.push(l.date),p_(i)>e){c.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),p_(i)>e){i.pop();break}a=a.slice(1)}return{heartbeatsToSend:i,unsentEntries:a}}class yT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return e1()?t1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await hT(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var i;if(await this._canUseIndexedDBPromise){const l=await this.read();return f_(this.app,{lastSentHeartbeatDate:(i=e.lastSentHeartbeatDate)!==null&&i!==void 0?i:l.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var i;if(await this._canUseIndexedDBPromise){const l=await this.read();return f_(this.app,{lastSentHeartbeatDate:(i=e.lastSentHeartbeatDate)!==null&&i!==void 0?i:l.lastSentHeartbeatDate,heartbeats:[...l.heartbeats,...e.heartbeats]})}else return}}function p_(n){return Sc(JSON.stringify({version:2,heartbeats:n})).length}function vT(n){if(n.length===0)return-1;let e=0,i=n[0].date;for(let a=1;a<n.length;a++)n[a].date<i&&(i=n[a].date,e=a);return e}function _T(n){Ma(new Ri("platform-logger",e=>new O1(e),"PRIVATE")),Ma(new Ri("heartbeat",e=>new pT(e),"PRIVATE")),Gs(hf,d_,n),Gs(hf,d_,"esm2017"),Gs("fire-js","")}_T("");function Kf(n,e){var i={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&e.indexOf(a)<0&&(i[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(n);l<a.length;l++)e.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(n,a[l])&&(i[a[l]]=n[a[l]]);return i}function l0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bT=l0,o0=new Al("auth","Firebase",l0());const Nc=new Ff("@firebase/auth");function ST(n,...e){Nc.logLevel<=Be.WARN&&Nc.warn(`Auth (${Ka}): ${n}`,...e)}function mc(n,...e){Nc.logLevel<=Be.ERROR&&Nc.error(`Auth (${Ka}): ${n}`,...e)}function mn(n,...e){throw $f(n,...e)}function xn(n,...e){return $f(n,...e)}function Wf(n,e,i){const a=Object.assign(Object.assign({},bT()),{[e]:i});return new Al("auth","Firebase",a).create(e,{appName:n.name})}function as(n){return Wf(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ET(n,e,i){const a=i;if(!(e instanceof a))throw a.name!==e.constructor.name&&mn(n,"argument-error"),Wf(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $f(n,...e){if(typeof n!="string"){const i=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=n.name),n._errorFactory.create(i,...a)}return o0.create(n,...e)}function ue(n,e,...i){if(!n)throw $f(e,...i)}function ts(n){const e="INTERNAL ASSERTION FAILED: "+n;throw mc(e),new Error(e)}function cs(n,e){n||ts(e)}function pf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function CT(){return g_()==="http:"||g_()==="https:"}function g_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function xT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CT()||XN()||"connection"in navigator)?navigator.onLine:!0}function wT(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Rl{constructor(e,i){this.shortDelay=e,this.longDelay=i,cs(i>e,"Short delay should be less than long delay!"),this.isMobile=Gf()||Jb()}get(){return xT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Xf(n,e){cs(n.emulator,"Emulator should always be set here");const{url:i}=n.emulator;return e?`${i}${e.startsWith("/")?e.slice(1):e}`:i}class c0{static initialize(e,i,a){this.fetchImpl=e,i&&(this.headersImpl=i),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const NT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const TT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],AT=new Rl(3e4,6e4);function Js(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ei(n,e,i,a,l={}){return u0(n,l,async()=>{let c={},h={};a&&(e==="GET"?h=a:c={body:JSON.stringify(a)});const m=Qa(Object.assign({key:n.config.apiKey},h)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const g=Object.assign({method:e,headers:p},c);return $N()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Ya(n.emulatorConfig.host)&&(g.credentials="include"),c0.fetch()(await d0(n,n.config.apiHost,i,m),g)})}async function u0(n,e,i){n._canInitEmulator=!1;const a=Object.assign(Object.assign({},NT),e);try{const l=new jT(n),c=await Promise.race([i(),l.promise]);l.clearNetworkTimeout();const h=await c.json();if("needConfirmation"in h)throw oc(n,"account-exists-with-different-credential",h);if(c.ok&&!("errorMessage"in h))return h;{const m=c.ok?h.errorMessage:h.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw oc(n,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw oc(n,"email-already-in-use",h);if(p==="USER_DISABLED")throw oc(n,"user-disabled",h);const v=a[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Wf(n,v,g);mn(n,v)}}catch(l){if(l instanceof Zs)throw l;mn(n,"network-request-failed",{message:String(l)})}}async function jl(n,e,i,a,l={}){const c=await ei(n,e,i,a,l);return"mfaPendingCredential"in c&&mn(n,"multi-factor-auth-required",{_serverResponse:c}),c}async function d0(n,e,i,a){const l=`${e}${i}?${a}`,c=n,h=c.config.emulator?Xf(n.config,l):`${n.config.apiScheme}://${l}`;return TT.includes(i)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(h).toString():h}function RT(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class jT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((i,a)=>{this.timer=setTimeout(()=>a(xn(this.auth,"network-request-failed")),AT.get())})}}function oc(n,e,i){const a={appName:n.name};i.email&&(a.email=i.email),i.phoneNumber&&(a.phoneNumber=i.phoneNumber);const l=xn(n,e,a);return l.customData._tokenResponse=i,l}function y_(n){return n!==void 0&&n.enterprise!==void 0}class OT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const i of this.recaptchaEnforcementState)if(i.provider&&i.provider===e)return RT(i.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function IT(n,e){return ei(n,"GET","/v2/recaptchaConfig",Js(n,e))}async function DT(n,e){return ei(n,"POST","/v1/accounts:delete",e)}async function Tc(n,e){return ei(n,"POST","/v1/accounts:lookup",e)}function ll(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function kT(n,e=!1){const i=_t(n),a=await i.getIdToken(e),l=Zf(a);ue(l&&l.exp&&l.auth_time&&l.iat,i.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,h=c?.sign_in_provider;return{claims:l,token:a,authTime:ll(Wh(l.auth_time)),issuedAtTime:ll(Wh(l.iat)),expirationTime:ll(Wh(l.exp)),signInProvider:h||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Wh(n){return Number(n)*1e3}function Zf(n){const[e,i,a]=n.split(".");if(e===void 0||i===void 0||a===void 0)return mc("JWT malformed, contained fewer than 3 sections"),null;try{const l=Ec(i);return l?JSON.parse(l):(mc("Failed to decode base64 JWT payload"),null)}catch(l){return mc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function v_(n){const e=Zf(n);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function gl(n,e,i=!1){if(i)return e;try{return await e}catch(a){throw a instanceof Zs&&MT(a)&&n.auth.currentUser===n&&await n.auth.signOut(),a}}function MT({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class LT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var i;if(e){const a=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),a}else{this.errorBackoff=3e4;const l=((i=this.user.stsTokenManager.expirationTime)!==null&&i!==void 0?i:0)-Date.now()-3e5;return Math.max(0,l)}}schedule(e=!1){if(!this.isRunning)return;const i=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class gf{constructor(e,i){this.createdAt=e,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=ll(this.lastLoginAt),this.creationTime=ll(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ac(n){var e;const i=n.auth,a=await n.getIdToken(),l=await gl(n,Tc(i,{idToken:a}));ue(l?.users.length,i,"internal-error");const c=l.users[0];n._notifyReloadListener(c);const h=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?h0(c.providerUserInfo):[],m=zT(n.providerData,h),p=n.isAnonymous,g=!(n.email&&c.passwordHash)&&!m?.length,v=p?g:!1,_={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:m,metadata:new gf(c.createdAt,c.lastLoginAt),isAnonymous:v};Object.assign(n,_)}async function UT(n){const e=_t(n);await Ac(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zT(n,e){return[...n.filter(a=>!e.some(l=>l.providerId===a.providerId)),...e]}function h0(n){return n.map(e=>{var{providerId:i}=e,a=Kf(e,["providerId"]);return{providerId:i,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}})}async function PT(n,e){const i=await u0(n,{},async()=>{const a=Qa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=n.config,h=await d0(n,l,"/v1/token",`key=${c}`),m=await n._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:a};return n.emulatorConfig&&Ya(n.emulatorConfig.host)&&(p.credentials="include"),c0.fetch()(h,p)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function BT(n,e){return ei(n,"POST","/v2/accounts:revokeToken",Js(n,e))}class Aa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const i="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):v_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,i)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const i=v_(e);this.updateTokensAndExpiration(e,null,i)}async getToken(e,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,i){const{accessToken:a,refreshToken:l,expiresIn:c}=await PT(e,i);this.updateTokensAndExpiration(a,l,Number(c))}updateTokensAndExpiration(e,i,a){this.refreshToken=i||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,i){const{refreshToken:a,accessToken:l,expirationTime:c}=i,h=new Aa;return a&&(ue(typeof a=="string","internal-error",{appName:e}),h.refreshToken=a),l&&(ue(typeof l=="string","internal-error",{appName:e}),h.accessToken=l),c&&(ue(typeof c=="number","internal-error",{appName:e}),h.expirationTime=c),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Aa,this.toJSON())}_performRefresh(){return ts("not implemented")}}function Ls(n,e){ue(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class En{constructor(e){var{uid:i,auth:a,stsTokenManager:l}=e,c=Kf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new LT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=i,this.auth=a,this.stsTokenManager=l,this.accessToken=l.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new gf(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const i=await gl(this,this.stsTokenManager.getToken(this.auth,e));return ue(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(e){return kT(this,e)}reload(){return UT(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(i=>Object.assign({},i)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const i=new En(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return i.metadata._copy(this.metadata),i}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,i=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),i&&await Ac(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Jt(this.auth.app))return Promise.reject(as(this.auth));const e=await this.getIdToken();return await gl(this,DT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,i){var a,l,c,h,m,p,g,v;const _=(a=i.displayName)!==null&&a!==void 0?a:void 0,b=(l=i.email)!==null&&l!==void 0?l:void 0,C=(c=i.phoneNumber)!==null&&c!==void 0?c:void 0,w=(h=i.photoURL)!==null&&h!==void 0?h:void 0,O=(m=i.tenantId)!==null&&m!==void 0?m:void 0,D=(p=i._redirectEventId)!==null&&p!==void 0?p:void 0,A=(g=i.createdAt)!==null&&g!==void 0?g:void 0,H=(v=i.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:F,emailVerified:ee,isAnonymous:K,providerData:X,stsTokenManager:Y}=i;ue(F&&Y,e,"internal-error");const $=Aa.fromJSON(this.name,Y);ue(typeof F=="string",e,"internal-error"),Ls(_,e.name),Ls(b,e.name),ue(typeof ee=="boolean",e,"internal-error"),ue(typeof K=="boolean",e,"internal-error"),Ls(C,e.name),Ls(w,e.name),Ls(O,e.name),Ls(D,e.name),Ls(A,e.name),Ls(H,e.name);const R=new En({uid:F,auth:e,email:b,emailVerified:ee,displayName:_,isAnonymous:K,photoURL:w,phoneNumber:C,tenantId:O,stsTokenManager:$,createdAt:A,lastLoginAt:H});return X&&Array.isArray(X)&&(R.providerData=X.map(B=>Object.assign({},B))),D&&(R._redirectEventId=D),R}static async _fromIdTokenResponse(e,i,a=!1){const l=new Aa;l.updateFromServerResponse(i);const c=new En({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:a});return await Ac(c),c}static async _fromGetAccountInfoResponse(e,i,a){const l=i.users[0];ue(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?h0(l.providerUserInfo):[],h=!(l.email&&l.passwordHash)&&!c?.length,m=new Aa;m.updateFromIdToken(a);const p=new En({uid:l.localId,auth:e,stsTokenManager:m,isAnonymous:h}),g={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new gf(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(p,g),p}}const __=new Map;function ns(n){cs(n instanceof Function,"Expected a class definition");let e=__.get(n);return e?(cs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,__.set(n,e),e)}class f0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,i){this.storage[e]=i}async _get(e){const i=this.storage[e];return i===void 0?null:i}async _remove(e){delete this.storage[e]}_addListener(e,i){}_removeListener(e,i){}}f0.type="NONE";const b_=f0;function pc(n,e,i){return`firebase:${n}:${e}:${i}`}class Ra{constructor(e,i,a){this.persistence=e,this.auth=i,this.userKey=a;const{config:l,name:c}=this.auth;this.fullUserKey=pc(this.userKey,l.apiKey,c),this.fullPersistenceKey=pc("persistence",l.apiKey,c),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const i=await Tc(this.auth,{idToken:e}).catch(()=>{});return i?En._fromGetAccountInfoResponse(this.auth,i,e):null}return En._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,i,a="authUser"){if(!i.length)return new Ra(ns(b_),e,a);const l=(await Promise.all(i.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let c=l[0]||ns(b_);const h=pc(a,e.config.apiKey,e.name);let m=null;for(const g of i)try{const v=await g._get(h);if(v){let _;if(typeof v=="string"){const b=await Tc(e,{idToken:v}).catch(()=>{});if(!b)break;_=await En._fromGetAccountInfoResponse(e,b,v)}else _=En._fromJSON(e,v);g!==c&&(m=_),c=g;break}}catch{}const p=l.filter(g=>g._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new Ra(c,e,a):(c=p[0],m&&await c._set(h,m.toJSON()),await Promise.all(i.map(async g=>{if(g!==c)try{await g._remove(h)}catch{}})),new Ra(c,e,a))}}function S_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(y0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(m0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_0(e))return"Blackberry";if(b0(e))return"Webos";if(p0(e))return"Safari";if((e.includes("chrome/")||g0(e))&&!e.includes("edge/"))return"Chrome";if(v0(e))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=n.match(i);if(a?.length===2)return a[1]}return"Other"}function m0(n=It()){return/firefox\//i.test(n)}function p0(n=It()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function g0(n=It()){return/crios\//i.test(n)}function y0(n=It()){return/iemobile/i.test(n)}function v0(n=It()){return/android/i.test(n)}function _0(n=It()){return/blackberry/i.test(n)}function b0(n=It()){return/webos/i.test(n)}function Jf(n=It()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function HT(n=It()){var e;return Jf(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function qT(){return ZN()&&document.documentMode===10}function S0(n=It()){return Jf(n)||v0(n)||b0(n)||_0(n)||/windows phone/i.test(n)||y0(n)}function E0(n,e=[]){let i;switch(n){case"Browser":i=S_(It());break;case"Worker":i=`${S_(It())}-${n}`;break;default:i=n}const a=e.length?e.join(","):"FirebaseCore-web";return`${i}/JsCore/${Ka}/${a}`}class VT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,i){const a=c=>new Promise((h,m)=>{try{const p=e(c);h(p)}catch(p){m(p)}});a.onAbort=i,this.queue.push(a);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const i=[];try{for(const a of this.queue)await a(e),a.onAbort&&i.push(a.onAbort)}catch(a){i.reverse();for(const l of i)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}async function GT(n,e={}){return ei(n,"GET","/v2/passwordPolicy",Js(n,e))}const FT=6;class YT{constructor(e){var i,a,l,c;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(i=h.minPasswordLength)!==null&&i!==void 0?i:FT,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(l=(a=e.allowedNonAlphanumericCharacters)===null||a===void 0?void 0:a.join(""))!==null&&l!==void 0?l:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var i,a,l,c,h,m;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(i=p.meetsMinPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(a=p.meetsMaxPasswordLength)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(l=p.containsLowercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsUppercaseLetter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(h=p.containsNumericCharacter)!==null&&h!==void 0?h:!0),p.isValid&&(p.isValid=(m=p.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),p}validatePasswordLengthOptions(e,i){const a=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;a&&(i.meetsMinPasswordLength=e.length>=a),l&&(i.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let a;for(let l=0;l<e.length;l++)a=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(i,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,i,a,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class QT{constructor(e,i,a,l){this.app=e,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=a,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new E_(this),this.idTokenSubscription=new E_(this),this.beforeStateQueue=new VT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=o0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,i){return i&&(this._popupRedirectResolver=ns(i)),this._initializationPromise=this.queue(async()=>{var a,l,c;if(!this._deleted&&(this.persistenceManager=await Ra.create(this,e),(a=this._resolvePersistenceManagerAvailable)===null||a===void 0||a.call(this),!this._deleted)){if(!((l=this._popupRedirectResolver)===null||l===void 0)&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const i=await Tc(this,{idToken:e}),a=await En._fromGetAccountInfoResponse(this,i,e);await this.directlySetCurrentUser(a)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Jt(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const a=await this.assertedPersistence.getCurrentUser();let l=a,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId,m=l?._redirectEventId,p=await this.tryRedirectSignIn(e);(!h||h===m)&&p?.user&&(l=p.user,c=!0)}if(!l)return this.directlySetCurrentUser(null);if(!l._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(l)}catch(h){l=a,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return l?this.reloadAndSetCurrentUserOrClear(l):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===l._redirectEventId?this.directlySetCurrentUser(l):this.reloadAndSetCurrentUserOrClear(l)}async tryRedirectSignIn(e){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(e){try{await Ac(e)}catch(i){if(i?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Jt(this.app))return Promise.reject(as(this));const i=e?_t(e):null;return i&&ue(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(e,i=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Jt(this.app)?Promise.reject(as(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Jt(this.app)?Promise.reject(as(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ns(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GT(this),i=new YT(e);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Al("auth","Firebase",e())}onAuthStateChanged(e,i,a){return this.registerStateListener(this.authStateSubscription,e,i,a)}beforeAuthStateChanged(e,i){return this.beforeStateQueue.pushCallback(e,i)}onIdTokenChanged(e,i,a){return this.registerStateListener(this.idTokenSubscription,e,i,a)}authStateReady(){return new Promise((e,i)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},i)}})}async revokeAccessToken(e){if(this.currentUser){const i=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:i};this.tenantId!=null&&(a.tenantId=this.tenantId),await BT(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,i){const a=await this.getOrInitRedirectPersistenceManager(i);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const i=e&&ns(e)||this._popupRedirectResolver;ue(i,this,"argument-error"),this.redirectPersistenceManager=await Ra.create(this,[ns(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var i,a;return this._isInitialized&&await this.queue(async()=>{}),((i=this._currentUser)===null||i===void 0?void 0:i._redirectEventId)===e?this._currentUser:((a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,i;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const a=(i=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&i!==void 0?i:null;this.lastNotifiedUid!==a&&(this.lastNotifiedUid=a,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,i,a,l){if(this._deleted)return()=>{};const c=typeof i=="function"?i:i.next.bind(i);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(m,this,"internal-error"),m.then(()=>{h||c(this.currentUser)}),typeof i=="function"){const p=e.addObserver(i,a,l);return()=>{h=!0,p()}}else{const p=e.addObserver(i);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=E0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const i={"X-Client-Version":this.clientVersion};this.app.options.appId&&(i["X-Firebase-gmpid"]=this.app.options.appId);const a=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());a&&(i["X-Firebase-Client"]=a);const l=await this._getAppCheckToken();return l&&(i["X-Firebase-AppCheck"]=l),i}async _getAppCheckToken(){var e;if(Jt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const i=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return i?.error&&ST(`Error while retrieving App Check token: ${i.error}`),i?.token}}function ti(n){return _t(n)}class E_{constructor(e){this.auth=e,this.observer=null,this.addObserver=o1(i=>this.observer=i)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Xc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KT(n){Xc=n}function C0(n){return Xc.loadJS(n)}function WT(){return Xc.recaptchaEnterpriseScript}function $T(){return Xc.gapiScript}function XT(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class ZT{constructor(){this.enterprise=new JT}ready(e){e()}execute(e,i){return Promise.resolve("token")}render(e,i){return""}}class JT{ready(e){e()}execute(e,i){return Promise.resolve("token")}render(e,i){return""}}const eA="recaptcha-enterprise",x0="NO_RECAPTCHA";class tA{constructor(e){this.type=eA,this.auth=ti(e)}async verify(e="verify",i=!1){async function a(c){if(!i){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(h,m)=>{IT(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new OT(p);return c.tenantId==null?c._agentRecaptchaConfig=g:c._tenantRecaptchaConfigs[c.tenantId]=g,h(g.siteKey)}}).catch(p=>{m(p)})})}function l(c,h,m){const p=window.grecaptcha;y_(p)?p.enterprise.ready(()=>{p.enterprise.execute(c,{action:e}).then(g=>{h(g)}).catch(()=>{h(x0)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ZT().execute("siteKey",{action:"verify"}):new Promise((c,h)=>{a(this.auth).then(m=>{if(!i&&y_(window.grecaptcha))l(m,c,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=WT();p.length!==0&&(p+=m),C0(p).then(()=>{l(m,c,h)}).catch(g=>{h(g)})}}).catch(m=>{h(m)})})}}async function C_(n,e,i,a=!1,l=!1){const c=new tA(n);let h;if(l)h=x0;else try{h=await c.verify(i)}catch{h=await c.verify(i,!0)}const m=Object.assign({},e);if(i==="mfaSmsEnrollment"||i==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return a?Object.assign(m,{captchaResp:h}):Object.assign(m,{captchaResponse:h}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function yf(n,e,i,a,l){var c;if(!((c=n._getRecaptchaConfig())===null||c===void 0)&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await C_(n,e,i,i==="getOobCode");return a(n,h)}else return a(n,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await C_(n,e,i,i==="getOobCode");return a(n,m)}else return Promise.reject(h)})}function nA(n,e){const i=Qf(n,"auth");if(i.isInitialized()){const l=i.getImmediate(),c=i.getOptions();if(Ai(c,e??{}))return l;mn(l,"already-initialized")}return i.initialize({options:e})}function sA(n,e){const i=e?.persistence||[],a=(Array.isArray(i)?i:[i]).map(ns);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(a,e?.popupRedirectResolver)}function iA(n,e,i){const a=ti(n);ue(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const l=!1,c=w0(e),{host:h,port:m}=aA(e),p=m===null?"":`:${m}`,g={url:`${c}//${h}${p}/`},v=Object.freeze({host:h,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!a._canInitEmulator){ue(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),ue(Ai(g,a.config.emulator)&&Ai(v,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=g,a.emulatorConfig=v,a.settings.appVerificationDisabledForTesting=!0,Ya(h)?(Xb(`${c}//${h}${p}`),Zb("Auth",!0)):rA()}function w0(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function aA(n){const e=w0(n),i=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!i)return{host:"",port:null};const a=i[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(a);if(l){const c=l[1];return{host:c,port:x_(a.substr(c.length+1))}}else{const[c,h]=a.split(":");return{host:c,port:x_(h)}}}function x_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function rA(){function n(){const e=document.createElement("p"),i=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class em{constructor(e,i){this.providerId=e,this.signInMethod=i}toJSON(){return ts("not implemented")}_getIdTokenResponse(e){return ts("not implemented")}_linkToIdToken(e,i){return ts("not implemented")}_getReauthenticationResolver(e){return ts("not implemented")}}async function lA(n,e){return ei(n,"POST","/v1/accounts:signUp",e)}async function oA(n,e){return jl(n,"POST","/v1/accounts:signInWithPassword",Js(n,e))}async function cA(n,e){return jl(n,"POST","/v1/accounts:signInWithEmailLink",Js(n,e))}async function uA(n,e){return jl(n,"POST","/v1/accounts:signInWithEmailLink",Js(n,e))}class yl extends em{constructor(e,i,a,l=null){super("password",a),this._email=e,this._password=i,this._tenantId=l}static _fromEmailAndPassword(e,i){return new yl(e,i,"password")}static _fromEmailAndCode(e,i,a=null){return new yl(e,i,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const i=typeof e=="string"?JSON.parse(e):e;if(i?.email&&i?.password){if(i.signInMethod==="password")return this._fromEmailAndPassword(i.email,i.password);if(i.signInMethod==="emailLink")return this._fromEmailAndCode(i.email,i.password,i.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yf(e,i,"signInWithPassword",oA);case"emailLink":return cA(e,{email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}async _linkToIdToken(e,i){switch(this.signInMethod){case"password":const a={idToken:i,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yf(e,a,"signUpPassword",lA);case"emailLink":return uA(e,{idToken:i,email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ja(n,e){return jl(n,"POST","/v1/accounts:signInWithIdp",Js(n,e))}const dA="http://localhost";class ji extends em{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const i=new ji(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(i.idToken=e.idToken),e.accessToken&&(i.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(i.nonce=e.nonce),e.pendingToken&&(i.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(i.accessToken=e.oauthToken,i.secret=e.oauthTokenSecret):mn("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const i=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:l}=i,c=Kf(i,["providerId","signInMethod"]);if(!a||!l)return null;const h=new ji(a,l);return h.idToken=c.idToken||void 0,h.accessToken=c.accessToken||void 0,h.secret=c.secret,h.nonce=c.nonce,h.pendingToken=c.pendingToken||null,h}_getIdTokenResponse(e){const i=this.buildRequest();return ja(e,i)}_linkToIdToken(e,i){const a=this.buildRequest();return a.idToken=i,ja(e,a)}_getReauthenticationResolver(e){const i=this.buildRequest();return i.autoCreate=!1,ja(e,i)}buildRequest(){const e={requestUri:dA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),e.postBody=Qa(i)}return e}}function hA(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function fA(n){const e=il(al(n)).link,i=e?il(al(e)).deep_link_id:null,a=il(al(n)).deep_link_id;return(a?il(al(a)).link:null)||a||i||e||n}class tm{constructor(e){var i,a,l,c,h,m;const p=il(al(e)),g=(i=p.apiKey)!==null&&i!==void 0?i:null,v=(a=p.oobCode)!==null&&a!==void 0?a:null,_=hA((l=p.mode)!==null&&l!==void 0?l:null);ue(g&&v&&_,"argument-error"),this.apiKey=g,this.operation=_,this.code=v,this.continueUrl=(c=p.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(h=p.lang)!==null&&h!==void 0?h:null,this.tenantId=(m=p.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const i=fA(e);try{return new tm(i)}catch{return null}}}class Wa{constructor(){this.providerId=Wa.PROVIDER_ID}static credential(e,i){return yl._fromEmailAndPassword(e,i)}static credentialWithLink(e,i){const a=tm.parseLink(i);return ue(a,"argument-error"),yl._fromEmailAndCode(e,a.code,a.tenantId)}}Wa.PROVIDER_ID="password";Wa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class nm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ol extends nm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Us extends Ol{constructor(){super("facebook.com")}static credential(e){return ji._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Us.credential(e.oauthAccessToken)}catch{return null}}}Us.FACEBOOK_SIGN_IN_METHOD="facebook.com";Us.PROVIDER_ID="facebook.com";class es extends Ol{constructor(){super("google.com"),this.addScope("profile")}static credential(e,i){return ji._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:i})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:i,oauthAccessToken:a}=e;if(!i&&!a)return null;try{return es.credential(i,a)}catch{return null}}}es.GOOGLE_SIGN_IN_METHOD="google.com";es.PROVIDER_ID="google.com";class zs extends Ol{constructor(){super("github.com")}static credential(e){return ji._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zs.credential(e.oauthAccessToken)}catch{return null}}}zs.GITHUB_SIGN_IN_METHOD="github.com";zs.PROVIDER_ID="github.com";class Ps extends Ol{constructor(){super("twitter.com")}static credential(e,i){return ji._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:i})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:i,oauthTokenSecret:a}=e;if(!i||!a)return null;try{return Ps.credential(i,a)}catch{return null}}}Ps.TWITTER_SIGN_IN_METHOD="twitter.com";Ps.PROVIDER_ID="twitter.com";async function mA(n,e){return jl(n,"POST","/v1/accounts:signUp",Js(n,e))}class Oi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,i,a,l=!1){const c=await En._fromIdTokenResponse(e,a,l),h=w_(a);return new Oi({user:c,providerId:h,_tokenResponse:a,operationType:i})}static async _forOperation(e,i,a){await e._updateTokensIfNecessary(a,!0);const l=w_(a);return new Oi({user:e,providerId:l,_tokenResponse:a,operationType:i})}}function w_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Rc extends Zs{constructor(e,i,a,l){var c;super(i.code,i.message),this.operationType=a,this.user=l,Object.setPrototypeOf(this,Rc.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:i.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,i,a,l){return new Rc(e,i,a,l)}}function N0(n,e,i,a){return(e==="reauthenticate"?i._getReauthenticationResolver(n):i._getIdTokenResponse(n)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Rc._fromErrorAndOperation(n,c,e,a):c})}async function pA(n,e,i=!1){const a=await gl(n,e._linkToIdToken(n.auth,await n.getIdToken()),i);return Oi._forOperation(n,"link",a)}async function gA(n,e,i=!1){const{auth:a}=n;if(Jt(a.app))return Promise.reject(as(a));const l="reauthenticate";try{const c=await gl(n,N0(a,l,e,n),i);ue(c.idToken,a,"internal-error");const h=Zf(c.idToken);ue(h,a,"internal-error");const{sub:m}=h;return ue(n.uid===m,a,"user-mismatch"),Oi._forOperation(n,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&mn(a,"user-mismatch"),c}}async function T0(n,e,i=!1){if(Jt(n.app))return Promise.reject(as(n));const a="signIn",l=await N0(n,a,e),c=await Oi._fromIdTokenResponse(n,a,l);return i||await n._updateCurrentUser(c.user),c}async function yA(n,e){return T0(ti(n),e)}async function A0(n){const e=ti(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function vA(n,e,i){if(Jt(n.app))return Promise.reject(as(n));const a=ti(n),h=await yf(a,{returnSecureToken:!0,email:e,password:i,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mA).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&A0(n),p}),m=await Oi._fromIdTokenResponse(a,"signIn",h);return await a._updateCurrentUser(m.user),m}function _A(n,e,i){return Jt(n.app)?Promise.reject(as(n)):yA(_t(n),Wa.credential(e,i)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&A0(n),a})}function bA(n,e,i,a){return _t(n).onIdTokenChanged(e,i,a)}function SA(n,e,i){return _t(n).beforeAuthStateChanged(e,i)}function EA(n,e,i,a){return _t(n).onAuthStateChanged(e,i,a)}function CA(n){return _t(n).signOut()}const jc="__sak";class R0{constructor(e,i){this.storageRetriever=e,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(jc,"1"),this.storage.removeItem(jc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,i){return this.storage.setItem(e,JSON.stringify(i)),Promise.resolve()}_get(e){const i=this.storage.getItem(e);return Promise.resolve(i?JSON.parse(i):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const xA=1e3,wA=10;class j0 extends R0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,i)=>this.onStorageEvent(e,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=S0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const i of Object.keys(this.listeners)){const a=this.storage.getItem(i),l=this.localCache[i];a!==l&&e(i,l,a)}}onStorageEvent(e,i=!1){if(!e.key){this.forAllChangedKeys((h,m,p)=>{this.notifyListeners(h,p)});return}const a=e.key;i?this.detachListener():this.stopPolling();const l=()=>{const h=this.storage.getItem(a);!i&&this.localCache[a]===h||this.notifyListeners(a,h)},c=this.storage.getItem(a);qT()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,wA):l()}notifyListeners(e,i){this.localCache[e]=i;const a=this.listeners[e];if(a)for(const l of Array.from(a))l(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,i,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:i,newValue:a}),!0)})},xA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,i){await super._set(e,i),this.localCache[e]=JSON.stringify(i)}async _get(e){const i=await super._get(e);return this.localCache[e]=JSON.stringify(i),i}async _remove(e){await super._remove(e),delete this.localCache[e]}}j0.type="LOCAL";const NA=j0;class O0 extends R0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,i){}_removeListener(e,i){}}O0.type="SESSION";const I0=O0;function TA(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(i){return{fulfilled:!1,reason:i}}}))}class Zc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const i=this.receivers.find(l=>l.isListeningto(e));if(i)return i;const a=new Zc(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const i=e,{eventId:a,eventType:l,data:c}=i.data,h=this.handlersMap[l];if(!h?.size)return;i.ports[0].postMessage({status:"ack",eventId:a,eventType:l});const m=Array.from(h).map(async g=>g(i.origin,c)),p=await TA(m);i.ports[0].postMessage({status:"done",eventId:a,eventType:l,response:p})}_subscribe(e,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(i)}_unsubscribe(e,i){this.handlersMap[e]&&i&&this.handlersMap[e].delete(i),(!i||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zc.receivers=[];function sm(n="",e=10){let i="";for(let a=0;a<e;a++)i+=Math.floor(Math.random()*10);return n+i}class AA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,i,a=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,h;return new Promise((m,p)=>{const g=sm("",20);l.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},a);h={messageChannel:l,onMessage(_){const b=_;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(v),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(b.data.response);break;default:clearTimeout(v),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(h),l.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:g,data:i},[l.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function Dn(){return window}function RA(n){Dn().location.href=n}function D0(){return typeof Dn().WorkerGlobalScope<"u"&&typeof Dn().importScripts=="function"}async function jA(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OA(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function IA(){return D0()?self:null}const k0="firebaseLocalStorageDb",DA=1,Oc="firebaseLocalStorage",M0="fbase_key";class Il{constructor(e){this.request=e}toPromise(){return new Promise((e,i)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function Jc(n,e){return n.transaction([Oc],e?"readwrite":"readonly").objectStore(Oc)}function kA(){const n=indexedDB.deleteDatabase(k0);return new Il(n).toPromise()}function vf(){const n=indexedDB.open(k0,DA);return new Promise((e,i)=>{n.addEventListener("error",()=>{i(n.error)}),n.addEventListener("upgradeneeded",()=>{const a=n.result;try{a.createObjectStore(Oc,{keyPath:M0})}catch(l){i(l)}}),n.addEventListener("success",async()=>{const a=n.result;a.objectStoreNames.contains(Oc)?e(a):(a.close(),await kA(),e(await vf()))})})}async function N_(n,e,i){const a=Jc(n,!0).put({[M0]:e,value:i});return new Il(a).toPromise()}async function MA(n,e){const i=Jc(n,!1).get(e),a=await new Il(i).toPromise();return a===void 0?null:a.value}function T_(n,e){const i=Jc(n,!0).delete(e);return new Il(i).toPromise()}const LA=800,UA=3;class L0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vf(),this.db)}async _withRetries(e){let i=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(i++>UA)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return D0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zc._getInstance(IA()),this.receiver._subscribe("keyChanged",async(e,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(e,i)=>["keyChanged"])}async initializeSender(){var e,i;if(this.activeServiceWorker=await jA(),!this.activeServiceWorker)return;this.sender=new AA(this.activeServiceWorker);const a=await this.sender._send("ping",{},800);a&&!((e=a[0])===null||e===void 0)&&e.fulfilled&&!((i=a[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||OA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vf();return await N_(e,jc,"1"),await T_(e,jc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,i){return this._withPendingWrite(async()=>(await this._withRetries(a=>N_(a,e,i)),this.localCache[e]=i,this.notifyServiceWorker(e)))}async _get(e){const i=await this._withRetries(a=>MA(a,e));return this.localCache[e]=i,i}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(i=>T_(i,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=Jc(l,!1).getAll();return new Il(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const i=[],a=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)a.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),i.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!a.has(l)&&(this.notifyListeners(l,null),i.push(l));return i}notifyListeners(e,i){this.localCache[e]=i;const a=this.listeners[e];if(a)for(const l of Array.from(a))l(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),LA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}L0.type="LOCAL";const zA=L0;new Rl(3e4,6e4);function U0(n,e){return e?ns(e):(ue(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class im extends em{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ja(e,this._buildIdpRequest())}_linkToIdToken(e,i){return ja(e,this._buildIdpRequest(i))}_getReauthenticationResolver(e){return ja(e,this._buildIdpRequest())}_buildIdpRequest(e){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(i.idToken=e),i}}function PA(n){return T0(n.auth,new im(n),n.bypassAuthState)}function BA(n){const{auth:e,user:i}=n;return ue(i,e,"internal-error"),gA(i,new im(n),n.bypassAuthState)}async function HA(n){const{auth:e,user:i}=n;return ue(i,e,"internal-error"),pA(i,new im(n),n.bypassAuthState)}class z0{constructor(e,i,a,l,c=!1){this.auth=e,this.resolver=a,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(e,i)=>{this.pendingPromise={resolve:e,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:i,sessionId:a,postBody:l,tenantId:c,error:h,type:m}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:i,sessionId:a,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PA;case"linkViaPopup":case"linkViaRedirect":return HA;case"reauthViaPopup":case"reauthViaRedirect":return BA;default:mn(this.auth,"internal-error")}}resolve(e){cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const qA=new Rl(2e3,1e4);async function VA(n,e,i){if(Jt(n.app))return Promise.reject(xn(n,"operation-not-supported-in-this-environment"));const a=ti(n);ET(n,e,nm);const l=U0(a,i);return new xi(a,"signInViaPopup",e,l).executeNotNull()}class xi extends z0{constructor(e,i,a,l,c){super(e,i,l,c),this.provider=a,this.authWindow=null,this.pollId=null,xi.currentPopupAction&&xi.currentPopupAction.cancel(),xi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){cs(this.filter.length===1,"Popup operations only handle one event");const e=sm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var i,a;if(!((a=(i=this.authWindow)===null||i===void 0?void 0:i.window)===null||a===void 0)&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qA.get())};e()}}xi.currentPopupAction=null;const GA="pendingRedirect",gc=new Map;class FA extends z0{constructor(e,i,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,a),this.eventId=null}async execute(){let e=gc.get(this.auth._key());if(!e){try{const a=await YA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(i){e=()=>Promise.reject(i)}gc.set(this.auth._key(),e)}return this.bypassAuthState||gc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const i=await this.auth._redirectUserForId(e.eventId);if(i)return this.user=i,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YA(n,e){const i=WA(e),a=KA(n);if(!await a._isAvailable())return!1;const l=await a._get(i)==="true";return await a._remove(i),l}function QA(n,e){gc.set(n._key(),e)}function KA(n){return ns(n._redirectPersistence)}function WA(n){return pc(GA,n.config.apiKey,n.name)}async function $A(n,e,i=!1){if(Jt(n.app))return Promise.reject(as(n));const a=ti(n),l=U0(a,e),h=await new FA(a,l,i).execute();return h&&!i&&(delete h.user._redirectEventId,await a._persistUserIfCurrent(h.user),await a._setRedirectUser(null,e)),h}const XA=600*1e3;class ZA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let i=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(i=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JA(e)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=e,i=!0)),i}sendToConsumer(e,i){var a;if(e.error&&!P0(e)){const l=((a=e.error.code)===null||a===void 0?void 0:a.split("auth/")[1])||"internal-error";i.onError(xn(this.auth,l))}else i.onAuthEvent(e)}isEventForConsumer(e,i){const a=i.eventId===null||!!e.eventId&&e.eventId===i.eventId;return i.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XA&&this.cachedEventUids.clear(),this.cachedEventUids.has(A_(e))}saveEventToCache(e){this.cachedEventUids.add(A_(e)),this.lastProcessedEventTime=Date.now()}}function A_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function P0({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function JA(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return P0(n);default:return!1}}async function eR(n,e={}){return ei(n,"GET","/v1/projects",e)}const tR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nR=/^https?/;async function sR(n){if(n.config.emulator)return;const{authorizedDomains:e}=await eR(n);for(const i of e)try{if(iR(i))return}catch{}mn(n,"unauthorized-domain")}function iR(n){const e=pf(),{protocol:i,hostname:a}=new URL(e);if(n.startsWith("chrome-extension://")){const h=new URL(n);return h.hostname===""&&a===""?i==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):i==="chrome-extension:"&&h.hostname===a}if(!nR.test(i))return!1;if(tR.test(n))return a===n;const l=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(a)}const aR=new Rl(3e4,6e4);function R_(){const n=Dn().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let i=0;i<n.CP.length;i++)n.CP[i]=null}}function rR(n){return new Promise((e,i)=>{var a,l,c;function h(){R_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{R_(),i(xn(n,"network-request-failed"))},timeout:aR.get()})}if(!((l=(a=Dn().gapi)===null||a===void 0?void 0:a.iframes)===null||l===void 0)&&l.Iframe)e(gapi.iframes.getContext());else if(!((c=Dn().gapi)===null||c===void 0)&&c.load)h();else{const m=XT("iframefcb");return Dn()[m]=()=>{gapi.load?h():i(xn(n,"network-request-failed"))},C0(`${$T()}?onload=${m}`).catch(p=>i(p))}}).catch(e=>{throw yc=null,e})}let yc=null;function lR(n){return yc=yc||rR(n),yc}const oR=new Rl(5e3,15e3),cR="__/auth/iframe",uR="emulator/auth/iframe",dR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fR(n){const e=n.config;ue(e.authDomain,n,"auth-domain-config-required");const i=e.emulator?Xf(e,uR):`https://${n.config.authDomain}/${cR}`,a={apiKey:e.apiKey,appName:n.name,v:Ka},l=hR.get(n.config.apiHost);l&&(a.eid=l);const c=n._getFrameworks();return c.length&&(a.fw=c.join(",")),`${i}?${Qa(a).slice(1)}`}async function mR(n){const e=await lR(n),i=Dn().gapi;return ue(i,n,"internal-error"),e.open({where:document.body,url:fR(n),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dR,dontclear:!0},a=>new Promise(async(l,c)=>{await a.restyle({setHideOnLeave:!1});const h=xn(n,"network-request-failed"),m=Dn().setTimeout(()=>{c(h)},oR.get());function p(){Dn().clearTimeout(m),l(a)}a.ping(p).then(p,()=>{c(h)})}))}const pR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gR=500,yR=600,vR="_blank",_R="http://localhost";class j_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bR(n,e,i,a=gR,l=yR){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),h=Math.max((window.screen.availWidth-a)/2,0).toString();let m="";const p=Object.assign(Object.assign({},pR),{width:a.toString(),height:l.toString(),top:c,left:h}),g=It().toLowerCase();i&&(m=g0(g)?vR:i),m0(g)&&(e=e||_R,p.scrollbars="yes");const v=Object.entries(p).reduce((b,[C,w])=>`${b}${C}=${w},`,"");if(HT(g)&&m!=="_self")return SR(e||"",m),new j_(null);const _=window.open(e||"",m,v);ue(_,n,"popup-blocked");try{_.focus()}catch{}return new j_(_)}function SR(n,e){const i=document.createElement("a");i.href=n,i.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(a)}const ER="__/auth/handler",CR="emulator/auth/handler",xR=encodeURIComponent("fac");async function O_(n,e,i,a,l,c){ue(n.config.authDomain,n,"auth-domain-config-required"),ue(n.config.apiKey,n,"invalid-api-key");const h={apiKey:n.config.apiKey,appName:n.name,authType:i,redirectUrl:a,v:Ka,eventId:l};if(e instanceof nm){e.setDefaultLanguage(n.languageCode),h.providerId=e.providerId||"",Cc(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,_]of Object.entries({}))h[v]=_}if(e instanceof Ol){const v=e.getScopes().filter(_=>_!=="");v.length>0&&(h.scopes=v.join(","))}n.tenantId&&(h.tid=n.tenantId);const m=h;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const p=await n._getAppCheckToken(),g=p?`#${xR}=${encodeURIComponent(p)}`:"";return`${wR(n)}?${Qa(m).slice(1)}${g}`}function wR({config:n}){return n.emulator?Xf(n,CR):`https://${n.authDomain}/${ER}`}const $h="webStorageSupport";class NR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=I0,this._completeRedirectFn=$A,this._overrideRedirectResult=QA}async _openPopup(e,i,a,l){var c;cs((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const h=await O_(e,i,a,pf(),l);return bR(e,h,sm())}async _openRedirect(e,i,a,l){await this._originValidation(e);const c=await O_(e,i,a,pf(),l);return RA(c),new Promise(()=>{})}_initialize(e){const i=e._key();if(this.eventManagers[i]){const{manager:l,promise:c}=this.eventManagers[i];return l?Promise.resolve(l):(cs(c,"If manager is not set, promise should be"),c)}const a=this.initAndGetManager(e);return this.eventManagers[i]={promise:a},a.catch(()=>{delete this.eventManagers[i]}),a}async initAndGetManager(e){const i=await mR(e),a=new ZA(e);return i.register("authEvent",l=>(ue(l?.authEvent,e,"invalid-auth-event"),{status:a.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=i,a}_isIframeWebStorageSupported(e,i){this.iframes[e._key()].send($h,{type:$h},l=>{var c;const h=(c=l?.[0])===null||c===void 0?void 0:c[$h];h!==void 0&&i(!!h),mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const i=e._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=sR(e)),this.originValidationPromises[i]}get _shouldInitProactively(){return S0()||p0()||Jf()}}const TR=NR;var I_="@firebase/auth",D_="1.10.8";class AR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const i=this.auth.onIdTokenChanged(a=>{e(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,i),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const i=this.internalListeners.get(e);i&&(this.internalListeners.delete(e),i(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function RR(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jR(n){Ma(new Ri("auth",(e,{options:i})=>{const a=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=a.options;ue(h&&!h.includes(":"),"invalid-api-key",{appName:a.name});const p={apiKey:h,authDomain:m,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:E0(n)},g=new QT(a,l,c,p);return sA(g,i),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,i,a)=>{e.getProvider("auth-internal").initialize()})),Ma(new Ri("auth-internal",e=>{const i=ti(e.getProvider("auth").getImmediate());return(a=>new AR(a))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gs(I_,D_,RR(n)),Gs(I_,D_,"esm2017")}const OR=300,IR=$b("authIdTokenMaxAge")||OR;let k_=null;const DR=n=>async e=>{const i=e&&await e.getIdTokenResult(),a=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(a&&a>IR)return;const l=i?.token;k_!==l&&(k_=l,await fetch(n,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function kR(n=i0()){const e=Qf(n,"auth");if(e.isInitialized())return e.getImmediate();const i=nA(n,{popupRedirectResolver:TR,persistence:[zA,NA,I0]}),a=$b("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(a,location.origin);if(location.origin===c.origin){const h=DR(c.toString());SA(i,h,()=>h(i.currentUser)),bA(i,m=>h(m))}}const l=Kb("auth");return l&&iA(i,`http://${l}`),i}function MR(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}KT({loadJS(n){return new Promise((e,i)=>{const a=document.createElement("script");a.setAttribute("src",n),a.onload=e,a.onerror=l=>{const c=xn("internal-error");c.customData=l,i(c)},a.type="text/javascript",a.charset="UTF-8",MR().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jR("Browser");var M_={};const L_="@firebase/database",U_="1.0.20";let B0="";function H0(n){B0=n}class LR{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,i){i==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),dt(i))}get(e){const i=this.domStorage_.getItem(this.prefixedName_(e));return i==null?null:ml(i)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class UR{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,i){i==null?delete this.cache_[e]:this.cache_[e]=i}get(e){return Mn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const q0=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new LR(e)}}catch{}return new UR},wi=q0("localStorage"),zR=q0("sessionStorage");const Oa=new Ff("@firebase/database"),PR=(function(){let n=1;return function(){return n++}})(),V0=function(n){const e=d1(n),i=new l1;i.update(e);const a=i.digest();return qf.encodeByteArray(a)},Dl=function(...n){let e="";for(let i=0;i<n.length;i++){const a=n[i];Array.isArray(a)||a&&typeof a=="object"&&typeof a.length=="number"?e+=Dl.apply(null,a):typeof a=="object"?e+=dt(a):e+=a,e+=" "}return e};let ol=null,z_=!0;const BR=function(n,e){Q(!0,"Can't turn on custom loggers persistently."),Oa.logLevel=Be.VERBOSE,ol=Oa.log.bind(Oa)},yt=function(...n){if(z_===!0&&(z_=!1,ol===null&&zR.get("logging_enabled")===!0&&BR()),ol){const e=Dl.apply(null,n);ol(e)}},kl=function(n){return function(...e){yt(n,...e)}},_f=function(...n){const e="FIREBASE INTERNAL ERROR: "+Dl(...n);Oa.error(e)},us=function(...n){const e=`FIREBASE FATAL ERROR: ${Dl(...n)}`;throw Oa.error(e),new Error(e)},Ot=function(...n){const e="FIREBASE WARNING: "+Dl(...n);Oa.warn(e)},HR=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ot("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},eu=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},qR=function(n){if(document.readyState==="complete")n();else{let e=!1;const i=function(){if(!document.body){setTimeout(i,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&i()}),window.attachEvent("onload",i))}},Ii="[MIN_NAME]",Qs="[MAX_NAME]",Pi=function(n,e){if(n===e)return 0;if(n===Ii||e===Qs)return-1;if(e===Ii||n===Qs)return 1;{const i=P_(n),a=P_(e);return i!==null?a!==null?i-a===0?n.length-e.length:i-a:-1:a!==null?1:n<e?-1:1}},VR=function(n,e){return n===e?0:n<e?-1:1},Jr=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+dt(e))},am=function(n){if(typeof n!="object"||n===null)return dt(n);const e=[];for(const a in n)e.push(a);e.sort();let i="{";for(let a=0;a<e.length;a++)a!==0&&(i+=","),i+=dt(e[a]),i+=":",i+=am(n[e[a]]);return i+="}",i},G0=function(n,e){const i=n.length;if(i<=e)return[n];const a=[];for(let l=0;l<i;l+=e)l+e>i?a.push(n.substring(l,i)):a.push(n.substring(l,l+e));return a};function vt(n,e){for(const i in n)n.hasOwnProperty(i)&&e(i,n[i])}const F0=function(n){Q(!eu(n),"Invalid JSON number");const e=11,i=52,a=(1<<e-1)-1;let l,c,h,m,p;n===0?(c=0,h=0,l=1/n===-1/0?1:0):(l=n<0,n=Math.abs(n),n>=Math.pow(2,1-a)?(m=Math.min(Math.floor(Math.log(n)/Math.LN2),a),c=m+a,h=Math.round(n*Math.pow(2,i-m)-Math.pow(2,i))):(c=0,h=Math.round(n/Math.pow(2,1-a-i))));const g=[];for(p=i;p;p-=1)g.push(h%2?1:0),h=Math.floor(h/2);for(p=e;p;p-=1)g.push(c%2?1:0),c=Math.floor(c/2);g.push(l?1:0),g.reverse();const v=g.join("");let _="";for(p=0;p<64;p+=8){let b=parseInt(v.substr(p,8),2).toString(16);b.length===1&&(b="0"+b),_=_+b}return _.toLowerCase()},GR=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},FR=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function YR(n,e){let i="Unknown Error";n==="too_big"?i="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?i="Client doesn't have permission to access the desired data.":n==="unavailable"&&(i="The service is unavailable");const a=new Error(n+" at "+e._path.toString()+": "+i);return a.code=n.toUpperCase(),a}const QR=new RegExp("^-?(0*)\\d{1,10}$"),KR=-2147483648,WR=2147483647,P_=function(n){if(QR.test(n)){const e=Number(n);if(e>=KR&&e<=WR)return e}return null},$a=function(n){try{n()}catch(e){setTimeout(()=>{const i=e.stack||"";throw Ot("Exception was thrown by user callback.",i),e},Math.floor(0))}},$R=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},cl=function(n,e){const i=setTimeout(n,e);return typeof i=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(i):typeof i=="object"&&i.unref&&i.unref(),i};class XR{constructor(e,i){this.appCheckProvider=i,this.appName=e.name,Jt(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=i?.getImmediate({optional:!0}),this.appCheck||i?.get().then(a=>this.appCheck=a)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((i,a)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(i,a):i(null)},0)})}addTokenChangeListener(e){var i;(i=this.appCheckProvider)===null||i===void 0||i.get().then(a=>a.addTokenListener(e))}notifyForInvalidToken(){Ot(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ZR{constructor(e,i,a){this.appName_=e,this.firebaseOptions_=i,this.authProvider_=a,this.auth_=null,this.auth_=a.getImmediate({optional:!0}),this.auth_||a.onInit(l=>this.auth_=l)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(i=>i&&i.code==="auth/token-not-initialized"?(yt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)):new Promise((i,a)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(i,a):i(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(i=>i.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(i=>i.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ot(e)}}class vc{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}vc.OWNER="owner";const rm="5",Y0="v",Q0="s",K0="r",W0="f",$0=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,X0="ls",Z0="p",bf="ac",J0="websocket",eS="long_polling";class tS{constructor(e,i,a,l,c=!1,h="",m=!1,p=!1,g=null){this.secure=i,this.namespace=a,this.webSocketOnly=l,this.nodeAdmin=c,this.persistenceKey=h,this.includeNamespaceInQueryParams=m,this.isUsingEmulator=p,this.emulatorOptions=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=wi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&wi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",i=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${i}`}}function JR(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function nS(n,e,i){Q(typeof e=="string","typeof type must == string"),Q(typeof i=="object","typeof params must == object");let a;if(e===J0)a=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===eS)a=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);JR(n)&&(i.ns=n.namespace);const l=[];return vt(i,(c,h)=>{l.push(c+"="+h)}),a+l.join("&")}class e2{constructor(){this.counters_={}}incrementCounter(e,i=1){Mn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=i}get(){return BN(this.counters_)}}const Xh={},Zh={};function lm(n){const e=n.toString();return Xh[e]||(Xh[e]=new e2),Xh[e]}function t2(n,e){const i=n.toString();return Zh[i]||(Zh[i]=e()),Zh[i]}class n2{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,i){this.closeAfterResponse=e,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,i){for(this.pendingResponses[e]=i;this.pendingResponses[this.currentResponseNum];){const a=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let l=0;l<a.length;++l)a[l]&&$a(()=>{this.onMessage_(a[l])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const B_="start",s2="close",i2="pLPCommand",a2="pRTLPCB",sS="id",iS="pw",aS="ser",r2="cb",l2="seg",o2="ts",c2="d",u2="dframe",rS=1870,lS=30,d2=rS-lS,h2=25e3,f2=3e4;class Ta{constructor(e,i,a,l,c,h,m){this.connId=e,this.repoInfo=i,this.applicationId=a,this.appCheckToken=l,this.authToken=c,this.transportSessionId=h,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=kl(e),this.stats_=lm(i),this.urlFn=p=>(this.appCheckToken&&(p[bf]=this.appCheckToken),nS(i,eS,p))}open(e,i){this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new n2(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(f2)),qR(()=>{if(this.isClosed_)return;this.scriptTagHolder=new om((...c)=>{const[h,m,p,g,v]=c;if(this.incrementIncomingBytes_(c),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,h===B_)this.id=m,this.password=p;else if(h===s2)m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+h)},(...c)=>{const[h,m]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(h,m)},()=>{this.onClosed_()},this.urlFn);const a={};a[B_]="t",a[aS]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(a[r2]=this.scriptTagHolder.uniqueCallbackIdentifier),a[Y0]=rm,this.transportSessionId&&(a[Q0]=this.transportSessionId),this.lastSessionId&&(a[X0]=this.lastSessionId),this.applicationId&&(a[Z0]=this.applicationId),this.appCheckToken&&(a[bf]=this.appCheckToken),typeof location<"u"&&location.hostname&&$0.test(location.hostname)&&(a[K0]=W0);const l=this.urlFn(a);this.log_("Connecting via long-poll to "+l),this.scriptTagHolder.addTag(l,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ta.forceAllow_=!0}static forceDisallow(){Ta.forceDisallow_=!0}static isAvailable(){return Ta.forceAllow_?!0:!Ta.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!GR()&&!FR()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const i=dt(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const a=Yb(i),l=G0(a,d2);for(let c=0;c<l.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,l.length,l[c]),this.curSegmentNum++}addDisconnectPingFrame(e,i){this.myDisconnFrame=document.createElement("iframe");const a={};a[u2]="t",a[sS]=e,a[iS]=i,this.myDisconnFrame.src=this.urlFn(a),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const i=dt(e).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)}}class om{constructor(e,i,a,l){this.onDisconnect=a,this.urlFn=l,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=PR(),window[i2+this.uniqueCallbackIdentifier]=e,window[a2+this.uniqueCallbackIdentifier]=i,this.myIFrame=om.createIFrame_();let c="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(c='<script>document.domain="'+document.domain+'";<\/script>');const h="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(h),this.myIFrame.doc.close()}catch(m){yt("frame writing exception"),m.stack&&yt(m.stack),yt(m)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||yt("No IE domain setting required")}catch{const a=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+a+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,i){for(this.myID=e,this.myPW=i,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[sS]=this.myID,e[iS]=this.myPW,e[aS]=this.currentSerial;let i=this.urlFn(e),a="",l=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+lS+a.length<=rS;){const h=this.pendingSegs.shift();a=a+"&"+l2+l+"="+h.seg+"&"+o2+l+"="+h.ts+"&"+c2+l+"="+h.d,l++}return i=i+a,this.addLongPollTag_(i,this.currentSerial),!0}else return!1}enqueueSegment(e,i,a){this.pendingSegs.push({seg:e,ts:i,d:a}),this.alive&&this.newRequest_()}addLongPollTag_(e,i){this.outstandingRequests.add(i);const a=()=>{this.outstandingRequests.delete(i),this.newRequest_()},l=setTimeout(a,Math.floor(h2)),c=()=>{clearTimeout(l),a()};this.addTag(e,c)}addTag(e,i){setTimeout(()=>{try{if(!this.sendNewPolls)return;const a=this.myIFrame.doc.createElement("script");a.type="text/javascript",a.async=!0,a.src=e,a.onload=a.onreadystatechange=function(){const l=a.readyState;(!l||l==="loaded"||l==="complete")&&(a.onload=a.onreadystatechange=null,a.parentNode&&a.parentNode.removeChild(a),i())},a.onerror=()=>{yt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(a)}catch{}},Math.floor(1))}}const m2=16384,p2=45e3;let Ic=null;typeof MozWebSocket<"u"?Ic=MozWebSocket:typeof WebSocket<"u"&&(Ic=WebSocket);class Sn{constructor(e,i,a,l,c,h,m){this.connId=e,this.applicationId=a,this.appCheckToken=l,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=kl(this.connId),this.stats_=lm(i),this.connURL=Sn.connectionURL_(i,h,m,l,a),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,a,l,c){const h={};return h[Y0]=rm,typeof location<"u"&&location.hostname&&$0.test(location.hostname)&&(h[K0]=W0),i&&(h[Q0]=i),a&&(h[X0]=a),l&&(h[bf]=l),c&&(h[Z0]=c),nS(e,J0,h)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,wi.set("previous_websocket_failure",!0);try{let a;JN(),this.mySock=new Ic(this.connURL,[],a)}catch(a){this.log_("Error instantiating WebSocket.");const l=a.message||a.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=a=>{this.handleIncomingFrame(a)},this.mySock.onerror=a=>{this.log_("WebSocket error.  Closing connection.");const l=a.message||a.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){Sn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=/Android ([0-9]{0,}\.[0-9]{0,})/,a=navigator.userAgent.match(i);a&&a.length>1&&parseFloat(a[1])<4.4&&(e=!0)}return!e&&Ic!==null&&!Sn.forceDisallow_}static previouslyFailed(){return wi.isInMemoryStorage||wi.get("previous_websocket_failure")===!0}markConnectionHealthy(){wi.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const a=ml(i);this.onMessage(a)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Q(this.frames===null,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{const a=this.extractFrameCount_(i);a!==null&&this.appendFrame_(a)}}send(e){this.resetKeepAlive();const i=dt(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const a=G0(i,m2);a.length>1&&this.sendString_(String(a.length));for(let l=0;l<a.length;l++)this.sendString_(a[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(p2))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Sn.responsesRequiredToBeHealthy=2;Sn.healthyTimeout=3e4;class vl{static get ALL_TRANSPORTS(){return[Ta,Sn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const i=Sn&&Sn.isAvailable();let a=i&&!Sn.previouslyFailed();if(e.webSocketOnly&&(i||Ot("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[Sn];else{const l=this.transports_=[];for(const c of vl.ALL_TRANSPORTS)c&&c.isAvailable()&&l.push(c);vl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}vl.globalTransportInitialized_=!1;const g2=6e4,y2=5e3,v2=10*1024,_2=100*1024,Jh="t",H_="d",b2="s",q_="r",S2="e",V_="o",G_="a",F_="n",Y_="p",E2="h";class C2{constructor(e,i,a,l,c,h,m,p,g,v){this.id=e,this.repoInfo_=i,this.applicationId_=a,this.appCheckToken_=l,this.authToken_=c,this.onMessage_=h,this.onReady_=m,this.onDisconnect_=p,this.onKill_=g,this.lastSessionId=v,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=kl("c:"+this.id+":"),this.transportManager_=new vl(i),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.conn_),a=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(i,a)},Math.floor(0));const l=e.healthyTimeout||0;l>0&&(this.healthyTimeout_=cl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>_2?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>v2?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(l)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return i=>{e===this.conn_?this.onConnectionLost_(i):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return i=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(i):e===this.secondaryConn_?this.onSecondaryMessageReceived_(i):this.log_("message on old connection"))}}sendRequest(e){const i={t:"d",d:e};this.sendData_(i)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Jh in e){const i=e[Jh];i===G_?this.upgradeIfSecondaryHealthy_():i===q_?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):i===V_&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const i=Jr("t",e),a=Jr("d",e);if(i==="c")this.onSecondaryControl_(a);else if(i==="d")this.pendingDataMessages.push(a);else throw new Error("Unknown protocol layer: "+i)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Y_,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:G_,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:F_,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const i=Jr("t",e),a=Jr("d",e);i==="c"?this.onControl_(a):i==="d"&&this.onDataMessage_(a)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const i=Jr(Jh,e);if(H_ in e){const a=e[H_];if(i===E2){const l=Object.assign({},a);this.repoInfo_.isUsingEmulator&&(l.h=this.repoInfo_.host),this.onHandshake_(l)}else if(i===F_){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let l=0;l<this.pendingDataMessages.length;++l)this.onDataMessage_(this.pendingDataMessages[l]);this.pendingDataMessages=[],this.tryCleanupConnection()}else i===b2?this.onConnectionShutdown_(a):i===q_?this.onReset_(a):i===S2?_f("Server Error: "+a):i===V_?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_f("Unknown control packet command: "+i)}}onHandshake_(e){const i=e.ts,a=e.v,l=e.h;this.sessionId=e.s,this.repoInfo_.host=l,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),rm!==a&&Ot("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.secondaryConn_),a=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,a),cl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(g2))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,i){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):cl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(y2))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Y_,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(wi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class oS{put(e,i,a,l){}merge(e,i,a,l){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,i,a){}onDisconnectMerge(e,i,a){}onDisconnectCancel(e,i){}reportStats(e){}}class cS{constructor(e){this.allowedEvents_=e,this.listeners_={},Q(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...i){if(Array.isArray(this.listeners_[e])){const a=[...this.listeners_[e]];for(let l=0;l<a.length;l++)a[l].callback.apply(a[l].context,i)}}on(e,i,a){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:i,context:a});const l=this.getInitialEvent(e);l&&i.apply(a,l)}off(e,i,a){this.validateEventType_(e);const l=this.listeners_[e]||[];for(let c=0;c<l.length;c++)if(l[c].callback===i&&(!a||a===l[c].context)){l.splice(c,1);return}}validateEventType_(e){Q(this.allowedEvents_.find(i=>i===e),"Unknown event: "+e)}}class Dc extends cS{static getInstance(){return new Dc}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Gf()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Q(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const Q_=32,K_=768;class ke{constructor(e,i){if(i===void 0){this.pieces_=e.split("/");let a=0;for(let l=0;l<this.pieces_.length;l++)this.pieces_[l].length>0&&(this.pieces_[a]=this.pieces_[l],a++);this.pieces_.length=a,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=i}toString(){let e="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)this.pieces_[i]!==""&&(e+="/"+this.pieces_[i]);return e||"/"}}function Re(){return new ke("")}function ye(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ks(n){return n.pieces_.length-n.pieceNum_}function qe(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new ke(n.pieces_,e)}function cm(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function x2(n){let e="";for(let i=n.pieceNum_;i<n.pieces_.length;i++)n.pieces_[i]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[i])));return e||"/"}function _l(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function uS(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let i=n.pieceNum_;i<n.pieces_.length-1;i++)e.push(n.pieces_[i]);return new ke(e,0)}function $e(n,e){const i=[];for(let a=n.pieceNum_;a<n.pieces_.length;a++)i.push(n.pieces_[a]);if(e instanceof ke)for(let a=e.pieceNum_;a<e.pieces_.length;a++)i.push(e.pieces_[a]);else{const a=e.split("/");for(let l=0;l<a.length;l++)a[l].length>0&&i.push(a[l])}return new ke(i,0)}function ve(n){return n.pieceNum_>=n.pieces_.length}function jt(n,e){const i=ye(n),a=ye(e);if(i===null)return e;if(i===a)return jt(qe(n),qe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function w2(n,e){const i=_l(n,0),a=_l(e,0);for(let l=0;l<i.length&&l<a.length;l++){const c=Pi(i[l],a[l]);if(c!==0)return c}return i.length===a.length?0:i.length<a.length?-1:1}function um(n,e){if(Ks(n)!==Ks(e))return!1;for(let i=n.pieceNum_,a=e.pieceNum_;i<=n.pieces_.length;i++,a++)if(n.pieces_[i]!==e.pieces_[a])return!1;return!0}function hn(n,e){let i=n.pieceNum_,a=e.pieceNum_;if(Ks(n)>Ks(e))return!1;for(;i<n.pieces_.length;){if(n.pieces_[i]!==e.pieces_[a])return!1;++i,++a}return!0}class N2{constructor(e,i){this.errorPrefix_=i,this.parts_=_l(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let a=0;a<this.parts_.length;a++)this.byteLength_+=$c(this.parts_[a]);dS(this)}}function T2(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=$c(e),dS(n)}function A2(n){const e=n.parts_.pop();n.byteLength_-=$c(e),n.parts_.length>0&&(n.byteLength_-=1)}function dS(n){if(n.byteLength_>K_)throw new Error(n.errorPrefix_+"has a key path longer than "+K_+" bytes ("+n.byteLength_+").");if(n.parts_.length>Q_)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Q_+") or object contains a cycle "+Ci(n))}function Ci(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}class dm extends cS{static getInstance(){return new dm}constructor(){super(["visible"]);let e,i;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,i&&document.addEventListener(i,()=>{const a=!document[e];a!==this.visible_&&(this.visible_=a,this.trigger("visible",a))},!1)}getInitialEvent(e){return Q(e==="visible","Unknown event type: "+e),[this.visible_]}}const el=1e3,R2=300*1e3,W_=30*1e3,j2=1.3,O2=3e4,I2="server_kill",$_=3;class rs extends oS{constructor(e,i,a,l,c,h,m,p){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=a,this.onConnectStatus_=l,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=p,this.id=rs.nextPersistentConnectionId_++,this.log_=kl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=el,this.maxReconnectDelay_=R2,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,p)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");dm.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Dc.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,a){const l=++this.requestNumber_,c={r:l,a:e,b:i};this.log_(dt(c)),Q(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),a&&(this.requestCBHash_[l]=a)}get(e){this.initConnection_();const i=new In,l={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:h=>{const m=h.d;h.s==="ok"?i.resolve(m):i.reject(m)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(c),i.promise}listen(e,i,a,l){this.initConnection_();const c=e._queryIdentifier,h=e._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),Q(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Q(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const m={onComplete:l,hashFn:i,query:e,tag:a};this.listens.get(h).set(c,m),this.connected_&&this.sendListen_(m)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,a=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(a)})}sendListen_(e){const i=e.query,a=i._path.toString(),l=i._queryIdentifier;this.log_("Listen on "+a+" for "+l);const c={p:a},h="q";e.tag&&(c.q=i._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest(h,c,m=>{const p=m.d,g=m.s;rs.warnOnListenWarnings_(p,i),(this.listens.get(a)&&this.listens.get(a).get(l))===e&&(this.log_("listen response",m),g!=="ok"&&this.removeListen_(a,l),e.onComplete&&e.onComplete(g,p))})}static warnOnListenWarnings_(e,i){if(e&&typeof e=="object"&&Mn(e,"w")){const a=Da(e,"w");if(Array.isArray(a)&&~a.indexOf("no_index")){const l='".indexOn": "'+i._queryParams.getIndex().toString()+'"',c=i._path.toString();Ot(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||r1(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=W_)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=a1(e)?"auth":"gauth",a={cred:e};this.authOverride_===null?a.noauth=!0:typeof this.authOverride_=="object"&&(a.authvar=this.authOverride_),this.sendRequest(i,a,l=>{const c=l.s,h=l.d||"error";this.authToken_===e&&(c==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,a=e.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,a)})}unlisten(e,i){const a=e._path.toString(),l=e._queryIdentifier;this.log_("Unlisten called for "+a+" "+l),Q(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(a,l)&&this.connected_&&this.sendUnlisten_(a,l,e._queryObject,i)}sendUnlisten_(e,i,a,l){this.log_("Unlisten on "+e+" for "+i);const c={p:e},h="n";l&&(c.q=a,c.t=l),this.sendRequest(h,c)}onDisconnectPut(e,i,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,a):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:a})}onDisconnectMerge(e,i,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,a):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:a})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,a,l){const c={p:i,d:a};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,h=>{l&&setTimeout(()=>{l(h.s,h.d)},Math.floor(0))})}put(e,i,a,l){this.putInternal("p",e,i,a,l)}merge(e,i,a,l){this.putInternal("m",e,i,a,l)}putInternal(e,i,a,l,c){this.initConnection_();const h={p:i,d:a};c!==void 0&&(h.h=c),this.outstandingPuts_.push({action:e,request:h,onComplete:l}),this.outstandingPutCount_++;const m=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(m):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,a=this.outstandingPuts_[e].request,l=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,a,c=>{this.log_(i+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),l&&l(c.s,c.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,a=>{if(a.s!=="ok"){const c=a.d;this.log_("reportStats","Error sending stats: "+c)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+dt(e));const i=e.r,a=this.requestCBHash_[i];a&&(delete this.requestCBHash_[i],a(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),e==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):e==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):e==="c"?this.onListenRevoked_(i.p,i.q):e==="ac"?this.onAuthRevoked_(i.s,i.d):e==="apc"?this.onAppCheckRevoked_(i.s,i.d):e==="sd"?this.onSecurityDebugPacket_(i):_f("Unrecognized action received from server: "+dt(e)+`
Are you using the latest client?`)}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Q(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=el,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=el,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>O2&&(this.reconnectDelay_=el),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*j2)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),a=this.onRealtimeDisconnect_.bind(this),l=this.id+":"+rs.nextConnectionId_++,c=this.lastSessionId;let h=!1,m=null;const p=function(){m?m.close():(h=!0,a())},g=function(_){Q(m,"sendRequest call when we're not connected not allowed."),m.sendRequest(_)};this.realtime_={close:p,sendRequest:g};const v=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,b]=await Promise.all([this.authTokenProvider_.getToken(v),this.appCheckTokenProvider_.getToken(v)]);h?yt("getToken() completed but was canceled"):(yt("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=b&&b.token,m=new C2(l,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,i,a,C=>{Ot(C+" ("+this.repoInfo_.toString()+")"),this.interrupt(I2)},c))}catch(_){this.log_("Failed to get token: "+_),h||(this.repoInfo_.nodeAdmin&&Ot(_),p())}}}interrupt(e){yt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){yt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Cc(this.interruptReasons_)&&(this.reconnectDelay_=el,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let a;i?a=i.map(c=>am(c)).join("$"):a="default";const l=this.removeListen_(e,a);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(e,i){const a=new ke(e).toString();let l;if(this.listens.has(a)){const c=this.listens.get(a);l=c.get(i),c.delete(i),c.size===0&&this.listens.delete(a)}else l=void 0;return l}onAuthRevoked_(e,i){yt("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=$_&&(this.reconnectDelay_=W_,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){yt("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=$_&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";e["sdk."+i+"."+B0.replace(/\./g,"-")]=1,Gf()?e["framework.cordova"]=1:Jb()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Dc.getInstance().currentlyOnline();return Cc(this.interruptReasons_)&&e}}rs.nextPersistentConnectionId_=0;rs.nextConnectionId_=0;class _e{constructor(e,i){this.name=e,this.node=i}static Wrap(e,i){return new _e(e,i)}}class tu{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,i){const a=new _e(Ii,e),l=new _e(Ii,i);return this.compare(a,l)!==0}minPost(){return _e.MIN}}let cc;class hS extends tu{static get __EMPTY_NODE(){return cc}static set __EMPTY_NODE(e){cc=e}compare(e,i){return Pi(e.name,i.name)}isDefinedOn(e){throw Fa("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,i){return!1}minPost(){return _e.MIN}maxPost(){return new _e(Qs,cc)}makePost(e,i){return Q(typeof e=="string","KeyIndex indexValue must always be a string."),new _e(e,cc)}toString(){return".key"}}const Ti=new hS;class uc{constructor(e,i,a,l,c=null){this.isReverse_=l,this.resultGenerator_=c,this.nodeStack_=[];let h=1;for(;!e.isEmpty();)if(e=e,h=i?a(e.key,i):1,l&&(h*=-1),h<0)this.isReverse_?e=e.left:e=e.right;else if(h===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),i;if(this.resultGenerator_?i=this.resultGenerator_(e.key,e.value):i={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return i}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class gt{constructor(e,i,a,l,c){this.key=e,this.value=i,this.color=a??gt.RED,this.left=l??Bt.EMPTY_NODE,this.right=c??Bt.EMPTY_NODE}copy(e,i,a,l,c){return new gt(e??this.key,i??this.value,a??this.color,l??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,a){let l=this;const c=a(e,l.key);return c<0?l=l.copy(null,null,null,l.left.insert(e,i,a),null):c===0?l=l.copy(null,i,null,null,null):l=l.copy(null,null,null,null,l.right.insert(e,i,a)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return Bt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let a,l;if(a=this,i(e,a.key)<0)!a.left.isEmpty()&&!a.left.isRed_()&&!a.left.left.isRed_()&&(a=a.moveRedLeft_()),a=a.copy(null,null,null,a.left.remove(e,i),null);else{if(a.left.isRed_()&&(a=a.rotateRight_()),!a.right.isEmpty()&&!a.right.isRed_()&&!a.right.left.isRed_()&&(a=a.moveRedRight_()),i(e,a.key)===0){if(a.right.isEmpty())return Bt.EMPTY_NODE;l=a.right.min_(),a=a.copy(l.key,l.value,null,null,a.right.removeMin_())}a=a.copy(null,null,null,null,a.right.remove(e,i))}return a.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}gt.RED=!0;gt.BLACK=!1;class D2{copy(e,i,a,l,c){return this}insert(e,i,a){return new gt(e,i,null)}remove(e,i){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Bt{constructor(e,i=Bt.EMPTY_NODE){this.comparator_=e,this.root_=i}insert(e,i){return new Bt(this.comparator_,this.root_.insert(e,i,this.comparator_).copy(null,null,gt.BLACK,null,null))}remove(e){return new Bt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,gt.BLACK,null,null))}get(e){let i,a=this.root_;for(;!a.isEmpty();){if(i=this.comparator_(e,a.key),i===0)return a.value;i<0?a=a.left:i>0&&(a=a.right)}return null}getPredecessorKey(e){let i,a=this.root_,l=null;for(;!a.isEmpty();)if(i=this.comparator_(e,a.key),i===0){if(a.left.isEmpty())return l?l.key:null;for(a=a.left;!a.right.isEmpty();)a=a.right;return a.key}else i<0?a=a.left:i>0&&(l=a,a=a.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new uc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,i){return new uc(this.root_,e,this.comparator_,!1,i)}getReverseIteratorFrom(e,i){return new uc(this.root_,e,this.comparator_,!0,i)}getReverseIterator(e){return new uc(this.root_,null,this.comparator_,!0,e)}}Bt.EMPTY_NODE=new D2;function k2(n,e){return Pi(n.name,e.name)}function hm(n,e){return Pi(n,e)}let Sf;function M2(n){Sf=n}const fS=function(n){return typeof n=="number"?"number:"+F0(n):"string:"+n},mS=function(n){if(n.isLeafNode()){const e=n.val();Q(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Mn(e,".sv"),"Priority must be a string or number.")}else Q(n===Sf||n.isEmpty(),"priority of unexpected type.");Q(n===Sf||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let X_;class pt{static set __childrenNodeConstructor(e){X_=e}static get __childrenNodeConstructor(){return X_}constructor(e,i=pt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,Q(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),mS(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new pt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:pt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ve(e)?this:ye(e)===".priority"?this.priorityNode_:pt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return e===".priority"?this.updatePriority(i):i.isEmpty()&&e!==".priority"?this:pt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const a=ye(e);return a===null?i:i.isEmpty()&&a!==".priority"?this:(Q(a!==".priority"||Ks(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(a,pt.__childrenNodeConstructor.EMPTY_NODE.updateChild(qe(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+fS(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",i==="number"?e+=F0(this.value_):e+=this.value_,this.lazyHash_=V0(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===pt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof pt.__childrenNodeConstructor?-1:(Q(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,a=typeof this.value_,l=pt.VALUE_TYPE_ORDER.indexOf(i),c=pt.VALUE_TYPE_ORDER.indexOf(a);return Q(l>=0,"Unknown leaf type: "+i),Q(c>=0,"Unknown leaf type: "+a),l===c?a==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-l}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}pt.VALUE_TYPE_ORDER=["object","boolean","number","string"];let pS,gS;function L2(n){pS=n}function U2(n){gS=n}class z2 extends tu{compare(e,i){const a=e.node.getPriority(),l=i.node.getPriority(),c=a.compareTo(l);return c===0?Pi(e.name,i.name):c}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,i){return!e.getPriority().equals(i.getPriority())}minPost(){return _e.MIN}maxPost(){return new _e(Qs,new pt("[PRIORITY-POST]",gS))}makePost(e,i){const a=pS(e);return new _e(i,new pt("[PRIORITY-POST]",a))}toString(){return".priority"}}const Qe=new z2;const P2=Math.log(2);class B2{constructor(e){const i=c=>parseInt(Math.log(c)/P2,10),a=c=>parseInt(Array(c+1).join("1"),2);this.count=i(e+1),this.current_=this.count-1;const l=a(this.count);this.bits_=e+1&l}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const kc=function(n,e,i,a){n.sort(e);const l=function(p,g){const v=g-p;let _,b;if(v===0)return null;if(v===1)return _=n[p],b=i?i(_):_,new gt(b,_.node,gt.BLACK,null,null);{const C=parseInt(v/2,10)+p,w=l(p,C),O=l(C+1,g);return _=n[C],b=i?i(_):_,new gt(b,_.node,gt.BLACK,w,O)}},c=function(p){let g=null,v=null,_=n.length;const b=function(w,O){const D=_-w,A=_;_-=w;const H=l(D+1,A),F=n[D],ee=i?i(F):F;C(new gt(ee,F.node,O,null,H))},C=function(w){g?(g.left=w,g=w):(v=w,g=w)};for(let w=0;w<p.count;++w){const O=p.nextBitIsOne(),D=Math.pow(2,p.count-(w+1));O?b(D,gt.BLACK):(b(D,gt.BLACK),b(D,gt.RED))}return v},h=new B2(n.length),m=c(h);return new Bt(a||e,m)};let ef;const Na={};class ss{static get Default(){return Q(Na&&Qe,"ChildrenNode.ts has not been loaded"),ef=ef||new ss({".priority":Na},{".priority":Qe}),ef}constructor(e,i){this.indexes_=e,this.indexSet_=i}get(e){const i=Da(this.indexes_,e);if(!i)throw new Error("No index defined for "+e);return i instanceof Bt?i:null}hasIndex(e){return Mn(this.indexSet_,e.toString())}addIndex(e,i){Q(e!==Ti,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const a=[];let l=!1;const c=i.getIterator(_e.Wrap);let h=c.getNext();for(;h;)l=l||e.isDefinedOn(h.node),a.push(h),h=c.getNext();let m;l?m=kc(a,e.getCompare()):m=Na;const p=e.toString(),g=Object.assign({},this.indexSet_);g[p]=e;const v=Object.assign({},this.indexes_);return v[p]=m,new ss(v,g)}addToIndexes(e,i){const a=xc(this.indexes_,(l,c)=>{const h=Da(this.indexSet_,c);if(Q(h,"Missing index implementation for "+c),l===Na)if(h.isDefinedOn(e.node)){const m=[],p=i.getIterator(_e.Wrap);let g=p.getNext();for(;g;)g.name!==e.name&&m.push(g),g=p.getNext();return m.push(e),kc(m,h.getCompare())}else return Na;else{const m=i.get(e.name);let p=l;return m&&(p=p.remove(new _e(e.name,m))),p.insert(e,e.node)}});return new ss(a,this.indexSet_)}removeFromIndexes(e,i){const a=xc(this.indexes_,l=>{if(l===Na)return l;{const c=i.get(e.name);return c?l.remove(new _e(e.name,c)):l}});return new ss(a,this.indexSet_)}}let tl;class de{static get EMPTY_NODE(){return tl||(tl=new de(new Bt(hm),null,ss.Default))}constructor(e,i,a){this.children_=e,this.priorityNode_=i,this.indexMap_=a,this.lazyHash_=null,this.priorityNode_&&mS(this.priorityNode_),this.children_.isEmpty()&&Q(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||tl}updatePriority(e){return this.children_.isEmpty()?this:new de(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const i=this.children_.get(e);return i===null?tl:i}}getChild(e){const i=ye(e);return i===null?this:this.getImmediateChild(i).getChild(qe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,i){if(Q(i,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(i);{const a=new _e(e,i);let l,c;i.isEmpty()?(l=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(a,this.children_)):(l=this.children_.insert(e,i),c=this.indexMap_.addToIndexes(a,this.children_));const h=l.isEmpty()?tl:this.priorityNode_;return new de(l,h,c)}}updateChild(e,i){const a=ye(e);if(a===null)return i;{Q(ye(e)!==".priority"||Ks(e)===1,".priority must be the last token in a path");const l=this.getImmediateChild(a).updateChild(qe(e),i);return this.updateImmediateChild(a,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let a=0,l=0,c=!0;if(this.forEachChild(Qe,(h,m)=>{i[h]=m.val(e),a++,c&&de.INTEGER_REGEXP_.test(h)?l=Math.max(l,Number(h)):c=!1}),!e&&c&&l<2*a){const h=[];for(const m in i)h[m]=i[m];return h}else return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+fS(this.getPriority().val())+":"),this.forEachChild(Qe,(i,a)=>{const l=a.hash();l!==""&&(e+=":"+i+":"+l)}),this.lazyHash_=e===""?"":V0(e)}return this.lazyHash_}getPredecessorChildName(e,i,a){const l=this.resolveIndex_(a);if(l){const c=l.getPredecessorKey(new _e(e,i));return c?c.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const a=i.minKey();return a&&a.name}else return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new _e(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const a=i.maxKey();return a&&a.name}else return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new _e(i,this.children_.get(i)):null}forEachChild(e,i){const a=this.resolveIndex_(e);return a?a.inorderTraversal(l=>i(l.name,l.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const a=this.resolveIndex_(i);if(a)return a.getIteratorFrom(e,l=>l);{const l=this.children_.getIteratorFrom(e.name,_e.Wrap);let c=l.peek();for(;c!=null&&i.compare(c,e)<0;)l.getNext(),c=l.peek();return l}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const a=this.resolveIndex_(i);if(a)return a.getReverseIteratorFrom(e,l=>l);{const l=this.children_.getReverseIteratorFrom(e.name,_e.Wrap);let c=l.peek();for(;c!=null&&i.compare(c,e)>0;)l.getNext(),c=l.peek();return l}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ml?-1:0}withIndex(e){if(e===Ti||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new de(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===Ti||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){const a=this.getIterator(Qe),l=i.getIterator(Qe);let c=a.getNext(),h=l.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=a.getNext(),h=l.getNext()}return c===null&&h===null}else return!1;else return!1}}resolveIndex_(e){return e===Ti?null:this.indexMap_.get(e.toString())}}de.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class H2 extends de{constructor(){super(new Bt(hm),de.EMPTY_NODE,ss.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return de.EMPTY_NODE}isEmpty(){return!1}}const Ml=new H2;Object.defineProperties(_e,{MIN:{value:new _e(Ii,de.EMPTY_NODE)},MAX:{value:new _e(Qs,Ml)}});hS.__EMPTY_NODE=de.EMPTY_NODE;pt.__childrenNodeConstructor=de;M2(Ml);U2(Ml);const q2=!0;function Je(n,e=null){if(n===null)return de.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),Q(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const i=n;return new pt(i,Je(e))}if(!(n instanceof Array)&&q2){const i=[];let a=!1;if(vt(n,(h,m)=>{if(h.substring(0,1)!=="."){const p=Je(m);p.isEmpty()||(a=a||!p.getPriority().isEmpty(),i.push(new _e(h,p)))}}),i.length===0)return de.EMPTY_NODE;const c=kc(i,k2,h=>h.name,hm);if(a){const h=kc(i,Qe.getCompare());return new de(c,Je(e),new ss({".priority":h},{".priority":Qe}))}else return new de(c,Je(e),ss.Default)}else{let i=de.EMPTY_NODE;return vt(n,(a,l)=>{if(Mn(n,a)&&a.substring(0,1)!=="."){const c=Je(l);(c.isLeafNode()||!c.isEmpty())&&(i=i.updateImmediateChild(a,c))}}),i.updatePriority(Je(e))}}L2(Je);class fm extends tu{constructor(e){super(),this.indexPath_=e,Q(!ve(e)&&ye(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,i){const a=this.extractChild(e.node),l=this.extractChild(i.node),c=a.compareTo(l);return c===0?Pi(e.name,i.name):c}makePost(e,i){const a=Je(e),l=de.EMPTY_NODE.updateChild(this.indexPath_,a);return new _e(i,l)}maxPost(){const e=de.EMPTY_NODE.updateChild(this.indexPath_,Ml);return new _e(Qs,e)}toString(){return _l(this.indexPath_,0).join("/")}}class V2 extends tu{compare(e,i){const a=e.node.compareTo(i.node);return a===0?Pi(e.name,i.name):a}isDefinedOn(e){return!0}indexedValueChanged(e,i){return!e.equals(i)}minPost(){return _e.MIN}maxPost(){return _e.MAX}makePost(e,i){const a=Je(e);return new _e(i,a)}toString(){return".value"}}const yS=new V2;function vS(n){return{type:"value",snapshotNode:n}}function La(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function bl(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Sl(n,e,i){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:i}}function G2(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}class mm{constructor(e){this.index_=e}updateChild(e,i,a,l,c,h){Q(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const m=e.getImmediateChild(i);return m.getChild(l).equals(a.getChild(l))&&m.isEmpty()===a.isEmpty()||(h!=null&&(a.isEmpty()?e.hasChild(i)?h.trackChildChange(bl(i,m)):Q(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):m.isEmpty()?h.trackChildChange(La(i,a)):h.trackChildChange(Sl(i,a,m))),e.isLeafNode()&&a.isEmpty())?e:e.updateImmediateChild(i,a).withIndex(this.index_)}updateFullNode(e,i,a){return a!=null&&(e.isLeafNode()||e.forEachChild(Qe,(l,c)=>{i.hasChild(l)||a.trackChildChange(bl(l,c))}),i.isLeafNode()||i.forEachChild(Qe,(l,c)=>{if(e.hasChild(l)){const h=e.getImmediateChild(l);h.equals(c)||a.trackChildChange(Sl(l,c,h))}else a.trackChildChange(La(l,c))})),i.withIndex(this.index_)}updatePriority(e,i){return e.isEmpty()?de.EMPTY_NODE:e.updatePriority(i)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class El{constructor(e){this.indexedFilter_=new mm(e.getIndex()),this.index_=e.getIndex(),this.startPost_=El.getStartPost_(e),this.endPost_=El.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const i=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,a=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return i&&a}updateChild(e,i,a,l,c,h){return this.matches(new _e(i,a))||(a=de.EMPTY_NODE),this.indexedFilter_.updateChild(e,i,a,l,c,h)}updateFullNode(e,i,a){i.isLeafNode()&&(i=de.EMPTY_NODE);let l=i.withIndex(this.index_);l=l.updatePriority(de.EMPTY_NODE);const c=this;return i.forEachChild(Qe,(h,m)=>{c.matches(new _e(h,m))||(l=l.updateImmediateChild(h,de.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,l,a)}updatePriority(e,i){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const i=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),i)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const i=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),i)}else return e.getIndex().maxPost()}}class F2{constructor(e){this.withinDirectionalStart=i=>this.reverse_?this.withinEndPost(i):this.withinStartPost(i),this.withinDirectionalEnd=i=>this.reverse_?this.withinStartPost(i):this.withinEndPost(i),this.withinStartPost=i=>{const a=this.index_.compare(this.rangedFilter_.getStartPost(),i);return this.startIsInclusive_?a<=0:a<0},this.withinEndPost=i=>{const a=this.index_.compare(i,this.rangedFilter_.getEndPost());return this.endIsInclusive_?a<=0:a<0},this.rangedFilter_=new El(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,i,a,l,c,h){return this.rangedFilter_.matches(new _e(i,a))||(a=de.EMPTY_NODE),e.getImmediateChild(i).equals(a)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,i,a,l,c,h):this.fullLimitUpdateChild_(e,i,a,c,h)}updateFullNode(e,i,a){let l;if(i.isLeafNode()||i.isEmpty())l=de.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<i.numChildren()&&i.isIndexed(this.index_)){l=de.EMPTY_NODE.withIndex(this.index_);let c;this.reverse_?c=i.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c=i.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let h=0;for(;c.hasNext()&&h<this.limit_;){const m=c.getNext();if(this.withinDirectionalStart(m))if(this.withinDirectionalEnd(m))l=l.updateImmediateChild(m.name,m.node),h++;else break;else continue}}else{l=i.withIndex(this.index_),l=l.updatePriority(de.EMPTY_NODE);let c;this.reverse_?c=l.getReverseIterator(this.index_):c=l.getIterator(this.index_);let h=0;for(;c.hasNext();){const m=c.getNext();h<this.limit_&&this.withinDirectionalStart(m)&&this.withinDirectionalEnd(m)?h++:l=l.updateImmediateChild(m.name,de.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,l,a)}updatePriority(e,i){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,i,a,l,c){let h;if(this.reverse_){const _=this.index_.getCompare();h=(b,C)=>_(C,b)}else h=this.index_.getCompare();const m=e;Q(m.numChildren()===this.limit_,"");const p=new _e(i,a),g=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),v=this.rangedFilter_.matches(p);if(m.hasChild(i)){const _=m.getImmediateChild(i);let b=l.getChildAfterChild(this.index_,g,this.reverse_);for(;b!=null&&(b.name===i||m.hasChild(b.name));)b=l.getChildAfterChild(this.index_,b,this.reverse_);const C=b==null?1:h(b,p);if(v&&!a.isEmpty()&&C>=0)return c?.trackChildChange(Sl(i,a,_)),m.updateImmediateChild(i,a);{c?.trackChildChange(bl(i,_));const O=m.updateImmediateChild(i,de.EMPTY_NODE);return b!=null&&this.rangedFilter_.matches(b)?(c?.trackChildChange(La(b.name,b.node)),O.updateImmediateChild(b.name,b.node)):O}}else return a.isEmpty()?e:v&&h(g,p)>=0?(c!=null&&(c.trackChildChange(bl(g.name,g.node)),c.trackChildChange(La(i,a))),m.updateImmediateChild(i,a).updateImmediateChild(g.name,de.EMPTY_NODE)):e}}class nu{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Qe}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Q(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Q(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ii}hasEnd(){return this.endSet_}getIndexEndValue(){return Q(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Q(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Qs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Q(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Qe}copy(){const e=new nu;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Y2(n){return n.loadsAllData()?new mm(n.getIndex()):n.hasLimit()?new F2(n):new El(n)}function Q2(n,e){const i=n.copy();return i.limitSet_=!0,i.limit_=e,i.viewFrom_="r",i}function K2(n,e,i){const a=n.copy();return a.startSet_=!0,e===void 0&&(e=null),a.indexStartValue_=e,i!=null?(a.startNameSet_=!0,a.indexStartName_=i):(a.startNameSet_=!1,a.indexStartName_=""),a}function W2(n,e,i){const a=n.copy();return a.endSet_=!0,e===void 0&&(e=null),a.indexEndValue_=e,i!==void 0?(a.endNameSet_=!0,a.indexEndName_=i):(a.endNameSet_=!1,a.indexEndName_=""),a}function $2(n,e){const i=n.copy();return i.index_=e,i}function Z_(n){const e={};if(n.isDefault())return e;let i;if(n.index_===Qe?i="$priority":n.index_===yS?i="$value":n.index_===Ti?i="$key":(Q(n.index_ instanceof fm,"Unrecognized index type!"),i=n.index_.toString()),e.orderBy=dt(i),n.startSet_){const a=n.startAfterSet_?"startAfter":"startAt";e[a]=dt(n.indexStartValue_),n.startNameSet_&&(e[a]+=","+dt(n.indexStartName_))}if(n.endSet_){const a=n.endBeforeSet_?"endBefore":"endAt";e[a]=dt(n.indexEndValue_),n.endNameSet_&&(e[a]+=","+dt(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function J_(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let i=n.viewFrom_;i===""&&(n.isViewFromLeft()?i="l":i="r"),e.vf=i}return n.index_!==Qe&&(e.i=n.index_.toString()),e}class Mc extends oS{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,i){return i!==void 0?"tag$"+i:(Q(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,i,a,l){super(),this.repoInfo_=e,this.onDataUpdate_=i,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.log_=kl("p:rest:"),this.listens_={}}listen(e,i,a,l){const c=e._path.toString();this.log_("Listen called for "+c+" "+e._queryIdentifier);const h=Mc.getListenId_(e,a),m={};this.listens_[h]=m;const p=Z_(e._queryParams);this.restRequest_(c+".json",p,(g,v)=>{let _=v;if(g===404&&(_=null,g=null),g===null&&this.onDataUpdate_(c,_,!1,a),Da(this.listens_,h)===m){let b;g?g===401?b="permission_denied":b="rest_error:"+g:b="ok",l(b,null)}})}unlisten(e,i){const a=Mc.getListenId_(e,i);delete this.listens_[a]}get(e){const i=Z_(e._queryParams),a=e._path.toString(),l=new In;return this.restRequest_(a+".json",i,(c,h)=>{let m=h;c===404&&(m=null,c=null),c===null?(this.onDataUpdate_(a,m,!1,null),l.resolve(m)):l.reject(new Error(m))}),l.promise}refreshAuthToken(e){}restRequest_(e,i={},a){return i.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([l,c])=>{l&&l.accessToken&&(i.auth=l.accessToken),c&&c.token&&(i.ac=c.token);const h=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Qa(i);this.log_("Sending REST request for "+h);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(a&&m.readyState===4){this.log_("REST Response for "+h+" received. status:",m.status,"response:",m.responseText);let p=null;if(m.status>=200&&m.status<300){try{p=ml(m.responseText)}catch{Ot("Failed to parse JSON response for "+h+": "+m.responseText)}a(null,p)}else m.status!==401&&m.status!==404&&Ot("Got unsuccessful REST response for "+h+" Status: "+m.status),a(m.status);a=null}},m.open("GET",h,!0),m.send()})}}class X2{constructor(){this.rootNode_=de.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,i){this.rootNode_=this.rootNode_.updateChild(e,i)}}function Lc(){return{value:null,children:new Map}}function Xa(n,e,i){if(ve(e))n.value=i,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,i);else{const a=ye(e);n.children.has(a)||n.children.set(a,Lc());const l=n.children.get(a);e=qe(e),Xa(l,e,i)}}function Ef(n,e){if(ve(e))return n.value=null,n.children.clear(),!0;if(n.value!==null){if(n.value.isLeafNode())return!1;{const i=n.value;return n.value=null,i.forEachChild(Qe,(a,l)=>{Xa(n,new ke(a),l)}),Ef(n,e)}}else if(n.children.size>0){const i=ye(e);return e=qe(e),n.children.has(i)&&Ef(n.children.get(i),e)&&n.children.delete(i),n.children.size===0}else return!0}function Cf(n,e,i){n.value!==null?i(e,n.value):Z2(n,(a,l)=>{const c=new ke(e.toString()+"/"+a);Cf(l,c,i)})}function Z2(n,e){n.children.forEach((i,a)=>{e(a,i)})}class J2{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),i=Object.assign({},e);return this.last_&&vt(this.last_,(a,l)=>{i[a]=i[a]-l}),this.last_=e,i}}const eb=10*1e3,ej=30*1e3,tj=300*1e3;class nj{constructor(e,i){this.server_=i,this.statsToReport_={},this.statsListener_=new J2(e);const a=eb+(ej-eb)*Math.random();cl(this.reportStats_.bind(this),Math.floor(a))}reportStats_(){const e=this.statsListener_.get(),i={};let a=!1;vt(e,(l,c)=>{c>0&&Mn(this.statsToReport_,l)&&(i[l]=c,a=!0)}),a&&this.server_.reportStats(i),cl(this.reportStats_.bind(this),Math.floor(Math.random()*2*tj))}}var Cn;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Cn||(Cn={}));function pm(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function gm(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ym(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Uc{constructor(e,i,a){this.path=e,this.affectedTree=i,this.revert=a,this.type=Cn.ACK_USER_WRITE,this.source=pm()}operationForChild(e){if(ve(this.path)){if(this.affectedTree.value!=null)return Q(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const i=this.affectedTree.subtree(new ke(e));return new Uc(Re(),i,this.revert)}}else return Q(ye(this.path)===e,"operationForChild called for unrelated child."),new Uc(qe(this.path),this.affectedTree,this.revert)}}class Cl{constructor(e,i){this.source=e,this.path=i,this.type=Cn.LISTEN_COMPLETE}operationForChild(e){return ve(this.path)?new Cl(this.source,Re()):new Cl(this.source,qe(this.path))}}class Di{constructor(e,i,a){this.source=e,this.path=i,this.snap=a,this.type=Cn.OVERWRITE}operationForChild(e){return ve(this.path)?new Di(this.source,Re(),this.snap.getImmediateChild(e)):new Di(this.source,qe(this.path),this.snap)}}class Ua{constructor(e,i,a){this.source=e,this.path=i,this.children=a,this.type=Cn.MERGE}operationForChild(e){if(ve(this.path)){const i=this.children.subtree(new ke(e));return i.isEmpty()?null:i.value?new Di(this.source,Re(),i.value):new Ua(this.source,Re(),i)}else return Q(ye(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ua(this.source,qe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ws{constructor(e,i,a){this.node_=e,this.fullyInitialized_=i,this.filtered_=a}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ve(e))return this.isFullyInitialized()&&!this.filtered_;const i=ye(e);return this.isCompleteForChild(i)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class sj{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function ij(n,e,i,a){const l=[],c=[];return e.forEach(h=>{h.type==="child_changed"&&n.index_.indexedValueChanged(h.oldSnap,h.snapshotNode)&&c.push(G2(h.childName,h.snapshotNode))}),nl(n,l,"child_removed",e,a,i),nl(n,l,"child_added",e,a,i),nl(n,l,"child_moved",c,a,i),nl(n,l,"child_changed",e,a,i),nl(n,l,"value",e,a,i),l}function nl(n,e,i,a,l,c){const h=a.filter(m=>m.type===i);h.sort((m,p)=>rj(n,m,p)),h.forEach(m=>{const p=aj(n,m,c);l.forEach(g=>{g.respondsTo(m.type)&&e.push(g.createEvent(p,n.query_))})})}function aj(n,e,i){return e.type==="value"||e.type==="child_removed"||(e.prevName=i.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function rj(n,e,i){if(e.childName==null||i.childName==null)throw Fa("Should only compare child_ events.");const a=new _e(e.childName,e.snapshotNode),l=new _e(i.childName,i.snapshotNode);return n.index_.compare(a,l)}function su(n,e){return{eventCache:n,serverCache:e}}function ul(n,e,i,a){return su(new Ws(e,i,a),n.serverCache)}function _S(n,e,i,a){return su(n.eventCache,new Ws(e,i,a))}function zc(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ki(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let tf;const lj=()=>(tf||(tf=new Bt(VR)),tf);class Ve{static fromObject(e){let i=new Ve(null);return vt(e,(a,l)=>{i=i.set(new ke(a),l)}),i}constructor(e,i=lj()){this.value=e,this.children=i}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,i){if(this.value!=null&&i(this.value))return{path:Re(),value:this.value};if(ve(e))return null;{const a=ye(e),l=this.children.get(a);if(l!==null){const c=l.findRootMostMatchingPathAndValue(qe(e),i);return c!=null?{path:$e(new ke(a),c.path),value:c.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ve(e))return this;{const i=ye(e),a=this.children.get(i);return a!==null?a.subtree(qe(e)):new Ve(null)}}set(e,i){if(ve(e))return new Ve(i,this.children);{const a=ye(e),c=(this.children.get(a)||new Ve(null)).set(qe(e),i),h=this.children.insert(a,c);return new Ve(this.value,h)}}remove(e){if(ve(e))return this.children.isEmpty()?new Ve(null):new Ve(null,this.children);{const i=ye(e),a=this.children.get(i);if(a){const l=a.remove(qe(e));let c;return l.isEmpty()?c=this.children.remove(i):c=this.children.insert(i,l),this.value===null&&c.isEmpty()?new Ve(null):new Ve(this.value,c)}else return this}}get(e){if(ve(e))return this.value;{const i=ye(e),a=this.children.get(i);return a?a.get(qe(e)):null}}setTree(e,i){if(ve(e))return i;{const a=ye(e),c=(this.children.get(a)||new Ve(null)).setTree(qe(e),i);let h;return c.isEmpty()?h=this.children.remove(a):h=this.children.insert(a,c),new Ve(this.value,h)}}fold(e){return this.fold_(Re(),e)}fold_(e,i){const a={};return this.children.inorderTraversal((l,c)=>{a[l]=c.fold_($e(e,l),i)}),i(e,this.value,a)}findOnPath(e,i){return this.findOnPath_(e,Re(),i)}findOnPath_(e,i,a){const l=this.value?a(i,this.value):!1;if(l)return l;if(ve(e))return null;{const c=ye(e),h=this.children.get(c);return h?h.findOnPath_(qe(e),$e(i,c),a):null}}foreachOnPath(e,i){return this.foreachOnPath_(e,Re(),i)}foreachOnPath_(e,i,a){if(ve(e))return this;{this.value&&a(i,this.value);const l=ye(e),c=this.children.get(l);return c?c.foreachOnPath_(qe(e),$e(i,l),a):new Ve(null)}}foreach(e){this.foreach_(Re(),e)}foreach_(e,i){this.children.inorderTraversal((a,l)=>{l.foreach_($e(e,a),i)}),this.value&&i(e,this.value)}foreachChild(e){this.children.inorderTraversal((i,a)=>{a.value&&e(i,a.value)})}}class wn{constructor(e){this.writeTree_=e}static empty(){return new wn(new Ve(null))}}function dl(n,e,i){if(ve(e))return new wn(new Ve(i));{const a=n.writeTree_.findRootMostValueAndPath(e);if(a!=null){const l=a.path;let c=a.value;const h=jt(l,e);return c=c.updateChild(h,i),new wn(n.writeTree_.set(l,c))}else{const l=new Ve(i),c=n.writeTree_.setTree(e,l);return new wn(c)}}}function xf(n,e,i){let a=n;return vt(i,(l,c)=>{a=dl(a,$e(e,l),c)}),a}function tb(n,e){if(ve(e))return wn.empty();{const i=n.writeTree_.setTree(e,new Ve(null));return new wn(i)}}function wf(n,e){return Bi(n,e)!=null}function Bi(n,e){const i=n.writeTree_.findRootMostValueAndPath(e);return i!=null?n.writeTree_.get(i.path).getChild(jt(i.path,e)):null}function nb(n){const e=[],i=n.writeTree_.value;return i!=null?i.isLeafNode()||i.forEachChild(Qe,(a,l)=>{e.push(new _e(a,l))}):n.writeTree_.children.inorderTraversal((a,l)=>{l.value!=null&&e.push(new _e(a,l.value))}),e}function Fs(n,e){if(ve(e))return n;{const i=Bi(n,e);return i!=null?new wn(new Ve(i)):new wn(n.writeTree_.subtree(e))}}function Nf(n){return n.writeTree_.isEmpty()}function za(n,e){return bS(Re(),n.writeTree_,e)}function bS(n,e,i){if(e.value!=null)return i.updateChild(n,e.value);{let a=null;return e.children.inorderTraversal((l,c)=>{l===".priority"?(Q(c.value!==null,"Priority writes must always be leaf nodes"),a=c.value):i=bS($e(n,l),c,i)}),!i.getChild(n).isEmpty()&&a!==null&&(i=i.updateChild($e(n,".priority"),a)),i}}function iu(n,e){return xS(e,n)}function oj(n,e,i,a,l){Q(a>n.lastWriteId,"Stacking an older write on top of newer ones"),l===void 0&&(l=!0),n.allWrites.push({path:e,snap:i,writeId:a,visible:l}),l&&(n.visibleWrites=dl(n.visibleWrites,e,i)),n.lastWriteId=a}function cj(n,e,i,a){Q(a>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:i,writeId:a,visible:!0}),n.visibleWrites=xf(n.visibleWrites,e,i),n.lastWriteId=a}function uj(n,e){for(let i=0;i<n.allWrites.length;i++){const a=n.allWrites[i];if(a.writeId===e)return a}return null}function dj(n,e){const i=n.allWrites.findIndex(m=>m.writeId===e);Q(i>=0,"removeWrite called with nonexistent writeId.");const a=n.allWrites[i];n.allWrites.splice(i,1);let l=a.visible,c=!1,h=n.allWrites.length-1;for(;l&&h>=0;){const m=n.allWrites[h];m.visible&&(h>=i&&hj(m,a.path)?l=!1:hn(a.path,m.path)&&(c=!0)),h--}if(l){if(c)return fj(n),!0;if(a.snap)n.visibleWrites=tb(n.visibleWrites,a.path);else{const m=a.children;vt(m,p=>{n.visibleWrites=tb(n.visibleWrites,$e(a.path,p))})}return!0}else return!1}function hj(n,e){if(n.snap)return hn(n.path,e);for(const i in n.children)if(n.children.hasOwnProperty(i)&&hn($e(n.path,i),e))return!0;return!1}function fj(n){n.visibleWrites=SS(n.allWrites,mj,Re()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function mj(n){return n.visible}function SS(n,e,i){let a=wn.empty();for(let l=0;l<n.length;++l){const c=n[l];if(e(c)){const h=c.path;let m;if(c.snap)hn(i,h)?(m=jt(i,h),a=dl(a,m,c.snap)):hn(h,i)&&(m=jt(h,i),a=dl(a,Re(),c.snap.getChild(m)));else if(c.children){if(hn(i,h))m=jt(i,h),a=xf(a,m,c.children);else if(hn(h,i))if(m=jt(h,i),ve(m))a=xf(a,Re(),c.children);else{const p=Da(c.children,ye(m));if(p){const g=p.getChild(qe(m));a=dl(a,Re(),g)}}}else throw Fa("WriteRecord should have .snap or .children")}}return a}function ES(n,e,i,a,l){if(!a&&!l){const c=Bi(n.visibleWrites,e);if(c!=null)return c;{const h=Fs(n.visibleWrites,e);if(Nf(h))return i;if(i==null&&!wf(h,Re()))return null;{const m=i||de.EMPTY_NODE;return za(h,m)}}}else{const c=Fs(n.visibleWrites,e);if(!l&&Nf(c))return i;if(!l&&i==null&&!wf(c,Re()))return null;{const h=function(g){return(g.visible||l)&&(!a||!~a.indexOf(g.writeId))&&(hn(g.path,e)||hn(e,g.path))},m=SS(n.allWrites,h,e),p=i||de.EMPTY_NODE;return za(m,p)}}}function pj(n,e,i){let a=de.EMPTY_NODE;const l=Bi(n.visibleWrites,e);if(l)return l.isLeafNode()||l.forEachChild(Qe,(c,h)=>{a=a.updateImmediateChild(c,h)}),a;if(i){const c=Fs(n.visibleWrites,e);return i.forEachChild(Qe,(h,m)=>{const p=za(Fs(c,new ke(h)),m);a=a.updateImmediateChild(h,p)}),nb(c).forEach(h=>{a=a.updateImmediateChild(h.name,h.node)}),a}else{const c=Fs(n.visibleWrites,e);return nb(c).forEach(h=>{a=a.updateImmediateChild(h.name,h.node)}),a}}function gj(n,e,i,a,l){Q(a||l,"Either existingEventSnap or existingServerSnap must exist");const c=$e(e,i);if(wf(n.visibleWrites,c))return null;{const h=Fs(n.visibleWrites,c);return Nf(h)?l.getChild(i):za(h,l.getChild(i))}}function yj(n,e,i,a){const l=$e(e,i),c=Bi(n.visibleWrites,l);if(c!=null)return c;if(a.isCompleteForChild(i)){const h=Fs(n.visibleWrites,l);return za(h,a.getNode().getImmediateChild(i))}else return null}function vj(n,e){return Bi(n.visibleWrites,e)}function _j(n,e,i,a,l,c,h){let m;const p=Fs(n.visibleWrites,e),g=Bi(p,Re());if(g!=null)m=g;else if(i!=null)m=za(p,i);else return[];if(m=m.withIndex(h),!m.isEmpty()&&!m.isLeafNode()){const v=[],_=h.getCompare(),b=c?m.getReverseIteratorFrom(a,h):m.getIteratorFrom(a,h);let C=b.getNext();for(;C&&v.length<l;)_(C,a)!==0&&v.push(C),C=b.getNext();return v}else return[]}function bj(){return{visibleWrites:wn.empty(),allWrites:[],lastWriteId:-1}}function Pc(n,e,i,a){return ES(n.writeTree,n.treePath,e,i,a)}function vm(n,e){return pj(n.writeTree,n.treePath,e)}function sb(n,e,i,a){return gj(n.writeTree,n.treePath,e,i,a)}function Bc(n,e){return vj(n.writeTree,$e(n.treePath,e))}function Sj(n,e,i,a,l,c){return _j(n.writeTree,n.treePath,e,i,a,l,c)}function _m(n,e,i){return yj(n.writeTree,n.treePath,e,i)}function CS(n,e){return xS($e(n.treePath,e),n.writeTree)}function xS(n,e){return{treePath:n,writeTree:e}}class Ej{constructor(){this.changeMap=new Map}trackChildChange(e){const i=e.type,a=e.childName;Q(i==="child_added"||i==="child_changed"||i==="child_removed","Only child changes supported for tracking"),Q(a!==".priority","Only non-priority child changes can be tracked.");const l=this.changeMap.get(a);if(l){const c=l.type;if(i==="child_added"&&c==="child_removed")this.changeMap.set(a,Sl(a,e.snapshotNode,l.snapshotNode));else if(i==="child_removed"&&c==="child_added")this.changeMap.delete(a);else if(i==="child_removed"&&c==="child_changed")this.changeMap.set(a,bl(a,l.oldSnap));else if(i==="child_changed"&&c==="child_added")this.changeMap.set(a,La(a,e.snapshotNode));else if(i==="child_changed"&&c==="child_changed")this.changeMap.set(a,Sl(a,e.snapshotNode,l.oldSnap));else throw Fa("Illegal combination of changes: "+e+" occurred after "+l)}else this.changeMap.set(a,e)}getChanges(){return Array.from(this.changeMap.values())}}class Cj{getCompleteChild(e){return null}getChildAfterChild(e,i,a){return null}}const wS=new Cj;class bm{constructor(e,i,a=null){this.writes_=e,this.viewCache_=i,this.optCompleteServerCache_=a}getCompleteChild(e){const i=this.viewCache_.eventCache;if(i.isCompleteForChild(e))return i.getNode().getImmediateChild(e);{const a=this.optCompleteServerCache_!=null?new Ws(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _m(this.writes_,e,a)}}getChildAfterChild(e,i,a){const l=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ki(this.viewCache_),c=Sj(this.writes_,l,i,1,a,e);return c.length===0?null:c[0]}}function xj(n){return{filter:n}}function wj(n,e){Q(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),Q(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function Nj(n,e,i,a,l){const c=new Ej;let h,m;if(i.type===Cn.OVERWRITE){const g=i;g.source.fromUser?h=Tf(n,e,g.path,g.snap,a,l,c):(Q(g.source.fromServer,"Unknown source."),m=g.source.tagged||e.serverCache.isFiltered()&&!ve(g.path),h=Hc(n,e,g.path,g.snap,a,l,m,c))}else if(i.type===Cn.MERGE){const g=i;g.source.fromUser?h=Aj(n,e,g.path,g.children,a,l,c):(Q(g.source.fromServer,"Unknown source."),m=g.source.tagged||e.serverCache.isFiltered(),h=Af(n,e,g.path,g.children,a,l,m,c))}else if(i.type===Cn.ACK_USER_WRITE){const g=i;g.revert?h=Oj(n,e,g.path,a,l,c):h=Rj(n,e,g.path,g.affectedTree,a,l,c)}else if(i.type===Cn.LISTEN_COMPLETE)h=jj(n,e,i.path,a,c);else throw Fa("Unknown operation type: "+i.type);const p=c.getChanges();return Tj(e,h,p),{viewCache:h,changes:p}}function Tj(n,e,i){const a=e.eventCache;if(a.isFullyInitialized()){const l=a.getNode().isLeafNode()||a.getNode().isEmpty(),c=zc(n);(i.length>0||!n.eventCache.isFullyInitialized()||l&&!a.getNode().equals(c)||!a.getNode().getPriority().equals(c.getPriority()))&&i.push(vS(zc(e)))}}function NS(n,e,i,a,l,c){const h=e.eventCache;if(Bc(a,i)!=null)return e;{let m,p;if(ve(i))if(Q(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const g=ki(e),v=g instanceof de?g:de.EMPTY_NODE,_=vm(a,v);m=n.filter.updateFullNode(e.eventCache.getNode(),_,c)}else{const g=Pc(a,ki(e));m=n.filter.updateFullNode(e.eventCache.getNode(),g,c)}else{const g=ye(i);if(g===".priority"){Q(Ks(i)===1,"Can't have a priority with additional path components");const v=h.getNode();p=e.serverCache.getNode();const _=sb(a,i,v,p);_!=null?m=n.filter.updatePriority(v,_):m=h.getNode()}else{const v=qe(i);let _;if(h.isCompleteForChild(g)){p=e.serverCache.getNode();const b=sb(a,i,h.getNode(),p);b!=null?_=h.getNode().getImmediateChild(g).updateChild(v,b):_=h.getNode().getImmediateChild(g)}else _=_m(a,g,e.serverCache);_!=null?m=n.filter.updateChild(h.getNode(),g,_,v,l,c):m=h.getNode()}}return ul(e,m,h.isFullyInitialized()||ve(i),n.filter.filtersNodes())}}function Hc(n,e,i,a,l,c,h,m){const p=e.serverCache;let g;const v=h?n.filter:n.filter.getIndexedFilter();if(ve(i))g=v.updateFullNode(p.getNode(),a,null);else if(v.filtersNodes()&&!p.isFiltered()){const C=p.getNode().updateChild(i,a);g=v.updateFullNode(p.getNode(),C,null)}else{const C=ye(i);if(!p.isCompleteForPath(i)&&Ks(i)>1)return e;const w=qe(i),D=p.getNode().getImmediateChild(C).updateChild(w,a);C===".priority"?g=v.updatePriority(p.getNode(),D):g=v.updateChild(p.getNode(),C,D,w,wS,null)}const _=_S(e,g,p.isFullyInitialized()||ve(i),v.filtersNodes()),b=new bm(l,_,c);return NS(n,_,i,l,b,m)}function Tf(n,e,i,a,l,c,h){const m=e.eventCache;let p,g;const v=new bm(l,e,c);if(ve(i))g=n.filter.updateFullNode(e.eventCache.getNode(),a,h),p=ul(e,g,!0,n.filter.filtersNodes());else{const _=ye(i);if(_===".priority")g=n.filter.updatePriority(e.eventCache.getNode(),a),p=ul(e,g,m.isFullyInitialized(),m.isFiltered());else{const b=qe(i),C=m.getNode().getImmediateChild(_);let w;if(ve(b))w=a;else{const O=v.getCompleteChild(_);O!=null?cm(b)===".priority"&&O.getChild(uS(b)).isEmpty()?w=O:w=O.updateChild(b,a):w=de.EMPTY_NODE}if(C.equals(w))p=e;else{const O=n.filter.updateChild(m.getNode(),_,w,b,v,h);p=ul(e,O,m.isFullyInitialized(),n.filter.filtersNodes())}}}return p}function ib(n,e){return n.eventCache.isCompleteForChild(e)}function Aj(n,e,i,a,l,c,h){let m=e;return a.foreach((p,g)=>{const v=$e(i,p);ib(e,ye(v))&&(m=Tf(n,m,v,g,l,c,h))}),a.foreach((p,g)=>{const v=$e(i,p);ib(e,ye(v))||(m=Tf(n,m,v,g,l,c,h))}),m}function ab(n,e,i){return i.foreach((a,l)=>{e=e.updateChild(a,l)}),e}function Af(n,e,i,a,l,c,h,m){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let p=e,g;ve(i)?g=a:g=new Ve(null).setTree(i,a);const v=e.serverCache.getNode();return g.children.inorderTraversal((_,b)=>{if(v.hasChild(_)){const C=e.serverCache.getNode().getImmediateChild(_),w=ab(n,C,b);p=Hc(n,p,new ke(_),w,l,c,h,m)}}),g.children.inorderTraversal((_,b)=>{const C=!e.serverCache.isCompleteForChild(_)&&b.value===null;if(!v.hasChild(_)&&!C){const w=e.serverCache.getNode().getImmediateChild(_),O=ab(n,w,b);p=Hc(n,p,new ke(_),O,l,c,h,m)}}),p}function Rj(n,e,i,a,l,c,h){if(Bc(l,i)!=null)return e;const m=e.serverCache.isFiltered(),p=e.serverCache;if(a.value!=null){if(ve(i)&&p.isFullyInitialized()||p.isCompleteForPath(i))return Hc(n,e,i,p.getNode().getChild(i),l,c,m,h);if(ve(i)){let g=new Ve(null);return p.getNode().forEachChild(Ti,(v,_)=>{g=g.set(new ke(v),_)}),Af(n,e,i,g,l,c,m,h)}else return e}else{let g=new Ve(null);return a.foreach((v,_)=>{const b=$e(i,v);p.isCompleteForPath(b)&&(g=g.set(v,p.getNode().getChild(b)))}),Af(n,e,i,g,l,c,m,h)}}function jj(n,e,i,a,l){const c=e.serverCache,h=_S(e,c.getNode(),c.isFullyInitialized()||ve(i),c.isFiltered());return NS(n,h,i,a,wS,l)}function Oj(n,e,i,a,l,c){let h;if(Bc(a,i)!=null)return e;{const m=new bm(a,e,l),p=e.eventCache.getNode();let g;if(ve(i)||ye(i)===".priority"){let v;if(e.serverCache.isFullyInitialized())v=Pc(a,ki(e));else{const _=e.serverCache.getNode();Q(_ instanceof de,"serverChildren would be complete if leaf node"),v=vm(a,_)}v=v,g=n.filter.updateFullNode(p,v,c)}else{const v=ye(i);let _=_m(a,v,e.serverCache);_==null&&e.serverCache.isCompleteForChild(v)&&(_=p.getImmediateChild(v)),_!=null?g=n.filter.updateChild(p,v,_,qe(i),m,c):e.eventCache.getNode().hasChild(v)?g=n.filter.updateChild(p,v,de.EMPTY_NODE,qe(i),m,c):g=p,g.isEmpty()&&e.serverCache.isFullyInitialized()&&(h=Pc(a,ki(e)),h.isLeafNode()&&(g=n.filter.updateFullNode(g,h,c)))}return h=e.serverCache.isFullyInitialized()||Bc(a,Re())!=null,ul(e,g,h,n.filter.filtersNodes())}}class Ij{constructor(e,i){this.query_=e,this.eventRegistrations_=[];const a=this.query_._queryParams,l=new mm(a.getIndex()),c=Y2(a);this.processor_=xj(c);const h=i.serverCache,m=i.eventCache,p=l.updateFullNode(de.EMPTY_NODE,h.getNode(),null),g=c.updateFullNode(de.EMPTY_NODE,m.getNode(),null),v=new Ws(p,h.isFullyInitialized(),l.filtersNodes()),_=new Ws(g,m.isFullyInitialized(),c.filtersNodes());this.viewCache_=su(_,v),this.eventGenerator_=new sj(this.query_)}get query(){return this.query_}}function Dj(n){return n.viewCache_.serverCache.getNode()}function kj(n){return zc(n.viewCache_)}function Mj(n,e){const i=ki(n.viewCache_);return i&&(n.query._queryParams.loadsAllData()||!ve(e)&&!i.getImmediateChild(ye(e)).isEmpty())?i.getChild(e):null}function rb(n){return n.eventRegistrations_.length===0}function Lj(n,e){n.eventRegistrations_.push(e)}function lb(n,e,i){const a=[];if(i){Q(e==null,"A cancel should cancel all event registrations.");const l=n.query._path;n.eventRegistrations_.forEach(c=>{const h=c.createCancelEvent(i,l);h&&a.push(h)})}if(e){let l=[];for(let c=0;c<n.eventRegistrations_.length;++c){const h=n.eventRegistrations_[c];if(!h.matches(e))l.push(h);else if(e.hasAnyCallback()){l=l.concat(n.eventRegistrations_.slice(c+1));break}}n.eventRegistrations_=l}else n.eventRegistrations_=[];return a}function ob(n,e,i,a){e.type===Cn.MERGE&&e.source.queryId!==null&&(Q(ki(n.viewCache_),"We should always have a full cache before handling merges"),Q(zc(n.viewCache_),"Missing event cache, even though we have a server cache"));const l=n.viewCache_,c=Nj(n.processor_,l,e,i,a);return wj(n.processor_,c.viewCache),Q(c.viewCache.serverCache.isFullyInitialized()||!l.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=c.viewCache,TS(n,c.changes,c.viewCache.eventCache.getNode(),null)}function Uj(n,e){const i=n.viewCache_.eventCache,a=[];return i.getNode().isLeafNode()||i.getNode().forEachChild(Qe,(c,h)=>{a.push(La(c,h))}),i.isFullyInitialized()&&a.push(vS(i.getNode())),TS(n,a,i.getNode(),e)}function TS(n,e,i,a){const l=a?[a]:n.eventRegistrations_;return ij(n.eventGenerator_,e,i,l)}let qc;class AS{constructor(){this.views=new Map}}function zj(n){Q(!qc,"__referenceConstructor has already been defined"),qc=n}function Pj(){return Q(qc,"Reference.ts has not been loaded"),qc}function Bj(n){return n.views.size===0}function Sm(n,e,i,a){const l=e.source.queryId;if(l!==null){const c=n.views.get(l);return Q(c!=null,"SyncTree gave us an op for an invalid query."),ob(c,e,i,a)}else{let c=[];for(const h of n.views.values())c=c.concat(ob(h,e,i,a));return c}}function RS(n,e,i,a,l){const c=e._queryIdentifier,h=n.views.get(c);if(!h){let m=Pc(i,l?a:null),p=!1;m?p=!0:a instanceof de?(m=vm(i,a),p=!1):(m=de.EMPTY_NODE,p=!1);const g=su(new Ws(m,p,!1),new Ws(a,l,!1));return new Ij(e,g)}return h}function Hj(n,e,i,a,l,c){const h=RS(n,e,a,l,c);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,h),Lj(h,i),Uj(h,i)}function qj(n,e,i,a){const l=e._queryIdentifier,c=[];let h=[];const m=$s(n);if(l==="default")for(const[p,g]of n.views.entries())h=h.concat(lb(g,i,a)),rb(g)&&(n.views.delete(p),g.query._queryParams.loadsAllData()||c.push(g.query));else{const p=n.views.get(l);p&&(h=h.concat(lb(p,i,a)),rb(p)&&(n.views.delete(l),p.query._queryParams.loadsAllData()||c.push(p.query)))}return m&&!$s(n)&&c.push(new(Pj())(e._repo,e._path)),{removed:c,events:h}}function jS(n){const e=[];for(const i of n.views.values())i.query._queryParams.loadsAllData()||e.push(i);return e}function Ys(n,e){let i=null;for(const a of n.views.values())i=i||Mj(a,e);return i}function OS(n,e){if(e._queryParams.loadsAllData())return au(n);{const a=e._queryIdentifier;return n.views.get(a)}}function IS(n,e){return OS(n,e)!=null}function $s(n){return au(n)!=null}function au(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Vc;function Vj(n){Q(!Vc,"__referenceConstructor has already been defined"),Vc=n}function Gj(){return Q(Vc,"Reference.ts has not been loaded"),Vc}let Fj=1;class cb{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ve(null),this.pendingWriteTree_=bj(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function DS(n,e,i,a,l){return oj(n.pendingWriteTree_,e,i,a,l),l?Za(n,new Di(pm(),e,i)):[]}function Yj(n,e,i,a){cj(n.pendingWriteTree_,e,i,a);const l=Ve.fromObject(i);return Za(n,new Ua(pm(),e,l))}function Bs(n,e,i=!1){const a=uj(n.pendingWriteTree_,e);if(dj(n.pendingWriteTree_,e)){let c=new Ve(null);return a.snap!=null?c=c.set(Re(),!0):vt(a.children,h=>{c=c.set(new ke(h),!0)}),Za(n,new Uc(a.path,c,i))}else return[]}function Ll(n,e,i){return Za(n,new Di(gm(),e,i))}function Qj(n,e,i){const a=Ve.fromObject(i);return Za(n,new Ua(gm(),e,a))}function Kj(n,e){return Za(n,new Cl(gm(),e))}function Wj(n,e,i){const a=Cm(n,i);if(a){const l=xm(a),c=l.path,h=l.queryId,m=jt(c,e),p=new Cl(ym(h),m);return wm(n,c,p)}else return[]}function Gc(n,e,i,a,l=!1){const c=e._path,h=n.syncPointTree_.get(c);let m=[];if(h&&(e._queryIdentifier==="default"||IS(h,e))){const p=qj(h,e,i,a);Bj(h)&&(n.syncPointTree_=n.syncPointTree_.remove(c));const g=p.removed;if(m=p.events,!l){const v=g.findIndex(b=>b._queryParams.loadsAllData())!==-1,_=n.syncPointTree_.findOnPath(c,(b,C)=>$s(C));if(v&&!_){const b=n.syncPointTree_.subtree(c);if(!b.isEmpty()){const C=Zj(b);for(let w=0;w<C.length;++w){const O=C[w],D=O.query,A=US(n,O);n.listenProvider_.startListening(hl(D),xl(n,D),A.hashFn,A.onComplete)}}}!_&&g.length>0&&!a&&(v?n.listenProvider_.stopListening(hl(e),null):g.forEach(b=>{const C=n.queryToTagMap.get(ru(b));n.listenProvider_.stopListening(hl(b),C)}))}Jj(n,g)}return m}function kS(n,e,i,a){const l=Cm(n,a);if(l!=null){const c=xm(l),h=c.path,m=c.queryId,p=jt(h,e),g=new Di(ym(m),p,i);return wm(n,h,g)}else return[]}function $j(n,e,i,a){const l=Cm(n,a);if(l){const c=xm(l),h=c.path,m=c.queryId,p=jt(h,e),g=Ve.fromObject(i),v=new Ua(ym(m),p,g);return wm(n,h,v)}else return[]}function Rf(n,e,i,a=!1){const l=e._path;let c=null,h=!1;n.syncPointTree_.foreachOnPath(l,(b,C)=>{const w=jt(b,l);c=c||Ys(C,w),h=h||$s(C)});let m=n.syncPointTree_.get(l);m?(h=h||$s(m),c=c||Ys(m,Re())):(m=new AS,n.syncPointTree_=n.syncPointTree_.set(l,m));let p;c!=null?p=!0:(p=!1,c=de.EMPTY_NODE,n.syncPointTree_.subtree(l).foreachChild((C,w)=>{const O=Ys(w,Re());O&&(c=c.updateImmediateChild(C,O))}));const g=IS(m,e);if(!g&&!e._queryParams.loadsAllData()){const b=ru(e);Q(!n.queryToTagMap.has(b),"View does not exist, but we have a tag");const C=eO();n.queryToTagMap.set(b,C),n.tagToQueryMap.set(C,b)}const v=iu(n.pendingWriteTree_,l);let _=Hj(m,e,i,v,c,p);if(!g&&!h&&!a){const b=OS(m,e);_=_.concat(tO(n,e,b))}return _}function Em(n,e,i){const l=n.pendingWriteTree_,c=n.syncPointTree_.findOnPath(e,(h,m)=>{const p=jt(h,e),g=Ys(m,p);if(g)return g});return ES(l,e,c,i,!0)}function Xj(n,e){const i=e._path;let a=null;n.syncPointTree_.foreachOnPath(i,(g,v)=>{const _=jt(g,i);a=a||Ys(v,_)});let l=n.syncPointTree_.get(i);l?a=a||Ys(l,Re()):(l=new AS,n.syncPointTree_=n.syncPointTree_.set(i,l));const c=a!=null,h=c?new Ws(a,!0,!1):null,m=iu(n.pendingWriteTree_,e._path),p=RS(l,e,m,c?h.getNode():de.EMPTY_NODE,c);return kj(p)}function Za(n,e){return MS(e,n.syncPointTree_,null,iu(n.pendingWriteTree_,Re()))}function MS(n,e,i,a){if(ve(n.path))return LS(n,e,i,a);{const l=e.get(Re());i==null&&l!=null&&(i=Ys(l,Re()));let c=[];const h=ye(n.path),m=n.operationForChild(h),p=e.children.get(h);if(p&&m){const g=i?i.getImmediateChild(h):null,v=CS(a,h);c=c.concat(MS(m,p,g,v))}return l&&(c=c.concat(Sm(l,n,a,i))),c}}function LS(n,e,i,a){const l=e.get(Re());i==null&&l!=null&&(i=Ys(l,Re()));let c=[];return e.children.inorderTraversal((h,m)=>{const p=i?i.getImmediateChild(h):null,g=CS(a,h),v=n.operationForChild(h);v&&(c=c.concat(LS(v,m,p,g)))}),l&&(c=c.concat(Sm(l,n,a,i))),c}function US(n,e){const i=e.query,a=xl(n,i);return{hashFn:()=>(Dj(e)||de.EMPTY_NODE).hash(),onComplete:l=>{if(l==="ok")return a?Wj(n,i._path,a):Kj(n,i._path);{const c=YR(l,i);return Gc(n,i,null,c)}}}}function xl(n,e){const i=ru(e);return n.queryToTagMap.get(i)}function ru(n){return n._path.toString()+"$"+n._queryIdentifier}function Cm(n,e){return n.tagToQueryMap.get(e)}function xm(n){const e=n.indexOf("$");return Q(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new ke(n.substr(0,e))}}function wm(n,e,i){const a=n.syncPointTree_.get(e);Q(a,"Missing sync point for query tag that we're tracking");const l=iu(n.pendingWriteTree_,e);return Sm(a,i,l,null)}function Zj(n){return n.fold((e,i,a)=>{if(i&&$s(i))return[au(i)];{let l=[];return i&&(l=jS(i)),vt(a,(c,h)=>{l=l.concat(h)}),l}})}function hl(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(Gj())(n._repo,n._path):n}function Jj(n,e){for(let i=0;i<e.length;++i){const a=e[i];if(!a._queryParams.loadsAllData()){const l=ru(a),c=n.queryToTagMap.get(l);n.queryToTagMap.delete(l),n.tagToQueryMap.delete(c)}}}function eO(){return Fj++}function tO(n,e,i){const a=e._path,l=xl(n,e),c=US(n,i),h=n.listenProvider_.startListening(hl(e),l,c.hashFn,c.onComplete),m=n.syncPointTree_.subtree(a);if(l)Q(!$s(m.value),"If we're adding a query, it shouldn't be shadowed");else{const p=m.fold((g,v,_)=>{if(!ve(g)&&v&&$s(v))return[au(v).query];{let b=[];return v&&(b=b.concat(jS(v).map(C=>C.query))),vt(_,(C,w)=>{b=b.concat(w)}),b}});for(let g=0;g<p.length;++g){const v=p[g];n.listenProvider_.stopListening(hl(v),xl(n,v))}}return h}class Nm{constructor(e){this.node_=e}getImmediateChild(e){const i=this.node_.getImmediateChild(e);return new Nm(i)}node(){return this.node_}}class Tm{constructor(e,i){this.syncTree_=e,this.path_=i}getImmediateChild(e){const i=$e(this.path_,e);return new Tm(this.syncTree_,i)}node(){return Em(this.syncTree_,this.path_)}}const nO=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},ub=function(n,e,i){if(!n||typeof n!="object")return n;if(Q(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return sO(n[".sv"],e,i);if(typeof n[".sv"]=="object")return iO(n[".sv"],e);Q(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},sO=function(n,e,i){switch(n){case"timestamp":return i.timestamp;default:Q(!1,"Unexpected server value: "+n)}},iO=function(n,e,i){n.hasOwnProperty("increment")||Q(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const a=n.increment;typeof a!="number"&&Q(!1,"Unexpected increment value: "+a);const l=e.node();if(Q(l!==null&&typeof l<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!l.isLeafNode())return a;const h=l.getValue();return typeof h!="number"?a:h+a},zS=function(n,e,i,a){return Am(e,new Tm(i,n),a)},PS=function(n,e,i){return Am(n,new Nm(e),i)};function Am(n,e,i){const a=n.getPriority().val(),l=ub(a,e.getImmediateChild(".priority"),i);let c;if(n.isLeafNode()){const h=n,m=ub(h.getValue(),e,i);return m!==h.getValue()||l!==h.getPriority().val()?new pt(m,Je(l)):n}else{const h=n;return c=h,l!==h.getPriority().val()&&(c=c.updatePriority(new pt(l))),h.forEachChild(Qe,(m,p)=>{const g=Am(p,e.getImmediateChild(m),i);g!==p&&(c=c.updateImmediateChild(m,g))}),c}}class Rm{constructor(e="",i=null,a={children:{},childCount:0}){this.name=e,this.parent=i,this.node=a}}function jm(n,e){let i=e instanceof ke?e:new ke(e),a=n,l=ye(i);for(;l!==null;){const c=Da(a.node.children,l)||{children:{},childCount:0};a=new Rm(l,a,c),i=qe(i),l=ye(i)}return a}function Ja(n){return n.node.value}function BS(n,e){n.node.value=e,jf(n)}function HS(n){return n.node.childCount>0}function aO(n){return Ja(n)===void 0&&!HS(n)}function lu(n,e){vt(n.node.children,(i,a)=>{e(new Rm(i,n,a))})}function qS(n,e,i,a){i&&e(n),lu(n,l=>{qS(l,e,!0)})}function rO(n,e,i){let a=n.parent;for(;a!==null;){if(e(a))return!0;a=a.parent}return!1}function Ul(n){return new ke(n.parent===null?n.name:Ul(n.parent)+"/"+n.name)}function jf(n){n.parent!==null&&lO(n.parent,n.name,n)}function lO(n,e,i){const a=aO(i),l=Mn(n.node.children,e);a&&l?(delete n.node.children[e],n.node.childCount--,jf(n)):!a&&!l&&(n.node.children[e]=i.node,n.node.childCount++,jf(n))}const oO=/[\[\].#$\/\u0000-\u001F\u007F]/,cO=/[\[\].#$\u0000-\u001F\u007F]/,nf=10*1024*1024,Om=function(n){return typeof n=="string"&&n.length!==0&&!oO.test(n)},VS=function(n){return typeof n=="string"&&n.length!==0&&!cO.test(n)},uO=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),VS(n)},Fc=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!eu(n)||n&&typeof n=="object"&&Mn(n,".sv")},Mi=function(n,e,i,a){a&&e===void 0||ou(ka(n,"value"),e,i)},ou=function(n,e,i){const a=i instanceof ke?new N2(i,n):i;if(e===void 0)throw new Error(n+"contains undefined "+Ci(a));if(typeof e=="function")throw new Error(n+"contains a function "+Ci(a)+" with contents = "+e.toString());if(eu(e))throw new Error(n+"contains "+e.toString()+" "+Ci(a));if(typeof e=="string"&&e.length>nf/3&&$c(e)>nf)throw new Error(n+"contains a string greater than "+nf+" utf8 bytes "+Ci(a)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let l=!1,c=!1;if(vt(e,(h,m)=>{if(h===".value")l=!0;else if(h!==".priority"&&h!==".sv"&&(c=!0,!Om(h)))throw new Error(n+" contains an invalid key ("+h+") "+Ci(a)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);T2(a,h),ou(n,m,a),A2(a)}),l&&c)throw new Error(n+' contains ".value" child '+Ci(a)+" in addition to actual children.")}},dO=function(n,e){let i,a;for(i=0;i<e.length;i++){a=e[i];const c=_l(a);for(let h=0;h<c.length;h++)if(!(c[h]===".priority"&&h===c.length-1)){if(!Om(c[h]))throw new Error(n+"contains an invalid key ("+c[h]+") in path "+a.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(w2);let l=null;for(i=0;i<e.length;i++){if(a=e[i],l!==null&&hn(l,a))throw new Error(n+"contains a path "+l.toString()+" that is ancestor of another path "+a.toString());l=a}},GS=function(n,e,i,a){const l=ka(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(l+" must be an object containing the children to replace.");const c=[];vt(e,(h,m)=>{const p=new ke(h);if(ou(l,m,$e(i,p)),cm(p)===".priority"&&!Fc(m))throw new Error(l+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");c.push(p)}),dO(l,c)},hO=function(n,e,i){if(eu(e))throw new Error(ka(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Fc(e))throw new Error(ka(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},cu=function(n,e,i,a){if(!VS(i))throw new Error(ka(n,e)+'was an invalid path = "'+i+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},fO=function(n,e,i,a){i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),cu(n,e,i)},Hs=function(n,e){if(ye(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},mO=function(n,e){const i=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Om(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||i.length!==0&&!uO(i))throw new Error(ka(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class pO{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function uu(n,e){let i=null;for(let a=0;a<e.length;a++){const l=e[a],c=l.getPath();i!==null&&!um(c,i.path)&&(n.eventLists_.push(i),i=null),i===null&&(i={events:[],path:c}),i.events.push(l)}i&&n.eventLists_.push(i)}function FS(n,e,i){uu(n,i),YS(n,a=>um(a,e))}function pn(n,e,i){uu(n,i),YS(n,a=>hn(a,e)||hn(e,a))}function YS(n,e){n.recursionDepth_++;let i=!0;for(let a=0;a<n.eventLists_.length;a++){const l=n.eventLists_[a];if(l){const c=l.path;e(c)?(gO(n.eventLists_[a]),n.eventLists_[a]=null):i=!1}}i&&(n.eventLists_=[]),n.recursionDepth_--}function gO(n){for(let e=0;e<n.events.length;e++){const i=n.events[e];if(i!==null){n.events[e]=null;const a=i.getEventRunner();ol&&yt("event: "+i.toString()),$a(a)}}}const yO="repo_interrupt",vO=25;class _O{constructor(e,i,a,l){this.repoInfo_=e,this.forceRestClient_=i,this.authTokenProvider_=a,this.appCheckProvider_=l,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new pO,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Lc(),this.transactionQueueTree_=new Rm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function bO(n,e,i){if(n.stats_=lm(n.repoInfo_),n.forceRestClient_||$R())n.server_=new Mc(n.repoInfo_,(a,l,c,h)=>{db(n,a,l,c,h)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>hb(n,!0),0);else{if(typeof i<"u"&&i!==null){if(typeof i!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{dt(i)}catch(a){throw new Error("Invalid authOverride provided: "+a)}}n.persistentConnection_=new rs(n.repoInfo_,e,(a,l,c,h)=>{db(n,a,l,c,h)},a=>{hb(n,a)},a=>{SO(n,a)},n.authTokenProvider_,n.appCheckProvider_,i),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(a=>{n.server_.refreshAuthToken(a)}),n.appCheckProvider_.addTokenChangeListener(a=>{n.server_.refreshAppCheckToken(a.token)}),n.statsReporter_=t2(n.repoInfo_,()=>new nj(n.stats_,n.server_)),n.infoData_=new X2,n.infoSyncTree_=new cb({startListening:(a,l,c,h)=>{let m=[];const p=n.infoData_.getNode(a._path);return p.isEmpty()||(m=Ll(n.infoSyncTree_,a._path,p),setTimeout(()=>{h("ok")},0)),m},stopListening:()=>{}}),Im(n,"connected",!1),n.serverSyncTree_=new cb({startListening:(a,l,c,h)=>(n.server_.listen(a,c,l,(m,p)=>{const g=h(m,p);pn(n.eventQueue_,a._path,g)}),[]),stopListening:(a,l)=>{n.server_.unlisten(a,l)}})}function QS(n){const i=n.infoData_.getNode(new ke(".info/serverTimeOffset")).val()||0;return new Date().getTime()+i}function du(n){return nO({timestamp:QS(n)})}function db(n,e,i,a,l){n.dataUpdateCount++;const c=new ke(e);i=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,i):i;let h=[];if(l)if(a){const p=xc(i,g=>Je(g));h=$j(n.serverSyncTree_,c,p,l)}else{const p=Je(i);h=kS(n.serverSyncTree_,c,p,l)}else if(a){const p=xc(i,g=>Je(g));h=Qj(n.serverSyncTree_,c,p)}else{const p=Je(i);h=Ll(n.serverSyncTree_,c,p)}let m=c;h.length>0&&(m=Pa(n,c)),pn(n.eventQueue_,m,h)}function hb(n,e){Im(n,"connected",e),e===!1&&wO(n)}function SO(n,e){vt(e,(i,a)=>{Im(n,i,a)})}function Im(n,e,i){const a=new ke("/.info/"+e),l=Je(i);n.infoData_.updateSnapshot(a,l);const c=Ll(n.infoSyncTree_,a,l);pn(n.eventQueue_,a,c)}function Dm(n){return n.nextWriteId_++}function EO(n,e,i){const a=Xj(n.serverSyncTree_,e);return a!=null?Promise.resolve(a):n.server_.get(e).then(l=>{const c=Je(l).withIndex(e._queryParams.getIndex());Rf(n.serverSyncTree_,e,i,!0);let h;if(e._queryParams.loadsAllData())h=Ll(n.serverSyncTree_,e._path,c);else{const m=xl(n.serverSyncTree_,e);h=kS(n.serverSyncTree_,e._path,c,m)}return pn(n.eventQueue_,e._path,h),Gc(n.serverSyncTree_,e,i,null,!0),c},l=>(zl(n,"get for query "+dt(e)+" failed: "+l),Promise.reject(new Error(l))))}function CO(n,e,i,a,l){zl(n,"set",{path:e.toString(),value:i,priority:a});const c=du(n),h=Je(i,a),m=Em(n.serverSyncTree_,e),p=PS(h,m,c),g=Dm(n),v=DS(n.serverSyncTree_,e,p,g,!0);uu(n.eventQueue_,v),n.server_.put(e.toString(),h.val(!0),(b,C)=>{const w=b==="ok";w||Ot("set at "+e+" failed: "+b);const O=Bs(n.serverSyncTree_,g,!w);pn(n.eventQueue_,e,O),Xs(n,l,b,C)});const _=Mm(n,e);Pa(n,_),pn(n.eventQueue_,_,[])}function xO(n,e,i,a){zl(n,"update",{path:e.toString(),value:i});let l=!0;const c=du(n),h={};if(vt(i,(m,p)=>{l=!1,h[m]=zS($e(e,m),Je(p),n.serverSyncTree_,c)}),l)yt("update() called with empty data.  Don't do anything."),Xs(n,a,"ok",void 0);else{const m=Dm(n),p=Yj(n.serverSyncTree_,e,h,m);uu(n.eventQueue_,p),n.server_.merge(e.toString(),i,(g,v)=>{const _=g==="ok";_||Ot("update at "+e+" failed: "+g);const b=Bs(n.serverSyncTree_,m,!_),C=b.length>0?Pa(n,e):e;pn(n.eventQueue_,C,b),Xs(n,a,g,v)}),vt(i,g=>{const v=Mm(n,$e(e,g));Pa(n,v)}),pn(n.eventQueue_,e,[])}}function wO(n){zl(n,"onDisconnectEvents");const e=du(n),i=Lc();Cf(n.onDisconnect_,Re(),(l,c)=>{const h=zS(l,c,n.serverSyncTree_,e);Xa(i,l,h)});let a=[];Cf(i,Re(),(l,c)=>{a=a.concat(Ll(n.serverSyncTree_,l,c));const h=Mm(n,l);Pa(n,h)}),n.onDisconnect_=Lc(),pn(n.eventQueue_,Re(),a)}function NO(n,e,i){n.server_.onDisconnectCancel(e.toString(),(a,l)=>{a==="ok"&&Ef(n.onDisconnect_,e),Xs(n,i,a,l)})}function fb(n,e,i,a){const l=Je(i);n.server_.onDisconnectPut(e.toString(),l.val(!0),(c,h)=>{c==="ok"&&Xa(n.onDisconnect_,e,l),Xs(n,a,c,h)})}function TO(n,e,i,a,l){const c=Je(i,a);n.server_.onDisconnectPut(e.toString(),c.val(!0),(h,m)=>{h==="ok"&&Xa(n.onDisconnect_,e,c),Xs(n,l,h,m)})}function AO(n,e,i,a){if(Cc(i)){yt("onDisconnect().update() called with empty data.  Don't do anything."),Xs(n,a,"ok",void 0);return}n.server_.onDisconnectMerge(e.toString(),i,(l,c)=>{l==="ok"&&vt(i,(h,m)=>{const p=Je(m);Xa(n.onDisconnect_,$e(e,h),p)}),Xs(n,a,l,c)})}function RO(n,e,i){let a;ye(e._path)===".info"?a=Rf(n.infoSyncTree_,e,i):a=Rf(n.serverSyncTree_,e,i),FS(n.eventQueue_,e._path,a)}function mb(n,e,i){let a;ye(e._path)===".info"?a=Gc(n.infoSyncTree_,e,i):a=Gc(n.serverSyncTree_,e,i),FS(n.eventQueue_,e._path,a)}function jO(n){n.persistentConnection_&&n.persistentConnection_.interrupt(yO)}function zl(n,...e){let i="";n.persistentConnection_&&(i=n.persistentConnection_.id+":"),yt(i,...e)}function Xs(n,e,i,a){e&&$a(()=>{if(i==="ok")e(null);else{const l=(i||"error").toUpperCase();let c=l;a&&(c+=": "+a);const h=new Error(c);h.code=l,e(h)}})}function KS(n,e,i){return Em(n.serverSyncTree_,e,i)||de.EMPTY_NODE}function km(n,e=n.transactionQueueTree_){if(e||hu(n,e),Ja(e)){const i=$S(n,e);Q(i.length>0,"Sending zero length transaction queue"),i.every(l=>l.status===0)&&OO(n,Ul(e),i)}else HS(e)&&lu(e,i=>{km(n,i)})}function OO(n,e,i){const a=i.map(g=>g.currentWriteId),l=KS(n,e,a);let c=l;const h=l.hash();for(let g=0;g<i.length;g++){const v=i[g];Q(v.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),v.status=1,v.retryCount++;const _=jt(e,v.path);c=c.updateChild(_,v.currentOutputSnapshotRaw)}const m=c.val(!0),p=e;n.server_.put(p.toString(),m,g=>{zl(n,"transaction put response",{path:p.toString(),status:g});let v=[];if(g==="ok"){const _=[];for(let b=0;b<i.length;b++)i[b].status=2,v=v.concat(Bs(n.serverSyncTree_,i[b].currentWriteId)),i[b].onComplete&&_.push(()=>i[b].onComplete(null,!0,i[b].currentOutputSnapshotResolved)),i[b].unwatcher();hu(n,jm(n.transactionQueueTree_,e)),km(n,n.transactionQueueTree_),pn(n.eventQueue_,e,v);for(let b=0;b<_.length;b++)$a(_[b])}else{if(g==="datastale")for(let _=0;_<i.length;_++)i[_].status===3?i[_].status=4:i[_].status=0;else{Ot("transaction at "+p.toString()+" failed: "+g);for(let _=0;_<i.length;_++)i[_].status=4,i[_].abortReason=g}Pa(n,e)}},h)}function Pa(n,e){const i=WS(n,e),a=Ul(i),l=$S(n,i);return IO(n,l,a),a}function IO(n,e,i){if(e.length===0)return;const a=[];let l=[];const h=e.filter(m=>m.status===0).map(m=>m.currentWriteId);for(let m=0;m<e.length;m++){const p=e[m],g=jt(i,p.path);let v=!1,_;if(Q(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),p.status===4)v=!0,_=p.abortReason,l=l.concat(Bs(n.serverSyncTree_,p.currentWriteId,!0));else if(p.status===0)if(p.retryCount>=vO)v=!0,_="maxretry",l=l.concat(Bs(n.serverSyncTree_,p.currentWriteId,!0));else{const b=KS(n,p.path,h);p.currentInputSnapshot=b;const C=e[m].update(b.val());if(C!==void 0){ou("transaction failed: Data returned ",C,p.path);let w=Je(C);typeof C=="object"&&C!=null&&Mn(C,".priority")||(w=w.updatePriority(b.getPriority()));const D=p.currentWriteId,A=du(n),H=PS(w,b,A);p.currentOutputSnapshotRaw=w,p.currentOutputSnapshotResolved=H,p.currentWriteId=Dm(n),h.splice(h.indexOf(D),1),l=l.concat(DS(n.serverSyncTree_,p.path,H,p.currentWriteId,p.applyLocally)),l=l.concat(Bs(n.serverSyncTree_,D,!0))}else v=!0,_="nodata",l=l.concat(Bs(n.serverSyncTree_,p.currentWriteId,!0))}pn(n.eventQueue_,i,l),l=[],v&&(e[m].status=2,(function(b){setTimeout(b,Math.floor(0))})(e[m].unwatcher),e[m].onComplete&&(_==="nodata"?a.push(()=>e[m].onComplete(null,!1,e[m].currentInputSnapshot)):a.push(()=>e[m].onComplete(new Error(_),!1,null))))}hu(n,n.transactionQueueTree_);for(let m=0;m<a.length;m++)$a(a[m]);km(n,n.transactionQueueTree_)}function WS(n,e){let i,a=n.transactionQueueTree_;for(i=ye(e);i!==null&&Ja(a)===void 0;)a=jm(a,i),e=qe(e),i=ye(e);return a}function $S(n,e){const i=[];return XS(n,e,i),i.sort((a,l)=>a.order-l.order),i}function XS(n,e,i){const a=Ja(e);if(a)for(let l=0;l<a.length;l++)i.push(a[l]);lu(e,l=>{XS(n,l,i)})}function hu(n,e){const i=Ja(e);if(i){let a=0;for(let l=0;l<i.length;l++)i[l].status!==2&&(i[a]=i[l],a++);i.length=a,BS(e,i.length>0?i:void 0)}lu(e,a=>{hu(n,a)})}function Mm(n,e){const i=Ul(WS(n,e)),a=jm(n.transactionQueueTree_,e);return rO(a,l=>{sf(n,l)}),sf(n,a),qS(a,l=>{sf(n,l)}),i}function sf(n,e){const i=Ja(e);if(i){const a=[];let l=[],c=-1;for(let h=0;h<i.length;h++)i[h].status===3||(i[h].status===1?(Q(c===h-1,"All SENT items should be at beginning of queue."),c=h,i[h].status=3,i[h].abortReason="set"):(Q(i[h].status===0,"Unexpected transaction status in abort"),i[h].unwatcher(),l=l.concat(Bs(n.serverSyncTree_,i[h].currentWriteId,!0)),i[h].onComplete&&a.push(i[h].onComplete.bind(null,new Error("set"),!1,null))));c===-1?BS(e,void 0):i.length=c+1,pn(n.eventQueue_,Ul(e),l);for(let h=0;h<a.length;h++)$a(a[h])}}function DO(n){let e="";const i=n.split("/");for(let a=0;a<i.length;a++)if(i[a].length>0){let l=i[a];try{l=decodeURIComponent(l.replace(/\+/g," "))}catch{}e+="/"+l}return e}function kO(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const i of n.split("&")){if(i.length===0)continue;const a=i.split("=");a.length===2?e[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Ot(`Invalid query segment '${i}' in query '${n}'`)}return e}const pb=function(n,e){const i=MO(n),a=i.namespace;i.domain==="firebase.com"&&us(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!a||a==="undefined")&&i.domain!=="localhost"&&us("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||HR();const l=i.scheme==="ws"||i.scheme==="wss";return{repoInfo:new tS(i.host,i.secure,a,l,e,"",a!==i.subdomain),path:new ke(i.pathString)}},MO=function(n){let e="",i="",a="",l="",c="",h=!0,m="https",p=443;if(typeof n=="string"){let g=n.indexOf("//");g>=0&&(m=n.substring(0,g-1),n=n.substring(g+2));let v=n.indexOf("/");v===-1&&(v=n.length);let _=n.indexOf("?");_===-1&&(_=n.length),e=n.substring(0,Math.min(v,_)),v<_&&(l=DO(n.substring(v,_)));const b=kO(n.substring(Math.min(n.length,_)));g=e.indexOf(":"),g>=0?(h=m==="https"||m==="wss",p=parseInt(e.substring(g+1),10)):g=e.length;const C=e.slice(0,g);if(C.toLowerCase()==="localhost")i="localhost";else if(C.split(".").length<=2)i=C;else{const w=e.indexOf(".");a=e.substring(0,w).toLowerCase(),i=e.substring(w+1),c=a}"ns"in b&&(c=b.ns)}return{host:e,port:p,domain:i,subdomain:a,secure:h,scheme:m,pathString:l,namespace:c}};const gb="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",LO=(function(){let n=0;const e=[];return function(i){const a=i===n;n=i;let l;const c=new Array(8);for(l=7;l>=0;l--)c[l]=gb.charAt(i%64),i=Math.floor(i/64);Q(i===0,"Cannot push at time == 0");let h=c.join("");if(a){for(l=11;l>=0&&e[l]===63;l--)e[l]=0;e[l]++}else for(l=0;l<12;l++)e[l]=Math.floor(Math.random()*64);for(l=0;l<12;l++)h+=gb.charAt(e[l]);return Q(h.length===20,"nextPushId: Length should be 20."),h}})();class ZS{constructor(e,i,a,l){this.eventType=e,this.eventRegistration=i,this.snapshot=a,this.prevName=l}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+dt(this.snapshot.exportVal())}}class JS{constructor(e,i,a){this.eventRegistration=e,this.error=i,this.path=a}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class eE{constructor(e,i){this.snapshotCallback=e,this.cancelCallback=i}onValue(e,i){this.snapshotCallback.call(null,e,i)}onCancel(e){return Q(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class tE{constructor(e,i){this._repo=e,this._path=i}cancel(){const e=new In;return NO(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Hs("OnDisconnect.remove",this._path);const e=new In;return fb(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Hs("OnDisconnect.set",this._path),Mi("OnDisconnect.set",e,this._path,!1);const i=new In;return fb(this._repo,this._path,e,i.wrapCallback(()=>{})),i.promise}setWithPriority(e,i){Hs("OnDisconnect.setWithPriority",this._path),Mi("OnDisconnect.setWithPriority",e,this._path,!1),hO("OnDisconnect.setWithPriority",i);const a=new In;return TO(this._repo,this._path,e,i,a.wrapCallback(()=>{})),a.promise}update(e){Hs("OnDisconnect.update",this._path),GS("OnDisconnect.update",e,this._path);const i=new In;return AO(this._repo,this._path,e,i.wrapCallback(()=>{})),i.promise}}class ni{constructor(e,i,a,l){this._repo=e,this._path=i,this._queryParams=a,this._orderByCalled=l}get key(){return ve(this._path)?null:cm(this._path)}get ref(){return new Tn(this._repo,this._path)}get _queryIdentifier(){const e=J_(this._queryParams),i=am(e);return i==="{}"?"default":i}get _queryObject(){return J_(this._queryParams)}isEqual(e){if(e=_t(e),!(e instanceof ni))return!1;const i=this._repo===e._repo,a=um(this._path,e._path),l=this._queryIdentifier===e._queryIdentifier;return i&&a&&l}toJSON(){return this.toString()}toString(){return this._repo.toString()+x2(this._path)}}function UO(n,e){if(n._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Lm(n){let e=null,i=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(i=n.getIndexEndValue()),n.getIndex()===Ti){const a="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",l="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Ii)throw new Error(a);if(typeof e!="string")throw new Error(l)}if(n.hasEnd()){if(n.getIndexEndName()!==Qs)throw new Error(a);if(typeof i!="string")throw new Error(l)}}else if(n.getIndex()===Qe){if(e!=null&&!Fc(e)||i!=null&&!Fc(i))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Q(n.getIndex()instanceof fm||n.getIndex()===yS,"unknown index type."),e!=null&&typeof e=="object"||i!=null&&typeof i=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function nE(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Tn extends ni{constructor(e,i){super(e,i,new nu,!1)}get parent(){const e=uS(this._path);return e===null?null:new Tn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Li{constructor(e,i,a){this._node=e,this.ref=i,this._index=a}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const i=new ke(e),a=Ui(this.ref,e);return new Li(this._node.getChild(i),a,Qe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(a,l)=>e(new Li(l,Ui(this.ref,a),Qe)))}hasChild(e){const i=new ke(e);return!this._node.getChild(i).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ae(n,e){return n=_t(n),n._checkNotDeleted("ref"),e!==void 0?Ui(n._root,e):n._root}function Ui(n,e){return n=_t(n),ye(n._path)===null?fO("child","path",e):cu("child","path",e),new Tn(n._repo,$e(n._path,e))}function Of(n){return n=_t(n),new tE(n._repo,n._path)}function er(n,e){n=_t(n),Hs("push",n._path),Mi("push",e,n._path,!0);const i=QS(n._repo),a=LO(i),l=Ui(n,a),c=Ui(n,a);let h;return h=Promise.resolve(c),l.then=h.then.bind(h),l.catch=h.then.bind(h,void 0),l}function fu(n){return Hs("remove",n._path),ht(n,null)}function ht(n,e){n=_t(n),Hs("set",n._path),Mi("set",e,n._path,!1);const i=new In;return CO(n._repo,n._path,e,null,i.wrapCallback(()=>{})),i.promise}function Hi(n,e){GS("update",e,n._path);const i=new In;return xO(n._repo,n._path,e,i.wrapCallback(()=>{})),i.promise}function it(n){n=_t(n);const e=new eE(()=>{}),i=new mu(e);return EO(n._repo,n,i).then(a=>new Li(a,new Tn(n._repo,n._path),n._queryParams.getIndex()))}class mu{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,i){const a=i._queryParams.getIndex();return new ZS("value",this,new Li(e.snapshotNode,new Tn(i._repo,i._path),a))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,i){return this.callbackContext.hasCancelCallback?new JS(this,e,i):null}matches(e){return e instanceof mu?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Um{constructor(e,i){this.eventType=e,this.callbackContext=i}respondsTo(e){let i=e==="children_added"?"child_added":e;return i=i==="children_removed"?"child_removed":i,this.eventType===i}createCancelEvent(e,i){return this.callbackContext.hasCancelCallback?new JS(this,e,i):null}createEvent(e,i){Q(e.childName!=null,"Child events should have a childName.");const a=Ui(new Tn(i._repo,i._path),e.childName),l=i._queryParams.getIndex();return new ZS(e.type,this,new Li(e.snapshotNode,a,l),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Um?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function sE(n,e,i,a,l){let c;if(typeof a=="object"&&(c=void 0,l=a),typeof a=="function"&&(c=a),l&&l.onlyOnce){const p=i,g=(v,_)=>{mb(n._repo,n,m),p(v,_)};g.userCallback=i.userCallback,g.context=i.context,i=g}const h=new eE(i,c||void 0),m=e==="value"?new mu(h):new Um(e,h);return RO(n._repo,n,m),()=>mb(n._repo,n,m)}function Ht(n,e,i,a){return sE(n,"value",e,i,a)}function iE(n,e,i,a){return sE(n,"child_added",e,i,a)}class tr{}class zO extends tr{constructor(e,i){super(),this._value=e,this._key=i,this.type="endAt"}_apply(e){Mi("endAt",this._value,e._path,!0);const i=W2(e._queryParams,this._value,this._key);if(nE(i),Lm(i),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ni(e._repo,e._path,i,e._orderByCalled)}}class PO extends tr{constructor(e,i){super(),this._value=e,this._key=i,this.type="startAt"}_apply(e){Mi("startAt",this._value,e._path,!0);const i=K2(e._queryParams,this._value,this._key);if(nE(i),Lm(i),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ni(e._repo,e._path,i,e._orderByCalled)}}class BO extends tr{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ni(e._repo,e._path,Q2(e._queryParams,this._limit),e._orderByCalled)}}function zm(n){if(Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new BO(n)}class HO extends tr{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){UO(e,"orderByChild");const i=new ke(this._path);if(ve(i))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const a=new fm(i),l=$2(e._queryParams,a);return Lm(l),new ni(e._repo,e._path,l,!0)}}function Pl(n){if(n==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(n==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(n==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return cu("orderByChild","path",n),new HO(n)}class qO extends tr{constructor(e,i){super(),this._value=e,this._key=i,this.type="equalTo"}_apply(e){if(Mi("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new zO(this._value,this._key)._apply(new PO(this._value,this._key)._apply(e))}}function aE(n,e){return new qO(n,e)}function Bl(n,...e){let i=_t(n);for(const a of e)i=a._apply(i);return i}zj(Tn);Vj(Tn);const VO="FIREBASE_DATABASE_EMULATOR_HOST",If={};let GO=!1;function FO(n,e,i,a){const l=e.lastIndexOf(":"),c=e.substring(0,l),h=Ya(c);n.repoInfo_=new tS(e,h,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,i),a&&(n.authTokenProvider_=a)}function rE(n,e,i,a,l){let c=a||n.options.databaseURL;c===void 0&&(n.options.projectId||us("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),yt("Using default host for project ",n.options.projectId),c=`${n.options.projectId}-default-rtdb.firebaseio.com`);let h=pb(c,l),m=h.repoInfo,p;typeof process<"u"&&M_&&(p=M_[VO]),p?(c=`http://${p}?ns=${m.namespace}`,h=pb(c,l),m=h.repoInfo):h.repoInfo.secure;const g=new ZR(n.name,n.options,e);mO("Invalid Firebase Database URL",h),ve(h.path)||us("Database URL must point to the root of a Firebase Database (not including a child path).");const v=QO(m,n,g,new XR(n,i));return new lE(v,n)}function YO(n,e){const i=If[e];(!i||i[n.key]!==n)&&us(`Database ${e}(${n.repoInfo_}) has already been deleted.`),jO(n),delete i[n.key]}function QO(n,e,i,a){let l=If[e.name];l||(l={},If[e.name]=l);let c=l[n.toURLString()];return c&&us("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new _O(n,GO,i,a),l[n.toURLString()]=c,c}class lE{constructor(e,i){this._repoInternal=e,this.app=i,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(bO(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Tn(this._repo,Re())),this._rootInternal}_delete(){return this._rootInternal!==null&&(YO(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&us("Cannot call "+e+" on a deleted database.")}}function oE(n=i0(),e){const i=Qf(n,"database").getImmediate({identifier:e});if(!i._instanceStarted){const a=YN("database");a&&cE(i,...a)}return i}function cE(n,e,i,a={}){n=_t(n),n._checkNotDeleted("useEmulator");const l=`${e}:${i}`,c=n._repoInternal;if(n._instanceStarted){if(l===n._repoInternal.repoInfo_.host&&Ai(a,c.repoInfo_.emulatorOptions))return;us("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let h;if(c.repoInfo_.nodeAdmin)a.mockUserToken&&us('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),h=new vc(vc.OWNER);else if(a.mockUserToken){const m=typeof a.mockUserToken=="string"?a.mockUserToken:QN(a.mockUserToken,n.app.options.projectId);h=new vc(m)}Ya(e)&&(Xb(e),Zb("Database",!0)),FO(c,l,a,h)}function KO(n){H0(Ka),Ma(new Ri("database",(e,{instanceIdentifier:i})=>{const a=e.getProvider("app").getImmediate(),l=e.getProvider("auth-internal"),c=e.getProvider("app-check-internal");return rE(a,l,c,i)},"PUBLIC").setMultipleInstances(!0)),Gs(L_,U_,n),Gs(L_,U_,"esm2017")}const WO={".sv":"timestamp"};function wt(){return WO}rs.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};rs.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};KO();const $O=Object.freeze(Object.defineProperty({__proto__:null,DataSnapshot:Li,Database:lE,OnDisconnect:tE,QueryConstraint:tr,_QueryImpl:ni,_QueryParams:nu,_ReferenceImpl:Tn,_repoManagerDatabaseFromApp:rE,_setSDKVersion:H0,_validatePathString:cu,_validateWritablePath:Hs,child:Ui,connectDatabaseEmulator:cE,equalTo:aE,get:it,getDatabase:oE,limitToLast:zm,onChildAdded:iE,onDisconnect:Of,onValue:Ht,orderByChild:Pl,push:er,query:Bl,ref:ae,remove:fu,serverTimestamp:wt,set:ht,update:Hi},Symbol.toStringTag,{value:"Module"}));var XO="firebase",ZO="11.10.0";Gs(XO,ZO,"app");const JO={apiKey:"AIzaSyBKAh2qJTeKAJ5MoTfGThQqxHqLaNI0TLk",authDomain:"zychat-2026.firebaseapp.com",databaseURL:"https://zychat-2026-default-rtdb.firebaseio.com",projectId:"zychat-2026",storageBucket:"zychat-2026.firebasestorage.app",messagingSenderId:"53180777184",appId:"1:53180777184:web:d6708dc5f2b063eb708685"},uE=s0(JO),nr=kR(uE),dE=new es,re=oE(uE),eI=Object.freeze(Object.defineProperty({__proto__:null,auth:nr,googleProvider:dE,rtdb:re},Symbol.toStringTag,{value:"Module"})),Pm=async n=>{const e=ae(re,`usernames/${n.toLowerCase()}`);return!(await it(e)).exists()},tI=async({username:n,displayName:e,phone:i,email:a,password:l})=>{const c=n.toLowerCase().trim();if(!await Pm(c))throw new Error("Username already exists, please choose another.");const p=(await vA(nr,a,l)).user;try{const g={uid:p.uid,username:c,displayName:e.trim(),phone:i?.trim()||"",email:p.email,about:"Hey there! I am using ZyChat.",avatarUrl:null,role:"user",isBanned:!1,isOnline:!0,lastSeen:wt(),createdAt:wt()};return await ht(ae(re,`users/${p.uid}`),g),await ht(ae(re,`usernames/${c}`),p.uid),{user:p,userProfile:g}}catch(g){throw console.error("Error creating user profile:",g),g}},nI=async(n,e)=>(await _A(nr,n,e)).user,sI=async()=>{const e=(await VA(nr,dE)).user,i=ae(re,`users/${e.uid}`);if(!(await it(i)).exists()){const l=e.email.split("@")[0].toLowerCase().replace(/[^a-z0-9]/g,"");let c=l,h=1;for(;!await Pm(c);)c=`${l}${h}`,h++;const m={uid:e.uid,username:c,displayName:e.displayName||c,phone:e.phoneNumber||"",email:e.email,about:"Hey there! I am using ZyChat.",avatarUrl:e.photoURL||null,role:"user",isBanned:!1,isOnline:!0,lastSeen:wt(),createdAt:wt()};await ht(ae(re,`users/${e.uid}`),m),await ht(ae(re,`usernames/${c}`),e.uid)}return e},yb=async()=>{await CA(nr)},iI=n=>EA(nr,n),kn=async n=>{const e=await it(ae(re,`users/${n}`));return e.exists()?e.val():null},Ba=async(n,e)=>{const i=ae(re,`users/${n}`);await Hi(i,{...e,updatedAt:wt()})},hE=n=>{const e=ae(re,"users");return Ht(e,i=>{const a=[];i.exists()&&i.forEach(l=>{a.push(l.val())}),n(a)},i=>{console.error("Error getting all users:",i),n([])})},fE=async n=>{await Ba(n,{isBanned:!0,isOnline:!1});const e=ae(re,"chats"),i=await it(e);if(i.exists()){const a={};i.forEach(l=>{const c=l.val(),h=l.key;if(c.members&&c.members[n]){a[`chats/${h}/members/${n}`]=null;const m=er(ae(re,`messages/${h}`)).key;a[`messages/${h}/${m}`]={messageId:m,senderId:"system",senderUsername:"system",type:"text",text:"User has been removed from ZyChat by admin.",createdAt:Date.now(),status:"sent"}}}),Object.keys(a).length>0&&await Hi(ae(re),a)}},mE=async n=>{await Ba(n,{isBanned:!1})},aI=n=>{const e=ae(re,`users/${n}`),i=ae(re,`presence/${n}`),a=ae(re,".info/connected");return Ht(a,l=>{l.val()===!0&&(Hi(e,{isOnline:!0,lastSeen:wt()}),ht(i,{isOnline:!0,lastSeen:wt()}),Of(e).update({isOnline:!1,lastSeen:wt()}),Of(i).set({isOnline:!1,lastSeen:wt()}))})},rI=async n=>{await Hi(ae(re,`users/${n}`),{isOnline:!1,lastSeen:wt()}),await ht(ae(re,`presence/${n}`),{isOnline:!1,lastSeen:wt()})},lI=(n,e)=>[n,e].sort().join("_"),oI=async(n,e)=>{const i=lI(n,e),a=ae(re,`chats/${i}`);if(!(await it(a)).exists()){const c={chatId:i,isGroup:!1,createdBy:n,createdAt:wt(),members:{[n]:!0,[e]:!0}};await ht(a,c)}return i},cI=async n=>{const e=await it(ae(re,`chats/${n}`));return e.exists()?e.val():null},uI=(n,e)=>{const i=ae(re,"chats");return Ht(i,async a=>{const l=[];try{if(a.exists()){const c=[];a.forEach(m=>{const p=m.val(),g=m.key;p.members&&p.members[n]&&c.push((async()=>{try{const v=Bl(ae(re,`messages/${g}`),Pl("createdAt"),zm(1)),_=await it(v);let b=null;_.exists()&&_.forEach(w=>{b=w.val()});let C=null;if(!p.isGroup){const O=Object.keys(p.members).find(D=>D!==n);O&&(C=await kn(O))}return{...p,chatId:g,lastMessage:b,otherUser:C}}catch(v){return console.error("Error fetching chat details:",v),{...p,chatId:g,lastMessage:null,otherUser:null}}})())});const h=await Promise.all(c);l.push(...h)}l.sort((c,h)=>{const m=c.lastMessage?.createdAt||c.createdAt||0;return(h.lastMessage?.createdAt||h.createdAt||0)-m})}catch(c){console.error("Error processing chats:",c)}e(l)},a=>{console.error("Error subscribing to chats:",a),e([])})},dc=async(n,{senderId:e,senderUsername:i,type:a,text:l,mediaUrl:c,fileName:h})=>{const m=er(ae(re,`messages/${n}`)),g={messageId:m.key,senderId:e,senderUsername:i,type:a,text:l||null,mediaUrl:c||null,fileName:h||null,createdAt:wt(),status:"sent"};return await ht(m,g),g},dI=(n,e)=>{const i=Bl(ae(re,`messages/${n}`),Pl("createdAt"));return Ht(i,a=>{const l=[];a.exists()&&a.forEach(c=>{l.push(c.val())}),e(l)})},af=async(n,e,i)=>{await ht(ae(re,`typeStatus/${n}/${e}`),{isTyping:i,timestamp:wt()})},hI=(n,e,i)=>{const a=ae(re,`typeStatus/${n}`);return Ht(a,l=>{const c=[];l.exists()&&l.forEach(h=>{const m=h.val();h.key!==e&&m.isTyping&&c.push(h.key)}),i(c)})},fI=async(n,{mediaUrl:e,caption:i})=>{const a=er(ae(re,`status/${n}`)),l=a.key,c=Date.now(),h={statusId:l,mediaUrl:e,caption:i||"",createdAt:c,expiresAt:c+1440*60*1e3};return await ht(a,h),h},Yc=async n=>{const e=await it(ae(re,`status/${n}`)),i=[],a=Date.now();return e.exists()&&e.forEach(l=>{const c=l.val();c.expiresAt>a&&i.push(c)}),i},pE=(n,e)=>{const i=ae(re,"status");return Ht(i,async a=>{const l=[],c=Date.now();if(a.exists())for(const h of n){const m=[],p=a.child(h);if(p.exists()&&(p.forEach(g=>{const v=g.val();v.expiresAt>c&&m.push(v)}),m.length>0)){const g=await kn(h);l.push({user:g,statuses:m})}}e(l)})},mI=async({callerId:n,calleeId:e,type:i})=>{const a=er(ae(re,"calls")),l=a.key,c={callId:l,callerId:n,calleeId:e,type:i,status:"ringing",startedAt:wt(),endedAt:null};return await ht(a,c),l},rf=async(n,e)=>{const i={status:e};(e==="ended"||e==="rejected")&&(i.endedAt=wt()),await Hi(ae(re,`calls/${n}`),i)},pI=async(n,e)=>{await ht(ae(re,`calls/${n}/signaling/offer`),e)},gI=async(n,e)=>{await ht(ae(re,`calls/${n}/signaling/answer`),e)},yI=async(n,e)=>{const i=er(ae(re,`calls/${n}/signaling/candidates`));await ht(i,e)},vI=(n,e)=>{const i=Bl(ae(re,"calls"),Pl("calleeId"),aE(n));return Ht(i,a=>{a.exists()&&a.forEach(l=>{const c=l.val();c.status==="ringing"&&e(c)})})},vb=(n,e)=>{const{onAnswer:i,onCandidate:a,onStatusChange:l}=e,c=[];if(i){const h=ae(re,`calls/${n}/signaling/answer`);c.push(Ht(h,m=>{m.exists()&&i(m.val())}))}if(a){const h=ae(re,`calls/${n}/signaling/candidates`);c.push(iE(h,m=>{a(m.val())}))}if(l){const h=ae(re,`calls/${n}/status`);c.push(Ht(h,m=>{m.exists()&&l(m.val())}))}return()=>{c.forEach(h=>h())}},_b=async n=>{const e=ae(re,"calls"),i=await it(e),a=[];return i.exists()&&i.forEach(l=>{const c=l.val();(c.callerId===n||c.calleeId===n)&&a.push(c)}),a.sort((l,c)=>(c.startedAt||0)-(l.startedAt||0)),a},_I=async(n,e)=>{const i=`${n}_${e}`,a=ae(re,`connectionRequests/${i}`);if((await it(a)).exists())throw new Error("Request already sent");const c=ae(re,`connectionRequests/${e}_${n}`);if((await it(c)).exists())return await gE(e,n),"connected";if((await it(ae(re,`connections/${n}/${e}`))).exists())throw new Error("Already connected");return await ht(a,{fromUid:n,toUid:e,status:"pending",createdAt:Date.now()}),"sent"},gE=async(n,e)=>{const i=`${n}_${e}`,a=ae(re,`connectionRequests/${i}`),l={};return l[`connections/${n}/${e}`]={connectedAt:Date.now()},l[`connections/${e}/${n}`]={connectedAt:Date.now()},await Hi(ae(re),l),await fu(a),!0},bI=async(n,e)=>{const i=`${n}_${e}`,a=ae(re,`connectionRequests/${i}`);return await fu(a),!0},SI=async(n,e)=>{const i=`${n}_${e}`,a=ae(re,`connectionRequests/${i}`);return await fu(a),!0},EI=async(n,e)=>{const i=ae(re,`connections/${n}/${e}`);if((await it(i)).exists())return"connected";const l=ae(re,`connectionRequests/${n}_${e}`);if((await it(l)).exists())return"pending_sent";const h=ae(re,`connectionRequests/${e}_${n}`);return(await it(h)).exists()?"pending_received":"none"},yE=(n,e)=>{const i=ae(re,"connectionRequests");return Ht(i,async a=>{const l=[];if(a.exists()){const c=[];a.forEach(m=>{const p=m.val();p.toUid===n&&p.status==="pending"&&c.push((async()=>{const g=await kn(p.fromUid);return{...p,requestId:m.key,fromUser:g}})())});const h=await Promise.all(c);l.push(...h)}l.sort((c,h)=>(h.createdAt||0)-(c.createdAt||0)),e(l)})},vE=(n,e)=>{const i=ae(re,`connections/${n}`);return Ht(i,async a=>{const l=[];if(a.exists()){const c=[];a.forEach(m=>{const p=m.key;c.push((async()=>{const g=await kn(p);return{...m.val(),uid:p,user:g}})())});const h=await Promise.all(c);l.push(...h)}e(l)})},CI=async(n,e)=>{const i=ae(re,"users"),a=await it(i),l=[];if(a.exists()){const c=n.toLowerCase();a.forEach(h=>{const m=h.val();if(m.uid===e||m.isBanned)return;const p=m.username?.toLowerCase().includes(c),g=m.displayName?.toLowerCase().includes(c);(p||g)&&l.push(m)})}return l.slice(0,20)},_E=E.createContext(null),en=()=>{const n=E.useContext(_E);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},xI=({children:n})=>{const[e,i]=E.useState(null),[a,l]=E.useState(()=>{const g=localStorage.getItem("zychat_user_profile");return g?JSON.parse(g):null}),[c,h]=E.useState(!0);E.useEffect(()=>{let g=null,v=null;const _=iI(async b=>{if(i(b),b){const C=ae(re,`users/${b.uid}`);g=Ht(C,w=>{if(w.exists()){const O=w.val();l(O),localStorage.setItem("zychat_user_profile",JSON.stringify(O)),O.isBanned&&(yb(),i(null),l(null),localStorage.removeItem("zychat_user_profile"))}else l(null),localStorage.removeItem("zychat_user_profile");h(!1)}),v=aI(b.uid)}else l(null),localStorage.removeItem("zychat_user_profile"),h(!1)});return()=>{_(),g&&g(),v&&v()}},[]);const p={currentUser:e,userProfile:a,loading:c,logout:async()=>{e&&await rI(e.uid),await yb(),i(null),l(null),localStorage.removeItem("zychat_user_profile")},isAuthenticated:!!e&&(!!a||!!localStorage.getItem("zychat_user_profile")),isAdmin:a?.role==="admin",isBanned:a?.isBanned};return u.jsx(_E.Provider,{value:p,children:n})},wI="modulepreload",NI=function(n){return"/FUTURE_FS_03/"+n},bb={},Sb=function(e,i,a){let l=Promise.resolve();if(i&&i.length>0){let g=function(v){return Promise.all(v.map(_=>Promise.resolve(_).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};var h=g;document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),p=m?.nonce||m?.getAttribute("nonce");l=g(i.map(v=>{if(v=NI(v),v in bb)return;bb[v]=!0;const _=v.endsWith(".css"),b=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${b}`))return;const C=document.createElement("link");if(C.rel=_?"stylesheet":wI,_||(C.as="script"),C.crossOrigin="",C.href=v,p&&C.setAttribute("nonce",p),document.head.appendChild(C),_)return new Promise((w,O)=>{C.addEventListener("load",w),C.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${v}`)))})}))}function c(m){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=m,window.dispatchEvent(p),!p.defaultPrevented)throw m}return l.then(m=>{for(const p of m||[])p.status==="rejected"&&c(p.reason);return e().catch(c)})},bE=E.createContext(null),Hl=()=>{const n=E.useContext(bE);if(!n)throw new Error("useCall must be used within a CallProvider");return n},TI={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]},AI=({children:n})=>{const{currentUser:e,userProfile:i}=en(),[a,l]=E.useState(null),[c,h]=E.useState(null),[m,p]=E.useState(null),[g,v]=E.useState(null),[_,b]=E.useState(!1),[C,w]=E.useState(null),[O,D]=E.useState(null),A=E.useRef(null),H=E.useRef(null),F=E.useCallback(()=>{A.current&&(A.current.close(),A.current=null),m&&(m.getTracks().forEach(ie=>ie.stop()),p(null)),g&&(g.getTracks().forEach(ie=>ie.stop()),v(null)),H.current&&(H.current(),H.current=null),l(null),h(null),b(!1),w(null),D(null)},[m,g]),ee=async ie=>{const Oe={audio:!0,video:ie==="video"};return navigator.mediaDevices.getUserMedia(Oe)},K=ie=>{const Oe=new RTCPeerConnection(TI);return Oe.onicecandidate=Ie=>{Ie.candidate&&yI(ie,Ie.candidate.toJSON())},Oe.ontrack=Ie=>{const I=new MediaStream;Ie.streams[0].getTracks().forEach(V=>{I.addTrack(V)}),v(I)},Oe.onconnectionstatechange=()=>{(Oe.connectionState==="disconnected"||Oe.connectionState==="failed")&&R()},A.current=Oe,Oe},X=async(ie,Oe)=>{if(e)try{const Ie=await ee(Oe);p(Ie);const I=await mI({callerId:e.uid,calleeId:ie,type:Oe});l({callId:I,calleeId:ie,type:Oe,isOutgoing:!0}),h("ringing"),b(!0);const V=K(I);Ie.getTracks().forEach(ge=>{V.addTrack(ge,Ie)});const Z=await V.createOffer();await V.setLocalDescription(Z),await pI(I,{type:Z.type,sdp:Z.sdp}),H.current=vb(I,{onAnswer:async ge=>{V.signalingState==="have-local-offer"&&(await V.setRemoteDescription(new RTCSessionDescription(ge)),h("connected"))},onCandidate:async ge=>{V.remoteDescription&&await V.addIceCandidate(new RTCIceCandidate(ge))},onStatusChange:ge=>{h(ge),(ge==="rejected"||ge==="ended")&&F()}});const Ne=await kn(ie);D(Ne)}catch(Ie){throw console.error("Error starting call:",Ie),F(),Ie}},Y=async()=>{if(!(!C||!e))try{const{callId:ie,callerId:Oe,type:Ie}=C,I=await ee(Ie);p(I),l({callId:ie,calleeId:Oe,type:Ie,isOutgoing:!1}),h("connecting"),b(!0),w(null),await rf(ie,"accepted");const V=K(ie);I.getTracks().forEach(P=>{V.addTrack(P,I)});const{ref:Z,get:Ne}=await Sb(async()=>{const{ref:P,get:W}=await Promise.resolve().then(()=>$O);return{ref:P,get:W}},[]),{rtdb:ge}=await Sb(async()=>{const{rtdb:P}=await Promise.resolve().then(()=>eI);return{rtdb:P}},void 0),T=await Ne(Z(ge,`calls/${ie}/signaling/offer`));if(T.exists()){const P=T.val();await V.setRemoteDescription(new RTCSessionDescription(P));const W=await V.createAnswer();await V.setLocalDescription(W),await gI(ie,{type:W.type,sdp:W.sdp}),h("connected")}H.current=vb(ie,{onCandidate:async P=>{V.remoteDescription&&await V.addIceCandidate(new RTCIceCandidate(P))},onStatusChange:P=>{h(P),P==="ended"&&F()}})}catch(ie){console.error("Error accepting call:",ie),F()}},$=async()=>{if(C)try{await rf(C.callId,"rejected"),w(null),D(null)}catch(ie){console.error("Error rejecting call:",ie)}},R=async()=>{if(a)try{await rf(a.callId,"ended")}catch(ie){console.error("Error ending call:",ie)}F()},B=()=>{if(m){const ie=m.getAudioTracks()[0];if(ie)return ie.enabled=!ie.enabled,!ie.enabled}return!1},te=()=>{if(m){const ie=m.getVideoTracks()[0];if(ie)return ie.enabled=!ie.enabled,!ie.enabled}return!1};E.useEffect(()=>{if(!e)return;const ie=vI(e.uid,async Oe=>{if(!a&&!C){w(Oe);const Ie=await kn(Oe.callerId);D(Ie)}});return()=>ie()},[e,a,C]);const oe={currentCall:a,callStatus:c,localStream:m,remoteStream:g,isCallUIOpen:_,incomingCall:C,callerInfo:O,startCall:X,acceptCall:Y,rejectCall:$,endCall:R,toggleMute:B,toggleVideo:te};return u.jsx(bE.Provider,{value:oe,children:n})},SE=E.createContext(null),RI=()=>{const n=E.useContext(SE);if(!n)throw new Error("useTheme must be used within a ThemeProvider");return n},jI=({children:n})=>{const[e,i]=E.useState(()=>localStorage.getItem("zychat-theme")||"system"),[a,l]=E.useState("dark");E.useEffect(()=>{const m=p=>{document.documentElement.setAttribute("data-theme",p),l(p)};if(e==="system"){const p=window.matchMedia("(prefers-color-scheme: dark)");m(p.matches?"dark":"light");const g=v=>m(v.matches?"dark":"light");return p.addEventListener("change",g),()=>p.removeEventListener("change",g)}else m(e)},[e]);const h={theme:e,resolvedTheme:a,setTheme:m=>{i(m),localStorage.setItem("zychat-theme",m)},isDark:a==="dark"};return u.jsx(SE.Provider,{value:h,children:n})},wl="AES-GCM",OI=256,II=12,DI=async()=>{const n=await window.crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey","deriveBits"]),e=await window.crypto.subtle.exportKey("jwk",n.publicKey),i=await window.crypto.subtle.exportKey("jwk",n.privateKey);return{publicKey:JSON.stringify(e),privateKey:JSON.stringify(i)}},kI=()=>window.crypto.getRandomValues(new Uint8Array(II)),Eb=n=>{const e=new Uint8Array(n);let i="";for(let a=0;a<e.byteLength;a++)i+=String.fromCharCode(e[a]);return btoa(i)},Cb=n=>{const e=atob(n),i=new Uint8Array(e.length);for(let a=0;a<e.length;a++)i[a]=e.charCodeAt(a);return i.buffer},MI=async()=>{const n=await window.crypto.subtle.generateKey({name:wl,length:OI},!0,["encrypt","decrypt"]),e=await window.crypto.subtle.exportKey("jwk",n);return JSON.stringify(e)},LI=async(n,e)=>{try{const i=JSON.parse(e),a=await window.crypto.subtle.importKey("jwk",i,{name:wl},!1,["encrypt"]),l=kI(),h=new TextEncoder().encode(n),m=await window.crypto.subtle.encrypt({name:wl,iv:l},a,h);return{encrypted:!0,iv:Eb(l),data:Eb(m)}}catch(i){return console.error("Chat encryption error:",i),{encrypted:!1,text:n}}},UI=async(n,e)=>{try{if(!n?.encrypted)return n?.text||n||"";const i=JSON.parse(e),a=await window.crypto.subtle.importKey("jwk",i,{name:wl},!1,["decrypt"]),l=new Uint8Array(Cb(n.iv)),c=Cb(n.data),h=await window.crypto.subtle.decrypt({name:wl,iv:l},a,c);return new TextDecoder().decode(h)}catch(i){return console.error("Chat decryption error:",i),"[Encrypted message]"}},EE=E.createContext(),zI=()=>{const n=E.useContext(EE);if(!n)throw new Error("useEncryption must be used within an EncryptionProvider");return n},PI=({children:n})=>{const{currentUser:e}=en(),[i,a]=E.useState(!1),[l,c]=E.useState({});E.useEffect(()=>{(async()=>{if(!e){a(!1);return}try{const C=ae(re,`userKeys/${e.uid}`);if(!(await it(C)).exists()){const O=await DI();await ht(C,{publicKey:O.publicKey,createdAt:Date.now()}),localStorage.setItem(`zychat_pk_${e.uid}`,O.privateKey)}a(!0)}catch(C){console.error("Error initializing encryption:",C),a(!0)}})()},[e]);const h=E.useCallback(async b=>{if(l[b])return l[b];try{const C=ae(re,`chatKeys/${b}`),w=await it(C);if(w.exists()){const O=w.val().key;return c(D=>({...D,[b]:O})),O}else{const O=await MI();return await ht(C,{key:O,createdAt:Date.now()}),c(D=>({...D,[b]:O})),O}}catch(C){return console.error("Error getting chat key:",C),null}},[l]),m=E.useCallback(async(b,C)=>{try{const w=await h(C);return w?await LI(b,w):{encrypted:!1,text:b}}catch(w){return console.error("Error encrypting message:",w),{encrypted:!1,text:b}}},[h]),p=E.useCallback(async(b,C)=>{try{if(typeof b=="string")return b;if(!b?.encrypted)return b?.text||b||"";const w=await h(C);return w?await UI(b,w):"[Encryption key not available]"}catch(w){return console.error("Error decrypting message:",w),"[Decryption failed]"}},[h]),g=E.useCallback(async(b,C)=>{try{const w=await h(C);if(!w)return{blob:b,encrypted:!1};const O=await b.arrayBuffer(),D=new Uint8Array(O),A=window.crypto.getRandomValues(new Uint8Array(12)),H=JSON.parse(w),F=await window.crypto.subtle.importKey("jwk",H,{name:"AES-GCM"},!1,["encrypt"]),ee=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:A},F,D),K=new Uint8Array(A.length+ee.byteLength);return K.set(A,0),K.set(new Uint8Array(ee),A.length),{blob:new Blob([K],{type:"application/encrypted"}),originalType:b.type,originalName:b.name,encrypted:!0}}catch(w){return console.error("Error encrypting file:",w),{blob:b,encrypted:!1}}},[h]),v=E.useCallback(async(b,C,w)=>{try{const O=await h(C);if(!O)return b;const A=await(await fetch(b)).arrayBuffer(),H=new Uint8Array(A.slice(0,12)),F=new Uint8Array(A.slice(12)),ee=JSON.parse(O),K=await window.crypto.subtle.importKey("jwk",ee,{name:"AES-GCM"},!1,["decrypt"]),X=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:H},K,F),Y=new Blob([X],{type:w});return URL.createObjectURL(Y)}catch(O){return console.error("Error decrypting file:",O),b}},[h]),_={isInitialized:i,encryptMessage:m,decryptMessage:p,encryptFile:g,decryptFileUrl:v,getChatKey:h};return u.jsx(EE.Provider,{value:_,children:n})},CE=E.createContext(),sl={CHATS:"zychat_cache_chats",CONNECTIONS:"zychat_cache_connections",REQUESTS:"zychat_cache_requests",CALLS:"zychat_cache_calls",SETTINGS:"zychat_app_settings"},BI=({children:n})=>{const{currentUser:e}=en(),[i,a]=E.useState([]),[l,c]=E.useState([]),[h,m]=E.useState([]),[p,g]=E.useState([]),[v,_]=E.useState([]),[b,C]=E.useState([]),[w,O]=E.useState(!0),[D,A]=E.useState(!0),[H,F]=E.useState(!0),[ee,K]=E.useState(!0),[X,Y]=E.useState({}),[$,R]=E.useState(()=>{const I=localStorage.getItem(sl.SETTINGS);return I?JSON.parse(I):{compressImages:!0,cacheEnabled:!0,maxCacheSize:50}});E.useEffect(()=>{localStorage.setItem(sl.SETTINGS,JSON.stringify($))},[$]);const B=E.useCallback((I,V)=>{R(Z=>({...Z,[I]:V}))},[]);E.useEffect(()=>{if(!e){a([]),O(!1);return}O(!0);const I=uI(e.uid,V=>{a(V),O(!1),Y(Z=>({...Z,chats:Date.now()}))});return()=>I()},[e]),E.useEffect(()=>{if(!e){c([]),A(!1);return}A(!0);const I=vE(e.uid,V=>{c(V),A(!1),Y(Z=>({...Z,connections:Date.now()}))});return()=>I()},[e]),E.useEffect(()=>{if(!e){m([]);return}const I=yE(e.uid,V=>{m(V)});return()=>I()},[e]),E.useEffect(()=>{if(!e){g([]),F(!1);return}(async()=>{F(!0);try{const V=await _b(e.uid);g(V)}catch(V){console.error("Error fetching call history:",V)}finally{F(!1),Y(V=>({...V,calls:Date.now()}))}})()},[e]),E.useEffect(()=>{if(!e){C([]),_([]),K(!1);return}(async()=>{K(!0);try{const V=await Yc(e.uid);C(V)}catch(V){console.error("Error fetching statuses:",V)}finally{K(!1)}})()},[e]),E.useEffect(()=>{if(!e||l.length===0){_([]);return}const I=l.map(Z=>Z.uid),V=pE(I,Z=>{_(Z)});return()=>V()},[e,l]);const te=E.useCallback(async()=>{if(e){F(!0);try{const I=await _b(e.uid);g(I),Y(V=>({...V,calls:Date.now()}))}catch(I){console.error("Error refreshing call history:",I)}finally{F(!1)}}},[e]),oe=E.useCallback(async()=>{if(e)try{const I=await Yc(e.uid);C(I)}catch(I){console.error("Error refreshing statuses:",I)}},[e]),ie=E.useCallback(()=>{a([]),c([]),m([]),g([]),_([]),C([]),Y({}),Object.values(sl).forEach(I=>{I!==sl.SETTINGS&&localStorage.removeItem(I)})},[]),Oe=E.useCallback(()=>{let I=0;return Object.values(sl).forEach(V=>{const Z=localStorage.getItem(V);Z&&(I+=new Blob([Z]).size)}),(I/(1024*1024)).toFixed(2)},[]),Ie={chats:i,connections:l,connectionRequests:h,callHistory:p,contactStatuses:v,myStatuses:b,chatsLoading:w,connectionsLoading:D,callsLoading:H,statusLoading:ee,appSettings:$,updateSetting:B,refreshCallHistory:te,refreshMyStatuses:oe,clearCache:ie,getCacheSize:Oe,lastFetch:X};return u.jsx(CE.Provider,{value:Ie,children:n})},Bm=()=>{const n=E.useContext(CE);if(!n)throw new Error("useData must be used within a DataProvider");return n},et=({size:n="md",text:e})=>u.jsxs("div",{className:"loader-container",children:[u.jsx("div",{className:`loader loader-${n}`}),e&&u.jsx("p",{className:"loader-text",children:e})]}),HI=({children:n})=>{const{isAuthenticated:e,loading:i,isBanned:a}=en(),l=Nn();return i?u.jsx("div",{className:"page-loader",children:u.jsx(et,{size:"lg"})}):e?a?u.jsx(Ia,{to:"/auth",state:{banned:!0},replace:!0}):n:u.jsx(Ia,{to:"/auth",state:{from:l},replace:!0})},lf=({children:n})=>{const{isAuthenticated:e,isAdmin:i,loading:a}=en(),l=Nn();return a?u.jsx("div",{className:"page-loader",children:u.jsx(et,{size:"lg"})}):e?i?n:u.jsx(Ia,{to:"/app",replace:!0}):u.jsx(Ia,{to:"/auth",state:{from:l},replace:!0})},qI=()=>{const n=[{icon:"",title:"Real-Time Chats",description:"Instant messaging with real-time delivery and read receipts."},{icon:"",title:"Group Conversations",description:"Create groups for your teams, friends, or communities."},{icon:"",title:"Status Sharing",description:"Share moments that disappear after 24 hours."},{icon:"",title:"Audio & Video Calls",description:"Crystal-clear voice and video calls with anyone."},{icon:"",title:"Secure & Private",description:"Your conversations are protected and private."},{icon:"",title:"Lightning Fast",description:"Built for speed with real-time Firebase infrastructure."}];return u.jsxs("div",{className:"landing-page",children:[u.jsx("nav",{className:"landing-nav",children:u.jsxs("div",{className:"landing-nav-container",children:[u.jsxs(We,{to:"/",className:"landing-logo",children:[u.jsx("span",{className:"logo-icon",children:""}),u.jsx("span",{className:"logo-text",children:"ZyChat"})]}),u.jsxs("div",{className:"landing-nav-links",children:[u.jsx(We,{to:"/features",className:"nav-link",children:"Features"}),u.jsx(We,{to:"/auth",className:"btn btn-primary",children:"Get Started"})]})]})}),u.jsxs("section",{className:"hero-section",children:[u.jsxs("div",{className:"hero-content",children:[u.jsxs("h1",{className:"hero-title",children:["Fast, Secure,",u.jsx("br",{}),u.jsx("span",{className:"hero-title-accent",children:"Real-Time Chat."})]}),u.jsx("p",{className:"hero-subtitle",children:"Chat one-to-one, in groups, share status, and jump into audio or video calls  all in your browser."}),u.jsxs("div",{className:"hero-buttons",children:[u.jsx(We,{to:"/auth",className:"btn btn-primary btn-lg",children:"Open ZyChat"}),u.jsx(We,{to:"/features",className:"btn btn-secondary btn-lg",children:"View Features"})]})]}),u.jsx("div",{className:"hero-visual",children:u.jsxs("div",{className:"hero-mockup glass-card",children:[u.jsxs("div",{className:"mockup-header",children:[u.jsx("div",{className:"mockup-avatar"}),u.jsxs("div",{className:"mockup-info",children:[u.jsx("div",{className:"mockup-name"}),u.jsx("div",{className:"mockup-status"})]})]}),u.jsxs("div",{className:"mockup-messages",children:[u.jsx("div",{className:"mockup-message received",children:u.jsx("div",{className:"message-bubble",children:"Hey! Have you tried ZyChat yet? "})}),u.jsx("div",{className:"mockup-message sent",children:u.jsx("div",{className:"message-bubble",children:"Just downloading it now! Looks amazing "})}),u.jsx("div",{className:"mockup-message received",children:u.jsx("div",{className:"message-bubble",children:"Let's start a group call! "})})]})]})})]}),u.jsxs("section",{className:"features-section",children:[u.jsxs("div",{className:"section-header",children:[u.jsx("h2",{className:"section-title",children:"Everything You Need"}),u.jsx("p",{className:"section-subtitle",children:"All the features you love, reimagined for the modern web."})]}),u.jsx("div",{className:"features-grid",children:n.map((e,i)=>u.jsxs("div",{className:"feature-card glass-card",children:[u.jsx("div",{className:"feature-icon",children:e.icon}),u.jsx("h3",{className:"feature-title",children:e.title}),u.jsx("p",{className:"feature-description",children:e.description})]},i))})]}),u.jsx("section",{className:"cta-section",children:u.jsxs("div",{className:"cta-content glass-card",children:[u.jsx("h2",{className:"cta-title",children:"Ready to Get Started?"}),u.jsx("p",{className:"cta-text",children:"Join ZyChat today and experience the future of real-time communication."}),u.jsx(We,{to:"/auth",className:"btn btn-primary btn-lg",children:"Create Your Account"})]})}),u.jsx("footer",{className:"landing-footer",children:u.jsxs("div",{className:"footer-content",children:[u.jsxs("div",{className:"footer-brand",children:[u.jsx("span",{className:"logo-icon",children:""}),u.jsx("span",{className:"logo-text",children:"ZyChat"})]}),u.jsx("p",{className:"footer-tagline",children:"Fast, secure, real-time conversations with anyone, anywhere."}),u.jsxs("div",{className:"footer-links",children:[u.jsx(We,{to:"/features",children:"Features"}),u.jsx(We,{to:"/auth",children:"Sign In"}),u.jsx(We,{to:"/privacy",children:"Privacy"}),u.jsx(We,{to:"/terms",children:"Terms"}),u.jsx(We,{to:"/help",children:"Help"})]}),u.jsxs("p",{className:"footer-copyright",children:[" ",new Date().getFullYear()," ZyChat. All rights reserved."]})]})})]})},VI=()=>{const n=[{icon:"",title:"One-to-One Chat",description:"Private conversations with instant message delivery",details:["Real-time message sync across devices","Read receipts and delivery status","Text, images, audio, and file sharing","Typing indicators","Message history preserved"]},{icon:"",title:"Group Conversations",description:"Collaborate with teams, friends, and communities",details:["Create groups with unlimited members","Custom group names and icons","Admin controls for group management","Add or remove members easily","Shared media and files"]},{icon:"",title:"Status / Stories",description:"Share moments that disappear after 24 hours",details:["Photo status updates","Captions for your media","See who viewed your status","View contacts' status updates","Auto-expires for privacy"]},{icon:"",title:"Audio & Video Calls",description:"High-quality calls powered by WebRTC",details:["One-on-one audio calls","Face-to-face video calls","Low latency connections","In-call mute and video toggle","Call history and logs"]},{icon:"",title:"User Search",description:"Find anyone by their unique username",details:["Search users by @username","View user profiles","Start chats instantly","Unique usernames for identity","Quick user discovery"]},{icon:"",title:"Admin Controls",description:"Powerful moderation tools for organizations",details:["User management dashboard","Ban/unban users","View all registered users","Monitor user activity","Automatic group removal on ban"]},{icon:"",title:"Presence & Status",description:"See who's online in real-time",details:["Online/offline indicators","Last seen timestamps","Real-time presence updates","Privacy-respecting design","Automatic status sync"]},{icon:"",title:"Media Sharing",description:"Share images, audio, and files seamlessly",details:["Image uploads via Cloudinary","Voice message recording","File attachments","Optimized media delivery","Secure cloud storage"]}];return u.jsxs("div",{className:"features-page",children:[u.jsx("nav",{className:"landing-nav",children:u.jsxs("div",{className:"landing-nav-container",children:[u.jsxs(We,{to:"/",className:"landing-logo",children:[u.jsx("span",{className:"logo-icon",children:""}),u.jsx("span",{className:"logo-text",children:"ZyChat"})]}),u.jsxs("div",{className:"landing-nav-links",children:[u.jsx(We,{to:"/",className:"nav-link",children:"Home"}),u.jsx(We,{to:"/auth",className:"btn btn-primary",children:"Get Started"})]})]})}),u.jsxs("section",{className:"features-hero",children:[u.jsxs("h1",{className:"features-hero-title",children:["Powerful Features for",u.jsx("br",{}),u.jsx("span",{className:"hero-title-accent",children:"Modern Communication"})]}),u.jsx("p",{className:"features-hero-subtitle",children:"Discover everything ZyChat has to offer. Built for speed, designed for you."})]}),u.jsx("section",{className:"features-list",children:n.map((e,i)=>u.jsxs("div",{className:`feature-detail-card glass-card ${i%2===1?"reverse":""}`,children:[u.jsx("div",{className:"feature-detail-icon",children:e.icon}),u.jsxs("div",{className:"feature-detail-content",children:[u.jsx("h2",{className:"feature-detail-title",children:e.title}),u.jsx("p",{className:"feature-detail-description",children:e.description}),u.jsx("ul",{className:"feature-detail-list",children:e.details.map((a,l)=>u.jsxs("li",{children:[u.jsx("span",{className:"check-icon",children:""}),a]},l))})]})]},i))}),u.jsx("section",{className:"features-cta",children:u.jsxs("div",{className:"cta-content glass-card",children:[u.jsx("h2",{className:"cta-title",children:"Start Using ZyChat Today"}),u.jsx("p",{className:"cta-text",children:"Experience all these features and more. Create your free account now."}),u.jsx(We,{to:"/auth",className:"btn btn-primary btn-lg",children:"Get Started Free"})]})}),u.jsx("footer",{className:"landing-footer",children:u.jsxs("div",{className:"footer-content",children:[u.jsxs("div",{className:"footer-brand",children:[u.jsx("span",{className:"logo-icon",children:""}),u.jsx("span",{className:"logo-text",children:"ZyChat"})]}),u.jsxs("p",{className:"footer-copyright",children:[" ",new Date().getFullYear()," ZyChat. All rights reserved."]})]})})]})},Tt=({src:n,name:e,size:i="md",isOnline:a,showStatus:l=!1,className:c=""})=>{const h=m=>{if(!m)return"?";const p=m.trim().split(" ");return p.length>=2?`${p[0][0]}${p[1][0]}`.toUpperCase():m.slice(0,2).toUpperCase()};return u.jsxs("div",{className:`avatar-wrapper avatar-${i} ${c}`,children:[n?u.jsx("img",{src:n,alt:e||"Avatar",className:"avatar-image",onError:m=>{m.target.style.display="none",m.target.nextSibling.style.display="flex"}}):null,u.jsx("div",{className:"avatar-fallback",style:{display:n?"none":"flex"},children:h(e)}),l&&u.jsx("span",{className:`avatar-status ${a?"online":"offline"}`})]})},GI=({isOpen:n,onClose:e,title:i,children:a,footer:l,size:c="md",showClose:h=!0})=>(E.useEffect(()=>{const m=p=>{p.key==="Escape"&&n&&e()};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[n,e]),E.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[n]),n?u.jsx("div",{className:"modal-backdrop",onClick:e,children:u.jsxs("div",{className:`modal modal-${c}`,onClick:m=>m.stopPropagation(),children:[i&&u.jsxs("div",{className:"modal-header",children:[u.jsx("h3",{className:"modal-title",children:i}),h&&u.jsx("button",{className:"modal-close btn btn-ghost btn-icon",onClick:e,children:""})]}),u.jsx("div",{className:"modal-body",children:a}),l&&u.jsx("div",{className:"modal-footer",children:l})]})}):null),Ni=({variant:n="text",size:e="md",width:i,height:a,count:l=1,className:c=""})=>{const h=()=>{let p=["skeleton"];switch(n){case"text":p.push("skeleton-text"),e==="sm"&&p.push("sm"),e==="lg"&&p.push("lg");break;case"avatar":p.push("skeleton-avatar"),p.push(e);break;case"rect":p.push("skeleton-rect");break;case"card":p.push("skeleton-card");break}return c&&p.push(c),p.join(" ")},m={};return i&&(m.width=typeof i=="number"?`${i}px`:i),a&&(m.height=typeof a=="number"?`${a}px`:a),l>1?u.jsx(u.Fragment,{children:Array.from({length:l}).map((p,g)=>u.jsx("div",{className:h(),style:m},g))}):u.jsx("div",{className:h(),style:m})},FI=()=>u.jsxs("div",{className:"skeleton-user-card",children:[u.jsx(Ni,{variant:"avatar",size:"lg"}),u.jsxs("div",{className:"skeleton-user-card-info",children:[u.jsx(Ni,{variant:"text",size:"lg",width:"60%"}),u.jsx(Ni,{variant:"text",size:"sm",width:"40%"}),u.jsx(Ni,{variant:"text",size:"sm",width:"80%"})]})]}),xb=()=>u.jsxs("div",{className:"skeleton-status-item",children:[u.jsx(Ni,{variant:"avatar",size:"lg"}),u.jsxs("div",{className:"skeleton-status-info",children:[u.jsx(Ni,{variant:"text",width:120}),u.jsx(Ni,{variant:"text",size:"sm",width:60})]})]}),YI=()=>{const[n,e]=E.useState(!0),[i,a]=E.useState(!1),[l,c]=E.useState(""),[h,m]=E.useState(""),[p,g]=E.useState(!1),[v,_]=E.useState({username:"",displayName:"",phone:"",email:"",password:"",confirmPassword:""}),b=qt(),C=Nn(),{isAuthenticated:w,isAdmin:O,isBanned:D}=en();E.useEffect(()=>{if(w&&!D){const X=C.state?.from?.pathname||(O?"/admin":"/app");b(X,{replace:!0})}},[w,O,D,b,C]),E.useEffect(()=>{C.state?.banned&&c("Your account has been restricted. Please contact support.")},[C]);const A=X=>{const{name:Y,value:$}=X.target;_(R=>({...R,[Y]:$})),c(""),Y==="username"&&m("")},H=async()=>{if(!v.username||n)return;const X=v.username.toLowerCase().trim();if(X.length<3){m("Username must be at least 3 characters");return}if(!/^[a-z0-9_]+$/.test(X)){m("Username can only contain letters, numbers, and underscores");return}g(!0);try{await Pm(X)||m("Username already taken. Please choose another.")}catch(Y){console.error("Error checking username:",Y)}finally{g(!1)}},F=()=>{if(!v.email||!v.password)return c("Please fill in all required fields"),!1;if(!n){if(!v.username||!v.displayName)return c("Please fill in all required fields"),!1;if(v.username.length<3)return c("Username must be at least 3 characters"),!1;if(v.password.length<6)return c("Password must be at least 6 characters"),!1;if(v.password!==v.confirmPassword)return c("Passwords do not match"),!1;if(h)return c(h),!1}return!0},ee=async X=>{if(X.preventDefault(),!!F()){a(!0),c("");try{n?await nI(v.email,v.password):await tI({username:v.username.toLowerCase().trim(),displayName:v.displayName.trim(),phone:v.phone.trim(),email:v.email.trim(),password:v.password})}catch(Y){console.error("Auth error:",Y),c(Y.message||"An error occurred. Please try again.")}finally{a(!1)}}},K=async()=>{a(!0),c("");try{await sI()}catch(X){console.error("Google login error:",X),c(X.message||"Google sign-in failed. Please try again.")}finally{a(!1)}};return u.jsxs("div",{className:"auth-page",children:[u.jsxs("div",{className:"auth-branding",children:[u.jsxs(We,{to:"/",className:"auth-logo",children:[u.jsx("span",{className:"logo-icon",children:""}),u.jsx("span",{className:"logo-text",children:"ZyChat"})]}),u.jsxs("h1",{className:"auth-branding-title",children:["Connect with anyone,",u.jsx("br",{}),"anywhere."]}),u.jsxs("ul",{className:"auth-features",children:[u.jsx("li",{children:" Real-time messaging"}),u.jsx("li",{children:" Group conversations"}),u.jsx("li",{children:" Audio & video calls"}),u.jsx("li",{children:" Status sharing"}),u.jsx("li",{children:" Secure & private"})]})]}),u.jsx("div",{className:"auth-form-container",children:u.jsxs("div",{className:"auth-card glass-card",children:[u.jsxs("div",{className:"auth-tabs",children:[u.jsx("button",{className:`auth-tab ${n?"active":""}`,onClick:()=>{e(!0),c("")},children:"Sign In"}),u.jsx("button",{className:`auth-tab ${n?"":"active"}`,onClick:()=>{e(!1),c("")},children:"Sign Up"})]}),u.jsxs("form",{className:"auth-form",onSubmit:ee,children:[l&&u.jsx("div",{className:"auth-error",children:l}),!n&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Username *"}),u.jsxs("div",{className:"input-with-icon",children:[u.jsx("span",{className:"input-prefix",children:"@"}),u.jsx("input",{type:"text",name:"username",value:v.username,onChange:A,onBlur:H,placeholder:"your_unique_username",className:`input ${h?"input-error":""}`,autoComplete:"username"}),p&&u.jsx("span",{className:"input-suffix",children:u.jsx(et,{size:"sm"})})]}),h&&u.jsx("p",{className:"form-error",children:h}),u.jsx("p",{className:"form-hint",children:"Your unique handle. Letters, numbers, and underscores only."})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Display Name *"}),u.jsx("input",{type:"text",name:"displayName",value:v.displayName,onChange:A,placeholder:"Your Name",className:"input",autoComplete:"name"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Phone (optional)"}),u.jsx("input",{type:"tel",name:"phone",value:v.phone,onChange:A,placeholder:"+1 234 567 8900",className:"input",autoComplete:"tel"})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Email *"}),u.jsx("input",{type:"email",name:"email",value:v.email,onChange:A,placeholder:"you@example.com",className:"input",autoComplete:"email"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Password *"}),u.jsx("input",{type:"password",name:"password",value:v.password,onChange:A,placeholder:"",className:"input",autoComplete:n?"current-password":"new-password"})]}),!n&&u.jsxs("div",{className:"form-group",children:[u.jsx("label",{className:"form-label",children:"Confirm Password *"}),u.jsx("input",{type:"password",name:"confirmPassword",value:v.confirmPassword,onChange:A,placeholder:"",className:"input",autoComplete:"new-password"})]}),u.jsx("button",{type:"submit",className:"btn btn-primary btn-lg auth-submit",disabled:i||p,children:i?u.jsx(et,{size:"sm"}):n?"Sign In":"Create Account"}),u.jsx("div",{className:"auth-divider",children:u.jsx("span",{children:"or"})}),u.jsxs("button",{type:"button",className:"btn btn-secondary btn-lg auth-google",onClick:K,disabled:i,children:[u.jsx("span",{className:"google-icon",children:"G"}),"Continue with Google"]})]}),u.jsx("p",{className:"auth-switch",children:n?u.jsxs(u.Fragment,{children:["Don't have an account?"," ",u.jsx("button",{onClick:()=>e(!1),children:"Sign up"})]}):u.jsxs(u.Fragment,{children:["Already have an account?"," ",u.jsx("button",{onClick:()=>e(!0),children:"Sign in"})]})})]})})]})},QI=({size:n=24})=>u.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),u.jsx("circle",{cx:"12",cy:"13",r:"4"})]}),KI=({size:n=24})=>u.jsx("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"})}),xE=({size:n=24})=>u.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"}),u.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),u.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"22"})]}),WI=({size:n=24})=>u.jsx("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"currentColor",children:u.jsx("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})}),zi=({size:n=24})=>u.jsx("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})}),Hm=({size:n=24})=>u.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"m22 8-6 4 6 4V8Z"}),u.jsx("rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2"})]}),$I=({size:n=24})=>u.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.34l1 1L22 8v8"}),u.jsx("path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2"}),u.jsx("line",{x1:"23",y1:"1",x2:"1",y2:"23"})]}),XI=({size:n=24})=>u.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),u.jsx("path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07"}),u.jsx("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14"})]}),ZI=({size:n=24})=>u.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),u.jsx("line",{x1:"23",y1:"9",x2:"17",y2:"15"}),u.jsx("line",{x1:"17",y1:"9",x2:"23",y2:"15"})]}),pu=({size:n=24})=>u.jsx("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"m15 18-6-6 6-6"})}),Ha=({size:n=24})=>u.jsx("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),wE=({size:n=24})=>u.jsx("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("circle",{cx:"12",cy:"12",r:"10"})}),Qc=({size:n=24})=>u.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("path",{d:"m21 21-4.3-4.3"})]}),NE=({size:n=24})=>u.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),TE=({size:n=24})=>u.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),u.jsx("polyline",{points:"16 17 21 12 16 7"}),u.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),AE=({size:n=24})=>u.jsx("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),JI=({size:n=24})=>u.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),eD=({size:n=24})=>u.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),tD=({size:n=24})=>u.jsx("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"currentColor",children:u.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})}),RE=({size:n=24})=>u.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),u.jsx("circle",{cx:"9",cy:"9",r:"2"}),u.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),nD=({size:n=24})=>u.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),u.jsx("polyline",{points:"14 2 14 8 20 8"})]}),sD=({size:n=24})=>u.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("polyline",{points:"3 6 5 6 21 6"}),u.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),Df=({size:n=24})=>u.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),u.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),wb=({size:n=24})=>u.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),u.jsx("path",{d:"m9 12 2 2 4-4"})]}),iD=({size:n=24})=>u.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("polyline",{points:"12 6 12 12 16 14"})]}),Nb=({size:n=24})=>u.jsx("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("polyline",{points:"20 6 9 17 4 12"})}),Tb=({size:n=24,color:e})=>u.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:e||"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[u.jsx("polyline",{points:"18 6 9 17 5 13"}),u.jsx("polyline",{points:"22 6 13 17 11 15"})]}),aD=({size:n=24})=>u.jsx("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"currentColor",children:u.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})}),rD=({size:n=24})=>u.jsxs("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"currentColor",children:[u.jsx("rect",{x:"6",y:"4",width:"4",height:"16",rx:"1"}),u.jsx("rect",{x:"14",y:"4",width:"4",height:"16",rx:"1"})]}),lD=()=>{const{userProfile:n,logout:e,isAdmin:i}=en(),a=qt(),l=async()=>{await e(),a("/")},c=[{path:"/app/chats",icon:u.jsx(Ha,{size:20}),label:"Chats"},{path:"/app/status",icon:u.jsx(wE,{size:20}),label:"Status"},{path:"/app/calls",icon:u.jsx(zi,{size:20}),label:"Calls"},{path:"/app/search",icon:u.jsx(Qc,{size:20}),label:"Search"},{path:"/app/settings",icon:u.jsx(NE,{size:20}),label:"Settings"}];return u.jsxs("aside",{className:"sidebar",children:[u.jsxs("div",{className:"sidebar-header",children:[u.jsx("span",{className:"sidebar-logo-icon",children:u.jsx(Ha,{size:24})}),u.jsx("span",{className:"sidebar-logo-text",children:"ZyChat"})]}),u.jsxs("nav",{className:"sidebar-nav",children:[c.map(h=>u.jsxs(bc,{to:h.path,className:({isActive:m})=>`sidebar-nav-item ${m?"active":""}`,children:[u.jsx("span",{className:"sidebar-nav-icon",children:h.icon}),u.jsx("span",{className:"sidebar-nav-label",children:h.label})]},h.path)),i&&u.jsxs(bc,{to:"/admin",className:({isActive:h})=>`sidebar-nav-item admin-link ${h?"active":""}`,children:[u.jsx("span",{className:"sidebar-nav-icon",children:u.jsx(AE,{size:20})}),u.jsx("span",{className:"sidebar-nav-label",children:"Admin"})]})]}),u.jsxs("div",{className:"sidebar-footer",children:[u.jsxs("div",{className:"sidebar-user",children:[u.jsx(Tt,{src:n?.avatarUrl,name:n?.displayName,size:"md",showStatus:!0,isOnline:!0}),u.jsxs("div",{className:"sidebar-user-info",children:[u.jsx("p",{className:"sidebar-user-name",children:n?.displayName}),u.jsxs("p",{className:"sidebar-user-username",children:["@",n?.username]})]})]}),u.jsx("button",{className:"btn btn-ghost btn-icon sidebar-logout",onClick:l,title:"Logout",children:u.jsx(TE,{size:20})})]})]})},oD=()=>{const n=[{path:"/app/chats",icon:u.jsx(Ha,{size:22}),label:"Chats"},{path:"/app/status",icon:u.jsx(wE,{size:22}),label:"Status"},{path:"/app/calls",icon:u.jsx(zi,{size:22}),label:"Calls"},{path:"/app/search",icon:u.jsx(Qc,{size:22}),label:"Search"},{path:"/app/settings",icon:u.jsx(NE,{size:22}),label:"Settings"}];return u.jsx("nav",{className:"mobile-nav",children:n.map(e=>u.jsxs(bc,{to:e.path,className:({isActive:i})=>`mobile-nav-item ${i?"active":""}`,children:[u.jsx("span",{className:"mobile-nav-icon",children:e.icon}),u.jsx("span",{className:"mobile-nav-label",children:e.label})]},e.path))})},cD=()=>u.jsxs("div",{className:"app-layout",children:[u.jsx(lD,{}),u.jsx("main",{className:"app-main",children:u.jsx(sN,{})}),u.jsx(oD,{})]}),uD=({chat:n,onClick:e})=>{const{currentUser:i}=en(),[a,l]=E.useState(n.otherUser||null),[c,h]=E.useState(n.lastMessage||null);E.useEffect(()=>{const C=async()=>{if(!n.isGroup&&!a&&n.members&&i){const O=Object.keys(n.members).find(D=>D!==i.uid);if(O)try{const D=await kn(O);D&&l(D)}catch(D){console.error("Error fetching other user:",D)}}};n.otherUser?l(n.otherUser):C()},[n,i,a]),E.useEffect(()=>{n.lastMessage&&h(n.lastMessage)},[n.lastMessage]),E.useEffect(()=>{if(!n.chatId)return;const C=Bl(ae(re,`messages/${n.chatId}`),Pl("createdAt"),zm(1)),w=Ht(C,O=>{O.exists()?O.forEach(D=>{h(D.val())}):h(null)},O=>{console.error("Error subscribing to last message:",O)});return()=>w()},[n.chatId]);const m=C=>{if(!C)return"";const w=new Date(C),D=new Date-w,A=Math.floor(D/(1e3*60*60*24));return A===0?w.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):A===1?"Yesterday":A<7?w.toLocaleDateString([],{weekday:"short"}):w.toLocaleDateString([],{month:"short",day:"numeric"})},p=()=>n.isGroup?{name:n.groupName||"Group",avatar:n.groupIconUrl,isOnline:!1}:a?{name:a.displayName||a.username||"User",avatar:a.avatarUrl,isOnline:a.isOnline}:{name:"Loading...",avatar:null,isOnline:!1},{name:g,avatar:v,isOnline:_}=p(),b=()=>{if(!c)return"No messages yet";const C=c;switch(C.type){case"image":return" Photo";case"audio":return" Voice message";case"file":return` ${C.fileName||"File"}`;default:return C.text||""}};return u.jsxs("div",{className:"chat-list-item",onClick:e,children:[u.jsx(Tt,{src:v,name:g,size:"lg",showStatus:!n.isGroup,isOnline:_}),u.jsxs("div",{className:"chat-list-item-content",children:[u.jsxs("div",{className:"chat-list-item-header",children:[u.jsx("h4",{className:"chat-list-item-name",children:g}),u.jsx("span",{className:"chat-list-item-time",children:m(c?.createdAt)})]}),u.jsx("p",{className:"chat-list-item-preview",children:b()})]})]})},dD=({chats:n,onSelect:e})=>u.jsx("div",{className:"chat-list",children:n.map(i=>u.jsx(uD,{chat:i,onClick:()=>e(i.chatId)},i.chatId))}),hD=()=>{const{chats:n,chatsLoading:e}=Bm(),i=qt(),a=l=>{i(`/app/chats/${l}`)};return e?u.jsx("div",{className:"chats-loading",children:u.jsx(et,{size:"lg"})}):u.jsxs("div",{className:"chats-page",children:[u.jsxs("div",{className:"chats-header",children:[u.jsx("h1",{className:"chats-title",children:"Chats"}),u.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>i("/app/search"),children:"+ New Chat"})]}),n.length===0?u.jsxs("div",{className:"empty-state",children:[u.jsx("div",{className:"empty-state-icon",children:""}),u.jsx("h3",{className:"empty-state-title",children:"No conversations yet"}),u.jsx("p",{className:"empty-state-text",children:"Start chatting by searching for users or creating a group."}),u.jsx("button",{className:"btn btn-primary",onClick:()=>i("/app/search"),children:"Find Users"})]}):u.jsx(dD,{chats:n,onSelect:a})]})},fD=({chat:n,otherUser:e,typingUsers:i,onBack:a})=>{const l=qt(),{startCall:c}=Hl(),h=()=>{if(n.isGroup){const D=n.members?Object.keys(n.members).length:0;return{name:n.groupName||"Group",avatar:n.groupIconUrl,subtitle:`${D} members`}}else if(e)return{name:e.displayName||e.username,avatar:e.avatarUrl,subtitle:e.isOnline?"Online":e.lastSeen?`Last seen ${m(e.lastSeen)}`:"Offline",isOnline:e.isOnline};return{name:"Unknown",avatar:null,subtitle:""}},m=D=>{const A=new Date(D),F=new Date-A,ee=Math.floor(F/6e4),K=Math.floor(F/36e5),X=Math.floor(F/864e5);return ee<1?"just now":ee<60?`${ee}m ago`:K<24?`${K}h ago`:X===1?"yesterday":A.toLocaleDateString()},{name:p,avatar:g,subtitle:v,isOnline:_}=h(),C=i.length===0?null:i.length===1?"typing...":`${i.length} people typing...`,w=async()=>{if(e)try{await c(e.uid,"audio")}catch(D){console.error("Failed to start call:",D)}},O=async()=>{if(e)try{await c(e.uid,"video")}catch(D){console.error("Failed to start call:",D)}};return u.jsxs("header",{className:"chat-header",children:[u.jsx("button",{className:"btn btn-ghost btn-icon chat-back",onClick:a,children:u.jsx(pu,{size:24})}),u.jsxs("div",{className:"chat-header-info",onClick:()=>n.isGroup&&l(`/app/chats/${n.chatId}/info`),children:[u.jsx(Tt,{src:g,name:p,size:"md",showStatus:!n.isGroup,isOnline:_}),u.jsxs("div",{className:"chat-header-text",children:[u.jsx("h2",{className:"chat-header-name",children:p}),u.jsx("p",{className:`chat-header-status ${C?"typing":""}`,children:C||v})]})]}),u.jsx("div",{className:"encryption-badge",title:"End-to-end encrypted",children:u.jsx(Df,{size:14})}),u.jsx("div",{className:"chat-header-actions",children:!n.isGroup&&u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"btn btn-ghost btn-icon",onClick:w,title:"Audio call",children:u.jsx(zi,{size:20})}),u.jsx("button",{className:"btn btn-ghost btn-icon",onClick:O,title:"Video call",children:u.jsx(Hm,{size:20})})]})})]})},jE=E.forwardRef(({messages:n,currentUserId:e},i)=>{const[a,l]=E.useState(null),[c,h]=E.useState(null),m=E.useRef({}),p=R=>R?new Date(R).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",g=R=>{if(!R)return"";const B=new Date(R),te=new Date,oe=new Date(te);return oe.setDate(oe.getDate()-1),B.toDateString()===te.toDateString()?"Today":B.toDateString()===oe.toDateString()?"Yesterday":B.toLocaleDateString([],{month:"short",day:"numeric",year:B.getFullYear()!==te.getFullYear()?"numeric":void 0})},[v,_]=E.useState(0),[b,C]=E.useState(0),[w,O]=E.useState(0),D=R=>{const B=m.current[R];B&&(c===R?(B.pause(),h(null)):(c&&m.current[c]&&(m.current[c].pause(),m.current[c].currentTime=0),B.play(),h(R)))},A=R=>{const B=R.target;if(B.duration){const te=B.currentTime/B.duration*100;_(te),O(B.currentTime)}},H=R=>{const B=R.target;C(B.duration)},F=(R,B)=>{const te=m.current[B];if(!te)return;const oe=R.target.value/100*te.duration;te.currentTime=oe,_(R.target.value),O(oe)},ee=R=>{h(null),_(0),O(0)},K=R=>{if(!R)return"0:00";const B=Math.floor(R/60),te=Math.floor(R%60);return`${B}:${te.toString().padStart(2,"0")}`},X=(R,B)=>{if(!B)return null;switch(R.status||"sent"){case"sending":return u.jsx(iD,{size:14});case"sent":return u.jsx(Nb,{size:14});case"delivered":return u.jsx(Tb,{size:14});case"read":return u.jsx(Tb,{size:14,color:"#53bdeb"});default:return u.jsx(Nb,{size:14})}},Y=n.reduce((R,B)=>{const te=g(B.createdAt);return R[te]||(R[te]=[]),R[te].push(B),R},{}),$=R=>{const B=R.senderId===e;if(R.senderId==="system")return u.jsx("div",{className:"message-system",children:u.jsx("p",{children:R.text})},R.messageId);const oe=c===R.messageId;return u.jsx("div",{className:`message ${B?"sent":"received"}`,children:u.jsxs("div",{className:`message-bubble ${R.type!=="text"?"media":""}`,children:[!B&&u.jsxs("span",{className:"message-sender",children:["@",R.senderUsername]}),R.type==="text"&&u.jsx("p",{className:"message-text",children:R.text}),R.type==="image"&&u.jsxs("div",{className:"message-image-container",onClick:()=>l(R.mediaUrl),children:[u.jsx("img",{src:R.mediaUrl,alt:"Shared image",className:"message-image",loading:"lazy"}),u.jsx("div",{className:"message-image-overlay",children:u.jsx(RE,{size:24})})]}),R.type==="audio"&&u.jsxs("div",{className:"message-audio-container",children:[u.jsx("div",{className:"audio-avatar",children:u.jsx(xE,{size:24})}),u.jsxs("div",{className:"audio-content",children:[u.jsx("button",{className:"audio-play-btn",onClick:()=>D(R.messageId),children:oe?u.jsx(rD,{size:20}):u.jsx(aD,{size:20})}),u.jsxs("div",{className:"audio-slider-container",children:[u.jsx("input",{type:"range",min:"0",max:"100",value:oe?v:0,onChange:ie=>F(ie,R.messageId),className:"audio-slider",style:{backgroundSize:`${oe?v:0}% 100%`}}),u.jsx("div",{className:"audio-timer",children:K(oe?w:b||0)})]}),u.jsx("audio",{ref:ie=>m.current[R.messageId]=ie,src:R.mediaUrl,onTimeUpdate:A,onLoadedMetadata:H,onEnded:()=>ee(R.messageId),style:{display:"none"}})]})]}),R.type==="file"&&u.jsxs("a",{href:R.mediaUrl,target:"_blank",rel:"noopener noreferrer",className:"message-file",download:!0,children:[u.jsx("div",{className:"file-icon-wrapper",children:u.jsx(nD,{size:28})}),u.jsxs("div",{className:"file-info",children:[u.jsx("span",{className:"file-name",children:R.fileName||"Download file"}),u.jsx("span",{className:"file-type",children:R.fileName?.split(".").pop()?.toUpperCase()||"FILE"})]}),u.jsx("div",{className:"file-download",children:""})]}),u.jsxs("div",{className:"message-footer",children:[u.jsx("span",{className:"message-time",children:p(R.createdAt)}),B&&u.jsx("span",{className:"message-status",children:X(R,B)})]})]})},R.messageId)};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"message-list",children:[Object.entries(Y).map(([R,B])=>u.jsxs("div",{className:"message-group",children:[u.jsx("div",{className:"message-date-divider",children:u.jsx("span",{children:R})}),B.map($)]},R)),u.jsx("div",{ref:i})]}),a&&u.jsxs("div",{className:"image-lightbox",onClick:()=>l(null),children:[u.jsx("button",{className:"lightbox-close",onClick:()=>l(null),children:""}),u.jsx("img",{src:a,alt:"Full size"})]})]})});jE.displayName="MessageList";const mD="dp0lfxfns",gu={profileImage:"profile_image_preset",images:"images_preset",audio:"audio_preset",file:"file_preset"},yu=async(n,e,i,a="image")=>{if(!e)throw new Error("Upload preset not configured");const l=new FormData;l.append("file",n),l.append("upload_preset",e),l.append("folder",i);const c=`https://api.cloudinary.com/v1_1/${mD}/${a}/upload`,h=await fetch(c,{method:"POST",body:l});if(!h.ok){const p=await h.json();throw new Error(p.error?.message||"Upload failed")}return(await h.json()).secure_url},pD=async n=>yu(n,gu.profileImage,"zychat/profile","image"),OE=async n=>yu(n,gu.images,"zychat/chat-images","image"),gD=async n=>yu(n,gu.audio,"zychat/audio","video"),yD=async n=>yu(n,gu.file,"zychat/files","raw"),vD=({chatId:n,senderId:e,senderUsername:i})=>{const[a,l]=E.useState(""),[c,h]=E.useState(!1),[m,p]=E.useState(null),[g,v]=E.useState(!1),[_,b]=E.useState(0),C=E.useRef(null),w=E.useRef(null),O=E.useRef(null),D=E.useRef([]),A=E.useRef(null);E.useEffect(()=>{if(m){const $=setTimeout(()=>p(null),5e3);return()=>clearTimeout($)}},[m]),E.useEffect(()=>(a.length>0&&(af(n,e,!0),A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{af(n,e,!1)},2e3)),()=>{A.current&&clearTimeout(A.current)}),[a,n,e]);const H=async $=>{if($.preventDefault(),!(!a.trim()||c)){h(!0);try{await dc(n,{senderId:e,senderUsername:i,type:"text",text:a.trim()}),l(""),af(n,e,!1)}catch(R){console.error("Error sending message:",R)}finally{h(!1)}}},F=async $=>{const R=$.target.files?.[0];if(R){h(!0);try{const B=await OE(R);await dc(n,{senderId:e,senderUsername:i,type:"image",mediaUrl:B})}catch(B){console.error("Error uploading image:",B),p("Failed to upload image. Please configure Cloudinary upload presets.")}finally{h(!1),$.target.value=""}}},ee=async $=>{const R=$.target.files?.[0];if(R){h(!0);try{const B=await yD(R);await dc(n,{senderId:e,senderUsername:i,type:"file",mediaUrl:B,fileName:R.name})}catch(B){console.error("Error uploading file:",B),p("Failed to upload file. Please configure Cloudinary upload presets.")}finally{h(!1),$.target.value=""}}},K=async()=>{try{const $=await navigator.mediaDevices.getUserMedia({audio:!0}),R=new MediaRecorder($);O.current=R,D.current=[],R.ondataavailable=te=>{D.current.push(te.data)},R.onstop=async()=>{const te=new Blob(D.current,{type:"audio/webm"}),oe=new File([te],"voice_message.webm",{type:"audio/webm"});h(!0);try{const ie=await gD(oe);await dc(n,{senderId:e,senderUsername:i,type:"audio",mediaUrl:ie})}catch(ie){console.error("Error uploading audio:",ie),p("Failed to upload voice message. Please configure Cloudinary presets.")}finally{h(!1)}$.getTracks().forEach(ie=>ie.stop())},R.start(),v(!0),b(0);const B=setInterval(()=>{b(te=>te+1)},1e3);O.current.interval=B}catch($){console.error("Error starting recording:",$)}},X=()=>{O.current&&g&&(clearInterval(O.current.interval),O.current.stop(),v(!1),b(0))},Y=$=>{const R=Math.floor($/60),B=$%60;return`${R}:${B.toString().padStart(2,"0")}`};return u.jsxs("div",{className:"message-input-container",children:[m&&u.jsxs("div",{className:"message-input-error",children:[u.jsxs("span",{children:[" ",m]}),u.jsx("button",{onClick:()=>p(null),children:""})]}),g?u.jsxs("div",{className:"recording-ui",children:[u.jsx("span",{className:"recording-indicator",children:""}),u.jsx("span",{className:"recording-time",children:Y(_)}),u.jsx("button",{className:"btn btn-danger btn-icon",onClick:X,title:"Stop recording",children:u.jsx(tD,{size:20})})]}):u.jsxs("form",{className:"message-input-form",onSubmit:H,children:[u.jsxs("div",{className:"message-input-actions",children:[u.jsx("input",{type:"file",accept:"image/*",ref:w,onChange:F,hidden:!0}),u.jsx("button",{type:"button",className:"btn btn-ghost btn-icon",onClick:()=>w.current?.click(),disabled:c,title:"Send image",children:u.jsx(RE,{size:20})}),u.jsx("input",{type:"file",ref:C,onChange:ee,hidden:!0}),u.jsx("button",{type:"button",className:"btn btn-ghost btn-icon",onClick:()=>C.current?.click(),disabled:c,title:"Send file",children:u.jsx(KI,{size:20})}),u.jsx("button",{type:"button",className:"btn btn-ghost btn-icon",onClick:K,disabled:c,title:"Record voice message",children:u.jsx(xE,{size:20})})]}),u.jsx("input",{type:"text",value:a,onChange:$=>l($.target.value),placeholder:"Type a message...",className:"message-input",disabled:c}),u.jsx("button",{type:"submit",className:"btn btn-primary btn-icon message-send",disabled:!a.trim()||c,children:c?u.jsx(et,{size:"sm"}):u.jsx(WI,{size:20})})]})]})},_D=()=>{const{chatId:n}=Lb(),e=qt(),{currentUser:i,userProfile:a}=en(),[l,c]=E.useState(null),[h,m]=E.useState([]),[p,g]=E.useState([]),[v,_]=E.useState(null),[b,C]=E.useState(!0),w=E.useRef(null);return E.useEffect(()=>{if(!n||!i)return;(async()=>{const D=await cI(n);if(!D){e("/app/chats");return}if(c(D),!D.isGroup){const H=Object.keys(D.members).find(F=>F!==i.uid);if(H){const F=await kn(H);_(F)}}C(!1)})()},[n,i,e]),E.useEffect(()=>{if(!n)return;const O=dI(n,D=>{m(D)});return()=>O()},[n]),E.useEffect(()=>{if(!n||!i)return;const O=hI(n,i.uid,D=>{g(D)});return()=>O()},[n,i]),E.useEffect(()=>{w.current?.scrollIntoView({behavior:"smooth"})},[h]),b?u.jsx("div",{className:"chat-loading",children:u.jsx(et,{size:"lg"})}):l?u.jsxs("div",{className:"chat-page",children:[u.jsx(fD,{chat:l,otherUser:v,typingUsers:p,onBack:()=>e("/app/chats")}),u.jsx(jE,{messages:h,currentUserId:i.uid,ref:w}),u.jsx(vD,{chatId:n,senderId:i.uid,senderUsername:a.username})]}):null},Ab="zychat_status_cache",bD=300*1e3,SD=()=>{const{currentUser:n,userProfile:e}=en(),[i,a]=E.useState([]),[l,c]=E.useState([]),[h,m]=E.useState(!0),[p,g]=E.useState(!1),[v,_]=E.useState(!1),[b,C]=E.useState(null),[w,O]=E.useState(0),D=E.useRef(null);E.useEffect(()=>{try{const K=localStorage.getItem(Ab);if(K){const{contactStatuses:X,timestamp:Y}=JSON.parse(K);Date.now()-Y<bD&&X?.length>0&&(c(X),m(!1))}}catch{}},[]),E.useEffect(()=>{if(!n){m(!1);return}let K=null,X=null,Y=!0;return(async()=>{try{const R=await Yc(n.uid);a(R),K=hE(B=>{const te=B.filter(oe=>oe.uid!==n.uid&&!oe.isBanned).map(oe=>oe.uid);if(X&&(X(),X=null),te.length===0){c([]),m(!1);return}X=pE(te,oe=>{c(oe),m(!1);try{localStorage.setItem(Ab,JSON.stringify({contactStatuses:oe,timestamp:Date.now()}))}catch{}})}),Y&&(setTimeout(()=>m(!1),800),Y=!1)}catch(R){console.error("Error loading statuses:",R),m(!1)}})(),()=>{K&&K(),X&&X()}},[n]);const A=async K=>{const X=K.target.files?.[0];if(X){g(!0);try{const Y=await OE(X),$=prompt("Add a caption (optional):")||"";await fI(n.uid,{mediaUrl:Y,caption:$});const R=await Yc(n.uid);a(R)}catch(Y){console.error("Error adding status:",Y)}finally{g(!1),K.target.value=""}}},H=(K,X=0)=>{C(K),O(X),_(!0)},F=()=>{b&&(w<b.statuses.length-1?O(w+1):_(!1))},ee=()=>{w>0&&O(w-1)};return h?u.jsxs("div",{className:"status-page",children:[u.jsx("header",{className:"status-header",children:u.jsx("h1",{className:"status-title",children:"Status"})}),u.jsxs("section",{className:"status-section",children:[u.jsx("h2",{className:"status-section-title",children:"My Status"}),u.jsx(xb,{})]}),u.jsxs("section",{className:"status-section",children:[u.jsx("h2",{className:"status-section-title",children:"Recent Updates"}),u.jsx("div",{className:"status-list",children:[1,2,3,4].map(K=>u.jsx(xb,{},K))})]})]}):u.jsxs("div",{className:"status-page",children:[u.jsx("header",{className:"status-header",children:u.jsx("h1",{className:"status-title",children:"Status"})}),u.jsxs("section",{className:"status-section",children:[u.jsx("h2",{className:"status-section-title",children:"My Status"}),u.jsxs("div",{className:"my-status-card",onClick:()=>{i.length>0?H({user:e,statuses:i}):D.current?.click()},children:[u.jsxs("div",{className:"my-status-avatar",children:[u.jsx(Tt,{src:e?.avatarUrl,name:e?.displayName,size:"lg"}),i.length===0&&u.jsx("span",{className:"my-status-add",children:"+"})]}),u.jsxs("div",{className:"my-status-info",children:[u.jsx("p",{className:"my-status-name",children:"My Status"}),u.jsx("p",{className:"my-status-text",children:i.length>0?`${i.length} status update${i.length>1?"s":""}`:"Tap to add status"})]}),p&&u.jsx(et,{size:"sm"})]}),u.jsx("input",{type:"file",accept:"image/*",ref:D,onChange:A,hidden:!0}),i.length>0&&u.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>D.current?.click(),disabled:p,children:"+ Add New Status"})]}),u.jsxs("section",{className:"status-section",children:[u.jsx("h2",{className:"status-section-title",children:"Recent Updates"}),l.length===0?u.jsx("div",{className:"empty-state",children:u.jsx("p",{className:"empty-state-text",children:"No recent status updates"})}):u.jsx("div",{className:"status-list",children:l.map(K=>u.jsxs("div",{className:"status-item",onClick:()=>H(K),children:[u.jsx("div",{className:"status-ring",children:u.jsx(Tt,{src:K.user.avatarUrl,name:K.user.displayName,size:"lg"})}),u.jsxs("div",{className:"status-item-info",children:[u.jsx("p",{className:"status-item-name",children:K.user.displayName}),u.jsx("p",{className:"status-item-time",children:new Date(K.statuses[K.statuses.length-1].createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},K.user.uid))})]}),v&&b&&u.jsx("div",{className:"status-viewer",onClick:()=>_(!1),children:u.jsxs("div",{className:"status-viewer-content",onClick:K=>K.stopPropagation(),children:[u.jsxs("div",{className:"status-viewer-header",children:[u.jsx(Tt,{src:b.user?.avatarUrl,name:b.user?.displayName,size:"sm"}),u.jsxs("div",{className:"status-viewer-info",children:[u.jsx("p",{className:"status-viewer-name",children:b.user?.displayName}),u.jsx("p",{className:"status-viewer-time",children:new Date(b.statuses[w].createdAt).toLocaleTimeString()})]}),u.jsx("button",{className:"btn btn-ghost btn-icon",onClick:()=>_(!1),children:""})]}),u.jsx("div",{className:"status-viewer-progress",children:b.statuses.map((K,X)=>u.jsx("div",{className:`progress-bar ${X<=w?"active":""}`},X))}),u.jsx("img",{src:b.statuses[w].mediaUrl,alt:"Status",className:"status-viewer-image"}),b.statuses[w].caption&&u.jsx("p",{className:"status-viewer-caption",children:b.statuses[w].caption}),u.jsxs("div",{className:"status-viewer-nav",children:[u.jsx("button",{className:"status-nav-btn prev",onClick:ee,disabled:w===0,children:""}),u.jsx("button",{className:"status-nav-btn next",onClick:F,children:w===b.statuses.length-1?"":""})]})]})})]})},ED=()=>{const{currentUser:n}=en(),{startCall:e}=Hl(),{callHistory:i,callsLoading:a,refreshCallHistory:l}=Bm(),[c,h]=E.useState([]),[m,p]=E.useState(!0);E.useEffect(()=>{if(!n||a||i.length===0){h([]),p(!1);return}(async()=>{p(!0);const w=await Promise.all(i.map(async O=>{const D=O.callerId===n.uid?O.calleeId:O.callerId,A=await kn(D);return{...O,otherUser:A,isOutgoing:O.callerId===n.uid}}));h(w),p(!1)})()},[n,i,a]);const g=C=>{if(!C)return"";const w=new Date(C),D=new Date-w,A=Math.floor(D/(1e3*60*60*24));return A===0?w.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):A===1?"Yesterday":A<7?w.toLocaleDateString([],{weekday:"short"}):w.toLocaleDateString([],{month:"short",day:"numeric"})},v=C=>C.type==="video"?C.isOutgoing?"":"":C.isOutgoing?"":"",_=C=>{switch(C.status){case"ended":return C.isOutgoing?"Outgoing":"Incoming";case"rejected":return C.isOutgoing?"Not answered":"Declined";default:return C.status}},b=async(C,w)=>{try{await e(C,w)}catch(O){console.error("Failed to start call:",O)}};return a||m?u.jsx("div",{className:"calls-loading",children:u.jsx(et,{size:"lg"})}):u.jsxs("div",{className:"calls-page",children:[u.jsx("header",{className:"calls-header",children:u.jsx("h1",{className:"calls-title",children:"Calls"})}),c.length===0?u.jsxs("div",{className:"empty-state",children:[u.jsx("div",{className:"empty-state-icon",children:""}),u.jsx("h3",{className:"empty-state-title",children:"No call history"}),u.jsx("p",{className:"empty-state-text",children:"Your call history will appear here."})]}):u.jsx("div",{className:"calls-list",children:c.map(C=>u.jsxs("div",{className:"call-item",children:[u.jsx(Tt,{src:C.otherUser?.avatarUrl,name:C.otherUser?.displayName,size:"lg"}),u.jsxs("div",{className:"call-item-info",children:[u.jsx("p",{className:"call-item-name",children:C.otherUser?.displayName||"Unknown"}),u.jsxs("p",{className:"call-item-details",children:[u.jsx("span",{className:"call-icon",children:v(C)}),_(C),"  ",g(C.startedAt)]})]}),u.jsxs("div",{className:"call-item-actions",children:[u.jsx("button",{className:"btn btn-ghost btn-icon",onClick:()=>b(C.otherUser?.uid,"audio"),title:"Audio call",children:""}),u.jsx("button",{className:"btn btn-ghost btn-icon",onClick:()=>b(C.otherUser?.uid,"video"),title:"Video call",children:""})]})]},C.callId))})]})},CD=()=>{const{userProfile:n,logout:e,isAdmin:i}=en(),{theme:a,setTheme:l}=RI(),{appSettings:c,updateSetting:h,clearCache:m,getCacheSize:p}=Bm(),{isInitialized:g}=zI(),v=qt(),[_,b]=E.useState(!1),[C,w]=E.useState(!1),[O,D]=E.useState(!1),[A,H]=E.useState(!1),[F,ee]=E.useState({displayName:n?.displayName||"",about:n?.about||"",phone:n?.phone||""}),K=E.useRef(null),X=B=>{const{name:te,value:oe}=B.target;ee(ie=>({...ie,[te]:oe}))},Y=async()=>{if(n){D(!0);try{await Ba(n.uid,{displayName:F.displayName.trim(),about:F.about.trim(),phone:F.phone.trim()}),w(!1)}catch(B){console.error("Error updating profile:",B)}finally{D(!1)}}},$=async B=>{const te=B.target.files?.[0];if(!(!te||!n)){H(!0);try{const oe=await pD(te);await Ba(n.uid,{avatarUrl:oe})}catch(oe){console.error("Error uploading avatar:",oe)}finally{H(!1),B.target.value=""}}},R=async()=>{await e(),v("/")};return n?u.jsxs("div",{className:"settings-page",children:[u.jsx("header",{className:"settings-header",children:u.jsx("h1",{className:"settings-title",children:"Settings"})}),u.jsxs("div",{className:"settings-content",children:[u.jsxs("section",{className:"settings-section",children:[u.jsx("h2",{className:"settings-section-title",children:"Profile"}),u.jsxs("div",{className:"profile-card glass-card",children:[u.jsxs("div",{className:"profile-avatar-section",children:[u.jsxs("div",{className:"profile-avatar-wrapper",children:[u.jsx(Tt,{src:n.avatarUrl,name:n.displayName,size:"2xl"}),A&&u.jsx("div",{className:"avatar-uploading",children:u.jsx(et,{size:"sm"})})]}),u.jsx("input",{type:"file",accept:"image/*",ref:K,onChange:$,hidden:!0}),u.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>K.current?.click(),disabled:A,children:"Change Photo"})]}),u.jsxs("div",{className:"profile-info",children:[u.jsxs("div",{className:"profile-field",children:[u.jsx("label",{className:"profile-label",children:"Username"}),u.jsxs("p",{className:"profile-value",children:["@",n.username]})]}),u.jsxs("div",{className:"profile-field",children:[u.jsx("label",{className:"profile-label",children:"Display Name"}),C?u.jsx("input",{type:"text",name:"displayName",value:F.displayName,onChange:X,className:"input"}):u.jsx("p",{className:"profile-value",children:n.displayName})]}),u.jsxs("div",{className:"profile-field",children:[u.jsx("label",{className:"profile-label",children:"About"}),C?u.jsx("textarea",{name:"about",value:F.about,onChange:X,className:"input",rows:3}):u.jsx("p",{className:"profile-value",children:n.about||"No bio yet"})]}),u.jsxs("div",{className:"profile-field",children:[u.jsx("label",{className:"profile-label",children:"Phone"}),C?u.jsx("input",{type:"tel",name:"phone",value:F.phone,onChange:X,className:"input"}):u.jsx("p",{className:"profile-value",children:n.phone||"Not set"})]}),u.jsxs("div",{className:"profile-field",children:[u.jsx("label",{className:"profile-label",children:"Email"}),u.jsx("p",{className:"profile-value",children:n.email})]}),u.jsx("div",{className:"profile-actions",children:C?u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"btn btn-primary",onClick:Y,disabled:O,children:O?u.jsx(et,{size:"sm"}):"Save Changes"}),u.jsx("button",{className:"btn btn-ghost",onClick:()=>{w(!1),ee({displayName:n.displayName,about:n.about,phone:n.phone})},children:"Cancel"})]}):u.jsx("button",{className:"btn btn-secondary",onClick:()=>w(!0),children:"Edit Profile"})})]})]})]}),u.jsxs("section",{className:"settings-section",children:[u.jsx("h2",{className:"settings-section-title",children:"Appearance"}),u.jsxs("div",{className:"theme-selector glass-card",children:[u.jsx("p",{className:"theme-label",children:"Theme"}),u.jsxs("div",{className:"theme-options",children:[u.jsxs("button",{className:`theme-option ${a==="light"?"active":""}`,onClick:()=>l("light"),children:[u.jsx("span",{className:"theme-option-icon",children:""}),u.jsx("span",{className:"theme-option-label",children:"Light"})]}),u.jsxs("button",{className:`theme-option ${a==="dark"?"active":""}`,onClick:()=>l("dark"),children:[u.jsx("span",{className:"theme-option-icon",children:""}),u.jsx("span",{className:"theme-option-label",children:"Dark"})]}),u.jsxs("button",{className:`theme-option ${a==="system"?"active":""}`,onClick:()=>l("system"),children:[u.jsx("span",{className:"theme-option-icon",children:""}),u.jsx("span",{className:"theme-option-label",children:"System"})]})]})]})]}),u.jsxs("section",{className:"settings-section",children:[u.jsx("h2",{className:"settings-section-title",children:"Storage & Data"}),u.jsxs("div",{className:"settings-card glass-card",children:[u.jsxs("div",{className:"settings-toggle-row",children:[u.jsxs("div",{className:"settings-toggle-info",children:[u.jsx("span",{className:"settings-toggle-label",children:"Compress Images"}),u.jsx("span",{className:"settings-toggle-desc",children:"Reduce image size before sending to save storage"})]}),u.jsx("button",{className:`toggle-switch ${c.compressImages?"active":""}`,onClick:()=>h("compressImages",!c.compressImages),children:u.jsx("span",{className:"toggle-slider"})})]}),u.jsxs("div",{className:"settings-info-row",children:[u.jsx("span",{className:"settings-info-label",children:"Cache Size"}),u.jsxs("span",{className:"settings-info-value",children:[p()," MB"]})]}),u.jsxs("button",{className:"btn btn-secondary settings-action-btn",onClick:()=>{b(!0),m(),setTimeout(()=>b(!1),500)},disabled:_,children:[u.jsx(sD,{size:18}),_?"Clearing...":"Clear Cache"]})]})]}),u.jsxs("section",{className:"settings-section",children:[u.jsx("h2",{className:"settings-section-title",children:"Privacy & Security"}),u.jsxs("div",{className:"settings-card glass-card",children:[u.jsxs("div",{className:"encryption-status",children:[u.jsx("div",{className:"encryption-status-icon",children:g?u.jsx(wb,{size:32}):u.jsx(Df,{size:32})}),u.jsxs("div",{className:"encryption-status-info",children:[u.jsx("h4",{className:"encryption-status-title",children:g?"End-to-End Encryption Active":"Setting Up Encryption..."}),u.jsx("p",{className:"encryption-status-desc",children:"Messages encrypted with AES-256-GCM + ECDH key exchange."})]})]}),u.jsxs("div",{className:"security-tips",children:[u.jsxs("p",{children:[u.jsx(Df,{size:14})," Private keys stored only on your device"]}),u.jsxs("p",{children:[u.jsx(wb,{size:14})," End-to-end encryption for all messages"]})]})]})]}),i&&u.jsxs("section",{className:"settings-section",children:[u.jsx("h2",{className:"settings-section-title",children:"Admin"}),u.jsx("div",{className:"settings-links",children:u.jsxs("button",{className:"settings-link",onClick:()=>v("/admin"),children:[u.jsx("span",{className:"settings-link-icon",children:u.jsx(AE,{size:20})}),u.jsx("span",{className:"settings-link-text",children:"Admin Dashboard"}),u.jsx("span",{className:"settings-link-arrow",children:""})]})})]}),u.jsxs("section",{className:"settings-section",children:[u.jsx("h2",{className:"settings-section-title",children:"Help & Legal"}),u.jsxs("div",{className:"settings-links",children:[u.jsxs("button",{className:"settings-link",onClick:()=>v("/help"),children:[u.jsx("span",{className:"settings-link-icon",children:""}),u.jsx("span",{className:"settings-link-text",children:"Help & Support"}),u.jsx("span",{className:"settings-link-arrow",children:""})]}),u.jsxs("button",{className:"settings-link",onClick:()=>v("/privacy"),children:[u.jsx("span",{className:"settings-link-icon",children:""}),u.jsx("span",{className:"settings-link-text",children:"Privacy Policy"}),u.jsx("span",{className:"settings-link-arrow",children:""})]}),u.jsxs("button",{className:"settings-link",onClick:()=>v("/terms"),children:[u.jsx("span",{className:"settings-link-icon",children:""}),u.jsx("span",{className:"settings-link-text",children:"Terms of Service"}),u.jsx("span",{className:"settings-link-arrow",children:""})]})]})]}),u.jsxs("section",{className:"settings-section",children:[u.jsx("h2",{className:"settings-section-title",children:"Account"}),u.jsx("div",{className:"settings-links",children:u.jsxs("button",{className:"settings-link danger",onClick:R,children:[u.jsx("span",{className:"settings-link-icon",children:u.jsx(TE,{size:20})}),u.jsx("span",{className:"settings-link-text",children:"Log Out"}),u.jsx("span",{className:"settings-link-arrow",children:""})]})})]})]})]}):u.jsx("div",{className:"settings-loading",children:u.jsx(et,{size:"lg"})})},xD=()=>{const{currentUser:n}=en(),e=qt(),[i,a]=E.useState(""),[l,c]=E.useState([]),[h,m]=E.useState(!1),[p,g]=E.useState({}),[v,_]=E.useState([]),[b,C]=E.useState([]),[w,O]=E.useState("search"),[D,A]=E.useState({});E.useEffect(()=>{if(!n)return;const R=yE(n.uid,te=>{_(te)}),B=vE(n.uid,te=>{C(te)});return()=>{R(),B()}},[n]);const H=async R=>{if(R?.preventDefault(),!(!i.trim()||!n)){m(!0),c([]);try{const B=await CI(i.trim(),n.uid);c(B);const te={};for(const oe of B)te[oe.uid]=await EI(n.uid,oe.uid);g(te)}catch(B){console.error("Search error:",B)}finally{m(!1)}}},F=async R=>{if(n){A(B=>({...B,[R]:!0}));try{const B=await _I(n.uid,R);g(B==="connected"?te=>({...te,[R]:"connected"}):te=>({...te,[R]:"pending_sent"}))}catch(B){console.error("Error sending request:",B)}finally{A(B=>({...B,[R]:!1}))}}},ee=async R=>{if(n){A(B=>({...B,[R]:!0}));try{await SI(n.uid,R),g(B=>({...B,[R]:"none"}))}catch(B){console.error("Error canceling request:",B)}finally{A(B=>({...B,[R]:!1}))}}},K=async R=>{A(B=>({...B,[R.fromUid]:!0}));try{await gE(R.fromUid,n.uid)}catch(B){console.error("Error accepting request:",B)}finally{A(B=>({...B,[R.fromUid]:!1}))}},X=async R=>{A(B=>({...B,[R.fromUid]:!0}));try{await bI(R.fromUid,n.uid)}catch(B){console.error("Error rejecting request:",B)}finally{A(B=>({...B,[R.fromUid]:!1}))}},Y=async R=>{if(n){A(B=>({...B,[`chat_${R}`]:!0}));try{const B=await oI(n.uid,R);e(`/app/chats/${B}`)}catch(B){console.error("Error opening chat:",B)}finally{A(B=>({...B,[`chat_${R}`]:!1}))}}},$=R=>{const B=p[R.uid];if(D[R.uid])return u.jsx("button",{className:"btn btn-secondary btn-sm",disabled:!0,children:u.jsx(et,{size:"sm"})});switch(B){case"connected":return u.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>Y(R.uid),children:[u.jsx(Ha,{size:16})," Chat"]});case"pending_sent":return u.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>ee(R.uid),children:"Pending "});case"pending_received":return u.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>K({fromUid:R.uid}),children:"Accept"});default:return u.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>F(R.uid),children:[u.jsx(JI,{size:16})," Add"]})}};return u.jsxs("div",{className:"search-page",children:[u.jsxs("header",{className:"search-header",children:[u.jsx("h1",{className:"search-title",children:"Connect"}),v.length>0&&u.jsx("span",{className:"request-badge",children:v.length})]}),u.jsxs("div",{className:"search-tabs",children:[u.jsxs("button",{className:`search-tab ${w==="search"?"active":""}`,onClick:()=>O("search"),children:[u.jsx(Qc,{size:18})," Find Users"]}),u.jsxs("button",{className:`search-tab ${w==="requests"?"active":""}`,onClick:()=>O("requests"),children:["Requests ",v.length>0&&u.jsx("span",{className:"tab-badge",children:v.length})]}),u.jsxs("button",{className:`search-tab ${w==="connections"?"active":""}`,onClick:()=>O("connections"),children:["Friends (",b.length,")"]})]}),u.jsxs("div",{className:"search-content",children:[w==="search"&&u.jsxs(u.Fragment,{children:[u.jsxs("form",{className:"search-form",onSubmit:H,children:[u.jsxs("div",{className:"search-input-wrapper",children:[u.jsx(Qc,{size:20}),u.jsx("input",{type:"text",value:i,onChange:R=>a(R.target.value),placeholder:"Search by name or @username...",className:"search-input"})]}),u.jsx("button",{type:"submit",className:"btn btn-primary",disabled:!i.trim()||h,children:h?u.jsx(et,{size:"sm"}):"Search"})]}),u.jsxs("div",{className:"search-results",children:[h&&u.jsxs("div",{className:"search-loading",children:[u.jsx(et,{}),u.jsx("p",{children:"Searching..."})]}),!h&&l.length===0&&i&&u.jsxs("div",{className:"empty-state",children:[u.jsx("div",{className:"empty-state-icon",children:""}),u.jsx("h3",{className:"empty-state-title",children:"No users found"}),u.jsx("p",{className:"empty-state-text",children:"Try searching with a different name or username."})]}),!h&&l.length===0&&!i&&u.jsxs("div",{className:"empty-state",children:[u.jsx("div",{className:"empty-state-icon",children:""}),u.jsx("h3",{className:"empty-state-title",children:"Find Friends"}),u.jsx("p",{className:"empty-state-text",children:"Search by name or username to connect with others."})]}),l.map(R=>u.jsxs("div",{className:"user-card glass-card",children:[u.jsx(Tt,{src:R.avatarUrl,name:R.displayName,size:"lg",showStatus:!0,isOnline:R.isOnline}),u.jsxs("div",{className:"user-card-info",children:[u.jsx("h3",{className:"user-card-name",children:R.displayName}),u.jsxs("p",{className:"user-card-username",children:["@",R.username]})]}),$(R)]},R.uid))]})]}),w==="requests"&&u.jsx("div",{className:"requests-list",children:v.length===0?u.jsxs("div",{className:"empty-state",children:[u.jsx("div",{className:"empty-state-icon",children:""}),u.jsx("h3",{className:"empty-state-title",children:"No pending requests"}),u.jsx("p",{className:"empty-state-text",children:"When someone sends you a friend request, it will appear here."})]}):v.map(R=>u.jsxs("div",{className:"request-card glass-card",children:[u.jsx(Tt,{src:R.fromUser?.avatarUrl,name:R.fromUser?.displayName,size:"lg"}),u.jsxs("div",{className:"request-card-info",children:[u.jsx("h3",{className:"request-card-name",children:R.fromUser?.displayName}),u.jsxs("p",{className:"request-card-username",children:["@",R.fromUser?.username]}),u.jsx("p",{className:"request-card-time",children:new Date(R.createdAt).toLocaleDateString()})]}),u.jsxs("div",{className:"request-card-actions",children:[u.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>K(R),disabled:D[R.fromUid],children:"Accept"}),u.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>X(R),disabled:D[R.fromUid],children:u.jsx(eD,{size:16})})]})]},R.requestId))}),w==="connections"&&u.jsx("div",{className:"connections-list",children:b.length===0?u.jsxs("div",{className:"empty-state",children:[u.jsx("div",{className:"empty-state-icon",children:""}),u.jsx("h3",{className:"empty-state-title",children:"No connections yet"}),u.jsx("p",{className:"empty-state-text",children:"Find and connect with friends to start chatting!"}),u.jsx("button",{className:"btn btn-primary",onClick:()=>O("search"),children:"Find Friends"})]}):b.map(R=>u.jsxs("div",{className:"connection-card glass-card",children:[u.jsx(Tt,{src:R.user?.avatarUrl,name:R.user?.displayName,size:"lg",showStatus:!0,isOnline:R.user?.isOnline}),u.jsxs("div",{className:"connection-card-info",children:[u.jsx("h3",{className:"connection-card-name",children:R.user?.displayName}),u.jsxs("p",{className:"connection-card-username",children:["@",R.user?.username]})]}),u.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>Y(R.uid),disabled:D[`chat_${R.uid}`],children:D[`chat_${R.uid}`]?u.jsx(et,{size:"sm"}):u.jsxs(u.Fragment,{children:[u.jsx(Ha,{size:16})," Chat"]})})]},R.uid))})]})]})},wD=()=>{const n=qt();return u.jsxs("div",{className:"legal-page",children:[u.jsxs("header",{className:"legal-header",children:[u.jsx("button",{className:"btn btn-ghost btn-icon",onClick:()=>n(-1),children:u.jsx(pu,{size:24})}),u.jsx("h1",{children:"Help & Support"})]}),u.jsxs("div",{className:"legal-content glass-card",children:[u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"Contact Support"}),u.jsx("p",{children:"Need assistance with ZyChat? Our support team is here to help you with any issues or questions you may have."}),u.jsxs("div",{className:"contact-card",children:[u.jsx("div",{className:"contact-icon",children:u.jsx(Ha,{size:32})}),u.jsxs("div",{className:"contact-info",children:[u.jsx("h3",{children:"Email Support"}),u.jsx("p",{children:"For all inquiries, please contact us at:"}),u.jsx("a",{href:"mailto:contact.uthakkan@gmail.com",className:"contact-email",children:"contact.uthakkan@gmail.com"}),u.jsx("p",{className:"contact-note",children:"We typically respond within 24 hours."})]})]})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"Frequently Asked Questions"}),u.jsxs("div",{className:"faq-item",children:[u.jsx("h3",{children:"How do I reset my password?"}),u.jsx("p",{children:"Currently, password reset is handled securely via email. Please contact support if you simply cannot access your account."})]}),u.jsxs("div",{className:"faq-item",children:[u.jsx("h3",{children:"Is my Chat Secure?"}),u.jsx("p",{children:"Yes, ZyChat uses end-to-end encryption for all personal messaging, ensuring only you and the recipient can read your messages."})]}),u.jsxs("div",{className:"faq-item",children:[u.jsx("h3",{children:"How do I report a bug?"}),u.jsx("p",{children:"Please send an email to our support address with a detailed description of the issue and any screenshots if possible."})]})]})]})]})},ND=()=>{const n=qt();return u.jsxs("div",{className:"legal-page",children:[u.jsxs("header",{className:"legal-header",children:[u.jsx("button",{className:"btn btn-ghost btn-icon",onClick:()=>n(-1),children:u.jsx(pu,{size:24})}),u.jsx("h1",{children:"Privacy Policy"})]}),u.jsxs("div",{className:"legal-content glass-card",children:[u.jsxs("p",{className:"legal-date",children:["Last Updated: ",new Date().toLocaleDateString()]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"1. Information We Collect"}),u.jsx("p",{children:"At ZyChat, we prioritize your privacy. We collect the minimum information necessary to provide our services:"}),u.jsxs("ul",{children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Account Information:"})," Username, display name, and optional profile picture."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Usage Data:"})," Connection status and last seen timestamp (can be disabled)."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Encrypted Content:"})," Your messages and media are end-to-end encrypted locally before sending. We cannot read your private messages."]})]})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"2. How We Use Your Information"}),u.jsx("p",{children:"We use your data solely to:"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Facilitate real-time messaging and calls."}),u.jsx("li",{children:"Authenticate your identity and prevent fraud."}),u.jsx("li",{children:"Connect you with other users via the friend request system."})]})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"3. Data Security"}),u.jsx("p",{children:"ZyChat implements industry-standard security measures, including AES-256-GCM encryption for messages and media. Your private keys are stored only on your device and never transmitted to our servers."})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"4. Contact Us"}),u.jsxs("p",{children:["If you have questions about this Privacy Policy, please contact us at ",u.jsx("a",{href:"mailto:contact.uthakkan@gmail.com",children:"contact.uthakkan@gmail.com"}),"."]})]})]})]})},TD=()=>{const n=qt();return u.jsxs("div",{className:"legal-page",children:[u.jsxs("header",{className:"legal-header",children:[u.jsx("button",{className:"btn btn-ghost btn-icon",onClick:()=>n(-1),children:u.jsx(pu,{size:24})}),u.jsx("h1",{children:"Terms of Service"})]}),u.jsxs("div",{className:"legal-content glass-card",children:[u.jsxs("p",{className:"legal-date",children:["Last Updated: ",new Date().toLocaleDateString()]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"1. Acceptance of Terms"}),u.jsx("p",{children:"By accessing or using ZyChat, you agree to be bound by these Terms of Service and our Privacy Policy."})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"2. User Conduct"}),u.jsx("p",{children:"You agree not to use the service to:"}),u.jsxs("ul",{children:[u.jsx("li",{children:"Violate any laws or regulations."}),u.jsx("li",{children:"Send spam (`unsolicited messages`) or harass other users."}),u.jsx("li",{children:"Distribute malware or malicious content."}),u.jsx("li",{children:"Attempt to bypass security measures."})]}),u.jsx("p",{children:"Violation of these terms may result in account suspension or termination."})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"3. Service Availability"}),u.jsx("p",{children:"We strive to keep ZyChat available 24/7 but cannot guarantee uninterrupted service. We may update or modify the service at any time."})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"4. Disclaimer"}),u.jsx("p",{children:'The service is provided "as is" without warranties of any kind. We are not responsible for user-generated content or interactions.'})]}),u.jsxs("section",{className:"legal-section",children:[u.jsx("h2",{children:"5. Contact"}),u.jsxs("p",{children:["For any legal inquiries, please contact us at ",u.jsx("a",{href:"mailto:contact.uthakkan@gmail.com",children:"contact.uthakkan@gmail.com"}),"."]})]})]})]})},AD=()=>{const[n,e]=E.useState({totalUsers:0,activeUsers:0,bannedUsers:0,totalChats:0}),[i,a]=E.useState(!0);return E.useEffect(()=>{(async()=>{try{const c=await it(ae(re,"users"));let h=0,m=0,p=0;c.exists()&&c.forEach(_=>{const b=_.val();h++,b.isBanned?p++:m++});const g=await it(ae(re,"chats")),v=g.exists()?Object.keys(g.val()).length:0;e({totalUsers:h,activeUsers:m,bannedUsers:p,totalChats:v})}catch(c){console.error("Error loading stats:",c)}finally{a(!1)}})()},[]),i?u.jsx("div",{className:"admin-loading",children:u.jsx(et,{size:"lg"})}):u.jsxs("div",{className:"admin-page",children:[u.jsx("header",{className:"admin-header",children:u.jsxs("div",{className:"admin-header-content",children:[u.jsx(We,{to:"/app/chats",className:"admin-back",children:" Back to App"}),u.jsx("h1",{className:"admin-title",children:"Admin Dashboard"}),u.jsx("p",{className:"admin-subtitle",children:"Manage your ZyChat application"})]})}),u.jsxs("div",{className:"admin-content",children:[u.jsxs("div",{className:"stats-grid",children:[u.jsxs("div",{className:"stat-card glass-card",children:[u.jsx("div",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsx("p",{className:"stat-value",children:n.totalUsers}),u.jsx("p",{className:"stat-label",children:"Total Users"})]})]}),u.jsxs("div",{className:"stat-card glass-card",children:[u.jsx("div",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsx("p",{className:"stat-value",children:n.activeUsers}),u.jsx("p",{className:"stat-label",children:"Active Users"})]})]}),u.jsxs("div",{className:"stat-card glass-card",children:[u.jsx("div",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsx("p",{className:"stat-value",children:n.bannedUsers}),u.jsx("p",{className:"stat-label",children:"Banned Users"})]})]}),u.jsxs("div",{className:"stat-card glass-card",children:[u.jsx("div",{className:"stat-icon",children:""}),u.jsxs("div",{className:"stat-info",children:[u.jsx("p",{className:"stat-value",children:n.totalChats}),u.jsx("p",{className:"stat-label",children:"Total Chats"})]})]})]}),u.jsxs("section",{className:"admin-section",children:[u.jsx("h2",{className:"admin-section-title",children:"Quick Actions"}),u.jsx("div",{className:"admin-links",children:u.jsxs(We,{to:"/admin/users",className:"admin-link glass-card",children:[u.jsx("span",{className:"admin-link-icon",children:""}),u.jsxs("div",{className:"admin-link-content",children:[u.jsx("h3",{children:"Manage Users"}),u.jsx("p",{children:"View, ban, and manage all registered users"})]}),u.jsx("span",{className:"admin-link-arrow",children:""})]})})]})]})]})},RD=()=>{qt();const[n,e]=E.useState([]),[i,a]=E.useState(!0),[l,c]=E.useState("all"),[h,m]=E.useState(""),[p,g]=E.useState(null),[v,_]=E.useState(!1);E.useEffect(()=>{const A=hE(H=>{e(H),a(!1)});return()=>A()},[]);const b=n.filter(A=>{if(l==="active"&&A.isBanned||l==="banned"&&!A.isBanned)return!1;if(h){const H=h.toLowerCase();return A.username?.toLowerCase().includes(H)||A.displayName?.toLowerCase().includes(H)||A.email?.toLowerCase().includes(H)}return!0}),C=async A=>{if(confirm(`Are you sure you want to ban @${A.username}? They will be removed from all groups.`)){_(!0);try{await fE(A.uid),g(null)}catch(H){console.error("Error banning user:",H),alert("Failed to ban user. Please try again.")}finally{_(!1)}}},w=async A=>{if(confirm(`Are you sure you want to unban @${A.username}?`)){_(!0);try{await mE(A.uid),g(null)}catch(H){console.error("Error unbanning user:",H),alert("Failed to unban user. Please try again.")}finally{_(!1)}}},O=async A=>{const H=A.role==="admin"?"user":"admin";if(confirm(`Are you sure you want to ${H==="admin"?"promote":"demote"} @${A.username} to ${H}?`)){_(!0);try{await Ba(A.uid,{role:H}),g(null)}catch(F){console.error("Error updating role:",F),alert("Failed to update role. Please try again.")}finally{_(!1)}}},D=A=>A?new Date(A).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"Never";return i?u.jsxs("div",{className:"admin-page",children:[u.jsx("header",{className:"admin-header",children:u.jsxs("div",{className:"admin-header-content",children:[u.jsx(We,{to:"/admin",className:"admin-back",children:" Back to Dashboard"}),u.jsx("h1",{className:"admin-title",children:"User Management"}),u.jsx("p",{className:"admin-subtitle",children:"Loading users..."})]})}),u.jsx("div",{className:"admin-content",children:u.jsx("div",{className:"users-list",children:[1,2,3,4,5].map(A=>u.jsx(FI,{},A))})})]}):u.jsxs("div",{className:"admin-page",children:[u.jsx("header",{className:"admin-header",children:u.jsxs("div",{className:"admin-header-content",children:[u.jsx(We,{to:"/admin",className:"admin-back",children:" Back to Dashboard"}),u.jsx("h1",{className:"admin-title",children:"User Management"}),u.jsxs("p",{className:"admin-subtitle",children:[n.length," registered users"]})]})}),u.jsxs("div",{className:"admin-content",children:[u.jsxs("div",{className:"admin-filters",children:[u.jsxs("div",{className:"filter-tabs",children:[u.jsxs("button",{className:`filter-tab ${l==="all"?"active":""}`,onClick:()=>c("all"),children:["All (",n.length,")"]}),u.jsxs("button",{className:`filter-tab ${l==="active"?"active":""}`,onClick:()=>c("active"),children:["Active (",n.filter(A=>!A.isBanned).length,")"]}),u.jsxs("button",{className:`filter-tab ${l==="banned"?"active":""}`,onClick:()=>c("banned"),children:["Banned (",n.filter(A=>A.isBanned).length,")"]})]}),u.jsx("input",{type:"text",value:h,onChange:A=>m(A.target.value),placeholder:"Search users...",className:"input admin-search"})]}),u.jsxs("div",{className:"users-list",children:[b.map(A=>u.jsxs("div",{className:`user-card glass-card ${A.isBanned?"banned":""}`,onClick:()=>g(A),children:[u.jsx(Tt,{src:A.avatarUrl,name:A.displayName,size:"lg",showStatus:!0,isOnline:A.isOnline}),u.jsxs("div",{className:"user-card-info",children:[u.jsxs("div",{className:"user-card-header",children:[u.jsx("h3",{className:"user-card-name",children:A.displayName}),u.jsxs("div",{className:"user-card-badges",children:[A.role==="admin"&&u.jsx("span",{className:"badge",children:"Admin"}),A.isBanned&&u.jsx("span",{className:"badge badge-danger",children:"Banned"})]})]}),u.jsxs("p",{className:"user-card-username",children:["@",A.username]}),u.jsx("p",{className:"user-card-email",children:A.email})]}),u.jsx("div",{className:"user-card-meta",children:u.jsxs("p",{className:"user-card-date",children:["Last seen: ",D(A.lastSeen)]})})]},A.uid)),b.length===0&&u.jsxs("div",{className:"empty-state",children:[u.jsx("div",{className:"empty-state-icon",children:""}),u.jsx("h3",{className:"empty-state-title",children:n.length===0?"No Users Registered Yet":"No Users Found"}),u.jsx("p",{className:"empty-state-text",children:n.length===0?"Users will appear here once they register for ZyChat.":"Try adjusting your search or filter criteria."})]})]})]}),u.jsx(GI,{isOpen:!!p,onClose:()=>g(null),title:"User Details",size:"md",children:p&&u.jsxs("div",{className:"user-detail",children:[u.jsxs("div",{className:"user-detail-header",children:[u.jsx(Tt,{src:p.avatarUrl,name:p.displayName,size:"xl"}),u.jsxs("div",{children:[u.jsx("h3",{children:p.displayName}),u.jsxs("p",{className:"text-primary",children:["@",p.username]})]})]}),u.jsxs("div",{className:"user-detail-info",children:[u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:"Email"}),u.jsx("span",{className:"detail-value",children:p.email})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:"Phone"}),u.jsx("span",{className:"detail-value",children:p.phone||"Not set"})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:"Role"}),u.jsx("span",{className:"detail-value",children:p.role})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:"Status"}),u.jsx("span",{className:"detail-value",children:p.isBanned?"Banned":"Active"})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:"About"}),u.jsx("span",{className:"detail-value",children:p.about})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:"Last Seen"}),u.jsx("span",{className:"detail-value",children:D(p.lastSeen)})]})]}),u.jsxs("div",{className:"user-detail-actions",children:[p.isBanned?u.jsx("button",{className:"btn btn-primary",onClick:()=>w(p),disabled:v,children:v?u.jsx(et,{size:"sm"}):"Unban User"}):u.jsx("button",{className:"btn btn-danger",onClick:()=>C(p),disabled:v,children:v?u.jsx(et,{size:"sm"}):"Ban User"}),u.jsx("button",{className:"btn btn-secondary",onClick:()=>O(p),disabled:v,children:p.role==="admin"?"Demote to User":"Promote to Admin"})]})]})})]})},jD=()=>{const{uid:n}=Lb(),e=qt(),[i,a]=E.useState(null),[l,c]=E.useState(!0),[h,m]=E.useState(!1);E.useEffect(()=>{(async()=>{try{const b=await kn(n);if(!b){e("/admin/users");return}a(b)}catch(b){console.error("Error loading user:",b),e("/admin/users")}finally{c(!1)}})()},[n,e]);const p=async()=>{if(confirm(`Are you sure you want to ban @${i.username}?`)){m(!0);try{await fE(i.uid),a(_=>({..._,isBanned:!0}))}catch(_){console.error("Error banning user:",_)}finally{m(!1)}}},g=async()=>{if(confirm(`Are you sure you want to unban @${i.username}?`)){m(!0);try{await mE(i.uid),a(_=>({..._,isBanned:!1}))}catch(_){console.error("Error unbanning user:",_)}finally{m(!1)}}},v=async()=>{const _=i.role==="admin"?"user":"admin";if(confirm(`Change role to ${_}?`)){m(!0);try{await Ba(i.uid,{role:_}),a(b=>({...b,role:_}))}catch(b){console.error("Error updating role:",b)}finally{m(!1)}}};return l?u.jsx("div",{className:"admin-loading",children:u.jsx(et,{size:"lg"})}):i?u.jsxs("div",{className:"admin-page",children:[u.jsx("header",{className:"admin-header",children:u.jsxs("div",{className:"admin-header-content",children:[u.jsx(We,{to:"/admin/users",className:"admin-back",children:" Back to Users"}),u.jsx("h1",{className:"admin-title",children:"User Details"})]})}),u.jsx("div",{className:"admin-content",children:u.jsxs("div",{className:"user-profile-card glass-card",children:[u.jsxs("div",{className:"user-profile-header",children:[u.jsx(Tt,{src:i.avatarUrl,name:i.displayName,size:"2xl",showStatus:!0,isOnline:i.isOnline}),u.jsxs("div",{className:"user-profile-info",children:[u.jsx("h2",{children:i.displayName}),u.jsxs("p",{className:"text-primary",children:["@",i.username]}),u.jsxs("div",{className:"user-badges",children:[i.role==="admin"&&u.jsx("span",{className:"badge",children:"Admin"}),i.isBanned&&u.jsx("span",{className:"badge badge-danger",children:"Banned"}),i.isOnline&&u.jsx("span",{className:"badge badge-success",children:"Online"})]})]})]}),u.jsxs("div",{className:"user-profile-details",children:[u.jsxs("div",{className:"detail-section",children:[u.jsx("h3",{children:"Contact Information"}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:"Email"}),u.jsx("span",{className:"detail-value",children:i.email})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:"Phone"}),u.jsx("span",{className:"detail-value",children:i.phone||"Not set"})]})]}),u.jsxs("div",{className:"detail-section",children:[u.jsx("h3",{children:"Profile"}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:"About"}),u.jsx("span",{className:"detail-value",children:i.about})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:"Role"}),u.jsx("span",{className:"detail-value",children:i.role})]})]}),u.jsxs("div",{className:"detail-section",children:[u.jsx("h3",{children:"Account Status"}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:"Status"}),u.jsx("span",{className:"detail-value",children:i.isBanned?"Banned":"Active"})]}),u.jsxs("div",{className:"detail-row",children:[u.jsx("span",{className:"detail-label",children:"Last Seen"}),u.jsx("span",{className:"detail-value",children:i.lastSeen?new Date(i.lastSeen).toLocaleString():"Never"})]})]})]}),u.jsxs("div",{className:"user-profile-actions",children:[i.isBanned?u.jsx("button",{className:"btn btn-primary btn-lg",onClick:g,disabled:h,children:h?u.jsx(et,{size:"sm"}):"Unban User"}):u.jsx("button",{className:"btn btn-danger btn-lg",onClick:p,disabled:h,children:h?u.jsx(et,{size:"sm"}):"Ban User"}),u.jsx("button",{className:"btn btn-secondary btn-lg",onClick:v,disabled:h,children:i.role==="admin"?"Demote to User":"Promote to Admin"})]})]})})]}):null},OD=()=>u.jsxs(aN,{children:[u.jsx(ut,{path:"/",element:u.jsx(qI,{})}),u.jsx(ut,{path:"/features",element:u.jsx(VI,{})}),u.jsx(ut,{path:"/auth",element:u.jsx(YI,{})}),u.jsx(ut,{path:"/privacy",element:u.jsx(ND,{})}),u.jsx(ut,{path:"/terms",element:u.jsx(TD,{})}),u.jsx(ut,{path:"/help",element:u.jsx(wD,{})}),u.jsxs(ut,{path:"/app",element:u.jsx(HI,{children:u.jsx(cD,{})}),children:[u.jsx(ut,{index:!0,element:u.jsx(Ia,{to:"/app/chats",replace:!0})}),u.jsx(ut,{path:"chats",element:u.jsx(hD,{})}),u.jsx(ut,{path:"chats/:chatId",element:u.jsx(_D,{})}),u.jsx(ut,{path:"status",element:u.jsx(SD,{})}),u.jsx(ut,{path:"calls",element:u.jsx(ED,{})}),u.jsx(ut,{path:"settings",element:u.jsx(CD,{})}),u.jsx(ut,{path:"search",element:u.jsx(xD,{})})]}),u.jsx(ut,{path:"/admin",element:u.jsx(lf,{children:u.jsx(AD,{})})}),u.jsx(ut,{path:"/admin/users",element:u.jsx(lf,{children:u.jsx(RD,{})})}),u.jsx(ut,{path:"/admin/user/:uid",element:u.jsx(lf,{children:u.jsx(jD,{})})}),u.jsx(ut,{path:"*",element:u.jsx(Ia,{to:"/",replace:!0})})]}),ID=()=>{const{incomingCall:n,callerInfo:e,acceptCall:i,rejectCall:a}=Hl(),l=E.useRef(null);if(E.useEffect(()=>{if(n){const m=new Audio;m.src="data:audio/wav;base64,UklGRl4AAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YToAAABkAGQAZABkAKQAZACkAGQApABkAKQAZACkAGQApABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAA==",m.loop=!0,m.volume=.5,m.play().catch(console.error),l.current=m}return()=>{l.current&&(l.current.pause(),l.current=null)}},[n]),!n)return null;const c=()=>{l.current&&(l.current.pause(),l.current=null),i()},h=()=>{l.current&&(l.current.pause(),l.current=null),a()};return u.jsx("div",{className:"call-modal-backdrop",children:u.jsxs("div",{className:"call-modal glass-card",children:[u.jsxs("div",{className:"call-modal-content",children:[u.jsx("div",{className:"call-avatar-ring",children:u.jsx(Tt,{src:e?.avatarUrl,name:e?.displayName,size:"2xl"})}),u.jsx("h2",{className:"call-modal-name",children:e?.displayName||"Unknown"}),u.jsxs("p",{className:"call-modal-type",children:["Incoming ",n.type==="video"?"Video":"Audio"," Call"]}),u.jsxs("p",{className:"call-modal-ringing",children:[u.jsx("span",{className:"ringing-dot"}),u.jsx("span",{className:"ringing-dot"}),u.jsx("span",{className:"ringing-dot"})]})]}),u.jsxs("div",{className:"call-modal-actions",children:[u.jsxs("button",{className:"call-btn decline",onClick:h,children:[u.jsx("span",{className:"call-btn-icon",children:u.jsx(zi,{size:28})}),u.jsx("span",{className:"call-btn-label",children:"Decline"})]}),u.jsxs("button",{className:"call-btn accept",onClick:c,children:[u.jsx("span",{className:"call-btn-icon",children:n.type==="video"?u.jsx(Hm,{size:28}):u.jsx(zi,{size:28})}),u.jsx("span",{className:"call-btn-label",children:"Accept"})]})]})]})})},DD=()=>{const{currentCall:n,callStatus:e,localStream:i,remoteStream:a,callerInfo:l,endCall:c,toggleMute:h,toggleVideo:m}=Hl(),[p,g]=E.useState(!1),[v,_]=E.useState(!1),[b,C]=E.useState(0),[w,O]=E.useState(!1),D=E.useRef(null),A=E.useRef(null),H=E.useRef(null);E.useEffect(()=>{if(e==="ringing"&&n?.isOutgoing){const $=new Audio;$.src="data:audio/wav;base64,UklGRl4AAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YToAAABMACwALABMAGQATABkAEwAZABMAGQATABkAGQAZABkAGQAZABMAGQATABkAEwALABMACwA",$.loop=!0,$.volume=.3,$.play().catch(console.error),H.current=$}return e==="connected"&&H.current&&(H.current.pause(),H.current=null),()=>{H.current&&(H.current.pause(),H.current=null)}},[e,n]),E.useEffect(()=>{i&&D.current&&(D.current.srcObject=i)},[i]),E.useEffect(()=>{a&&A.current&&(A.current.srcObject=a)},[a]),E.useEffect(()=>{let $;return e==="connected"&&($=setInterval(()=>{C(R=>R+1)},1e3)),()=>{$&&clearInterval($)}},[e]);const F=$=>{const R=Math.floor($/60),B=$%60;return`${R}:${B.toString().padStart(2,"0")}`},ee=()=>{const $=h();g($)},K=()=>{const $=m();_($)},X=async()=>{O(!0);const $=new Audio;$.src="data:audio/wav;base64,UklGRjIAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQ4AAAB/f39/f399fXt7eXl3dw==",$.volume=.5,$.play().catch(console.error),setTimeout(()=>{c()},500)};if(!n)return null;const Y=n.type==="video";return u.jsxs("div",{className:`call-screen ${Y?"video":"audio"} ${w?"ending":""}`,children:[Y&&u.jsxs(u.Fragment,{children:[u.jsx("video",{ref:A,className:"call-video remote",autoPlay:!0,playsInline:!0}),!v&&u.jsx("video",{ref:D,className:"call-video local",autoPlay:!0,playsInline:!0,muted:!0}),v&&u.jsx("div",{className:"call-video local video-off",children:u.jsx(QI,{size:32})})]}),!Y&&u.jsxs("div",{className:"call-audio-ui",children:[u.jsx("div",{className:`call-avatar-pulse ${e==="connected"?"connected":""}`,children:u.jsx(Tt,{src:l?.avatarUrl,name:l?.displayName,size:"2xl"})}),u.jsx("h2",{className:"call-name",children:l?.displayName||"Unknown"})]}),u.jsx("div",{className:"call-info",children:u.jsxs("p",{className:"call-status-text",children:[e==="ringing"&&"Calling...",e==="connecting"&&"Connecting...",e==="connected"&&F(b)]})}),u.jsxs("div",{className:"call-controls",children:[u.jsx("button",{className:`call-control-btn ${p?"active":""}`,onClick:ee,title:p?"Unmute":"Mute",children:p?u.jsx(ZI,{size:24}):u.jsx(XI,{size:24})}),Y&&u.jsx("button",{className:`call-control-btn ${v?"active":""}`,onClick:K,title:v?"Turn on camera":"Turn off camera",children:v?u.jsx($I,{size:24}):u.jsx(Hm,{size:24})}),u.jsx("button",{className:"call-control-btn end",onClick:X,title:"End call",children:u.jsx(zi,{size:24})})]}),w&&u.jsxs("div",{className:"call-end-overlay",children:[u.jsx("div",{className:"call-end-icon",children:u.jsx(zi,{size:48})}),u.jsx("p",{children:"Call Ended"})]})]})};function kD(){const{incomingCall:n,isCallUIOpen:e}=Hl();return u.jsxs(u.Fragment,{children:[u.jsx(OD,{}),n&&u.jsx(ID,{}),e&&u.jsx(DD,{})]})}uw.createRoot(document.getElementById("root")).render(u.jsx(E.StrictMode,{children:u.jsx(AN,{children:u.jsx(jI,{children:u.jsx(xI,{children:u.jsx(PI,{children:u.jsx(BI,{children:u.jsx(AI,{children:u.jsx(kD,{})})})})})})})}));
